{"version":3,"sources":["../../src/types.ts","../../src/adapters/cdp-adapter.ts","../../src/adapters/python-bridge.ts","../../src/adapters/nutjs-adapter.ts","../../src/vlm/cost-tracker.ts","../../src/vlm/cursor-bridge.ts","../../src/vlm/client.ts","../../src/core/desktop-test.ts","../../src/core/assertions.ts","../../src/core/test-runner.ts","../../src/core/accessibility-tree.ts","../../src/core/a11y.ts","../../src/core/visual-regression.ts","../../src/core/interaction-tests.ts","../../src/core/ref-manager.ts","../../src/core/network-interceptor.ts","../../src/core/flow-tester.ts","../../src/core/virtual-list-tester.ts","../../src/core/session-manager.ts","../../src/core/visualizer.ts","../../src/core/monaco-tester.ts","../../src/core/tauri-dialog.ts","../../src/core/benchmark.ts","../../src/core/stream-server.ts","../../src/core/timeline-tester.ts","../../src/core/screen-recorder.ts"],"names":["execSync","fs","path","spawn","readline","resolve","path2","fs2","DEFAULT_CONFIG","CDPAdapter","PythonBridge","NutJSAdapter","VLMClient","fs3","path3","crypto","session","path4","fs4"],"mappings":"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","file":"index.cjs","sourcesContent":["/**\n * @flowsight/desktop-test - Core Type Definitions\n *\n * Comprehensive type system for the hybrid desktop testing framework.\n * Combines deterministic DOM testing with VLM-powered visual AI fallback.\n */\n\n// ============================================================================\n// Enums\n// ============================================================================\n\n/**\n * Testing mode - determines element location strategy\n */\nexport enum TestMode {\n  /** DOM/Accessibility tree only - free, fast, deterministic */\n  DETERMINISTIC = 'deterministic',\n  /** VLM-based visual understanding - intelligent but costs API calls */\n  VISUAL = 'visual',\n  /** Smart: deterministic first, VLM fallback when element not found */\n  HYBRID = 'hybrid',\n}\n\n/**\n * Element location strategy\n */\nexport enum LocatorStrategy {\n  /** Reference from snapshot (e.g., @e1) */\n  REF = 'ref',\n  /** CSS selector */\n  CSS = 'css',\n  /** XPath */\n  XPATH = 'xpath',\n  /** ARIA role + name */\n  ROLE = 'role',\n  /** Text content */\n  TEXT = 'text',\n  /** Visual AI (screenshot + VLM) */\n  VISUAL = 'visual',\n  /** Test ID attribute */\n  TESTID = 'testid',\n}\n\n/**\n * Action execution status\n */\nexport enum ActionStatus {\n  SUCCESS = 'success',\n  FAILED = 'failed',\n  TIMEOUT = 'timeout',\n  NOT_FOUND = 'not_found',\n  VLM_FALLBACK = 'vlm_fallback',\n}\n\n/**\n * VLM Provider\n */\nexport enum VLMProvider {\n  ANTHROPIC = 'anthropic',\n  OPENAI = 'openai',\n  VOLCENGINE = 'volcengine',\n  DOUBAO = 'doubao',\n  CUSTOM = 'custom',\n  /** Use Cursor's built-in Claude model via MCP */\n  CURSOR = 'cursor',\n  /** \n   * Auto-detect any Claude Agent environment:\n   * - Cursor IDE\n   * - Claude Code CLI (terminal)\n   * - VSCode Claude plugin  \n   * - Claude Desktop\n   * - Any MCP environment\n   */\n  AGENT = 'agent',\n}\n\n/**\n * Platform type\n */\nexport enum Platform {\n  MACOS = 'darwin',\n  WINDOWS = 'win32',\n  LINUX = 'linux',\n}\n\n// ============================================================================\n// Configuration Types\n// ============================================================================\n\n/**\n * VLM configuration\n */\nexport interface VLMConfig {\n  /** Provider name */\n  provider: VLMProvider | string;\n  /** Model name */\n  model?: string;\n  /** API key (can also use env var) */\n  apiKey?: string;\n  /** API base URL (for custom providers) */\n  baseURL?: string;\n  /** Max tokens for response */\n  maxTokens?: number;\n  /** Temperature (0-1) */\n  temperature?: number;\n  /** Enable cost tracking */\n  trackCost?: boolean;\n}\n\n/**\n * CDP (Chrome DevTools Protocol) configuration\n */\nexport interface CDPConfig {\n  /** Port number or WebSocket URL */\n  endpoint: string | number;\n  /** Timeout for connection (ms) */\n  timeout?: number;\n}\n\n/**\n * Python bridge configuration\n */\nexport interface PythonBridgeConfig {\n  /** Path to Python executable */\n  pythonPath?: string;\n  /** Path to bridge server script */\n  serverPath?: string;\n  /** Communication port */\n  port?: number;\n  /** Enable debug logging */\n  debug?: boolean;\n}\n\n/**\n * NutJS (native desktop control) configuration\n */\nexport interface NutJSConfig {\n  /** Enable keyboard control */\n  keyboard?: boolean;\n  /** Enable mouse control */\n  mouse?: boolean;\n  /** Key press delay (ms) */\n  keyDelay?: number;\n  /** Mouse move speed */\n  mouseSpeed?: number;\n}\n\n/**\n * Main test configuration\n */\nexport interface DesktopTestConfig {\n  /** Testing mode */\n  mode?: TestMode | 'deterministic' | 'visual' | 'hybrid';\n  /** CDP configuration (for WebView testing) */\n  cdp?: CDPConfig;\n  /** VLM configuration (for visual AI mode) */\n  vlm?: VLMConfig;\n  /** Python bridge configuration (for native desktop control) */\n  pythonBridge?: PythonBridgeConfig;\n  /** NutJS configuration (for cross-platform native control) */\n  nutjs?: NutJSConfig;\n  /** Default timeout (ms) */\n  timeout?: number;\n  /** Enable debug logging */\n  debug?: boolean;\n  /** Screenshot directory */\n  screenshotDir?: string;\n  /** Video recording directory */\n  videoDir?: string;\n  /** Session name (for parallel testing) */\n  session?: string;\n}\n\n// ============================================================================\n// Element Types\n// ============================================================================\n\n/**\n * Bounding box for element positioning\n */\nexport interface BoundingBox {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\n/**\n * Element reference from snapshot\n */\nexport interface ElementRef {\n  /** Reference ID (e.g., \"e1\") */\n  id: string;\n  /** ARIA role */\n  role: string;\n  /** Accessible name */\n  name?: string;\n  /** Nth index (for disambiguation) */\n  nth?: number;\n  /** Bounding box (if available) */\n  boundingBox?: BoundingBox;\n  /** Source: how this element was found */\n  source?: 'dom' | 'accessibility' | 'vlm';\n}\n\n/**\n * Snapshot result from page\n */\nexport interface SnapshotResult {\n  /** Accessibility tree as string */\n  tree: string;\n  /** Element references map */\n  refs: Record<string, ElementRef>;\n  /** Timestamp */\n  timestamp: number;\n  /** Screenshot base64 (if captured) */\n  screenshot?: string;\n}\n\n/**\n * Element locator specification\n */\nexport interface ElementLocator {\n  /** Locator strategy */\n  strategy: LocatorStrategy;\n  /** Locator value */\n  value: string;\n  /** Optional: within another element */\n  within?: ElementLocator;\n  /** Optional: nth match */\n  nth?: number;\n}\n\n// ============================================================================\n// Action Types\n// ============================================================================\n\n/**\n * Click options\n */\nexport interface ClickOptions {\n  /** Button: left, right, middle */\n  button?: 'left' | 'right' | 'middle';\n  /** Click count */\n  count?: number;\n  /** Delay between clicks (ms) */\n  delay?: number;\n  /** Force click even if not visible */\n  force?: boolean;\n  /** Timeout (ms) */\n  timeout?: number;\n}\n\n/**\n * Type/input options\n */\nexport interface TypeOptions {\n  /** Delay between keystrokes (ms) */\n  delay?: number;\n  /** Clear existing content first */\n  clear?: boolean;\n  /** Press Enter after typing */\n  submit?: boolean;\n}\n\n/**\n * Scroll options\n */\nexport interface ScrollOptions {\n  /** Direction */\n  direction: 'up' | 'down' | 'left' | 'right';\n  /** Amount in pixels */\n  amount?: number;\n  /** Smooth scroll */\n  smooth?: boolean;\n}\n\n/**\n * Wait options\n */\nexport interface WaitOptions {\n  /** Timeout (ms) */\n  timeout?: number;\n  /** Polling interval (ms) */\n  interval?: number;\n  /** State to wait for */\n  state?: 'visible' | 'hidden' | 'attached' | 'detached';\n}\n\n/**\n * Screenshot options\n */\nexport interface ScreenshotOptions {\n  /** Full page screenshot */\n  fullPage?: boolean;\n  /** Format */\n  format?: 'png' | 'jpeg';\n  /** Quality (jpeg only) */\n  quality?: number;\n  /** Clip region */\n  clip?: BoundingBox;\n}\n\n/**\n * Action result with detailed information\n */\nexport interface ActionResult<T = void> {\n  /** Status */\n  status: ActionStatus;\n  /** Result data */\n  data?: T;\n  /** Error message */\n  error?: string;\n  /** Execution time (ms) */\n  duration: number;\n  /** Used VLM fallback */\n  usedVLM: boolean;\n  /** VLM cost (if tracked) */\n  vlmCost?: number;\n  /** Screenshot (if captured) */\n  screenshot?: string;\n}\n\n// ============================================================================\n// VLM Types\n// ============================================================================\n\n/**\n * VLM request for element finding\n */\nexport interface VLMFindRequest {\n  /** Screenshot base64 */\n  screenshot: string;\n  /** Element description */\n  description: string;\n  /** Context (what we're looking for) */\n  context?: string;\n  /** Previous actions (for context) */\n  history?: string[];\n}\n\n/**\n * VLM response for element finding\n */\nexport interface VLMFindResponse {\n  /** Found element coordinates */\n  coordinates?: { x: number; y: number };\n  /** Confidence (0-1) */\n  confidence: number;\n  /** Reasoning */\n  reasoning: string;\n  /** Element not found */\n  notFound?: boolean;\n  /** Suggested alternative */\n  alternative?: string;\n}\n\n/**\n * VLM request for action execution\n */\nexport interface VLMActionRequest {\n  /** Screenshot base64 */\n  screenshot: string;\n  /** Instruction */\n  instruction: string;\n  /** Available action spaces */\n  actionSpaces: string[];\n}\n\n/**\n * VLM response for action execution\n */\nexport interface VLMActionResponse {\n  /** Action type */\n  actionType: string;\n  /** Action parameters */\n  actionParams: Record<string, unknown>;\n  /** Thought process */\n  thought: string;\n  /** Reflection */\n  reflection?: string;\n  /** Is task finished */\n  finished: boolean;\n}\n\n/**\n * VLM request for assertion\n */\nexport interface VLMAssertRequest {\n  /** Screenshot base64 */\n  screenshot: string;\n  /** Assertion description */\n  assertion: string;\n  /** Expected behavior */\n  expected?: string;\n}\n\n/**\n * VLM response for assertion\n */\nexport interface VLMAssertResponse {\n  /** Assertion passed */\n  passed: boolean;\n  /** Reasoning */\n  reasoning: string;\n  /** Actual observation */\n  actual: string;\n  /** Suggestions for fixing */\n  suggestions?: string[];\n}\n\n/**\n * Cost tracking entry\n */\nexport interface CostEntry {\n  /** Provider */\n  provider: VLMProvider | string;\n  /** Model */\n  model: string;\n  /** Input tokens */\n  inputTokens: number;\n  /** Output tokens */\n  outputTokens: number;\n  /** Images count */\n  images: number;\n  /** Estimated cost (USD) */\n  cost: number;\n  /** Timestamp */\n  timestamp: number;\n  /** Operation type */\n  operation: 'find' | 'action' | 'assert' | 'analyze';\n}\n\n/**\n * Cost summary\n */\nexport interface CostSummary {\n  /** Total cost (USD) */\n  totalCost: number;\n  /** Total API calls */\n  totalCalls: number;\n  /** Cost by provider */\n  byProvider: Record<string, number>;\n  /** Cost by operation */\n  byOperation: Record<string, number>;\n  /** Detailed entries */\n  entries: CostEntry[];\n}\n\n// ============================================================================\n// Test Types\n// ============================================================================\n\n/**\n * Test case definition\n */\nexport interface TestCase {\n  /** Test name */\n  name: string;\n  /** Test category */\n  category?: string;\n  /** Test function */\n  fn: TestFunction;\n  /** Test timeout */\n  timeout?: number;\n  /** Skip test */\n  skip?: boolean;\n  /** Only run this test */\n  only?: boolean;\n  /** Retry count */\n  retries?: number;\n}\n\n/**\n * Test function signature\n */\nexport type TestFunction = (ctx: TestContext) => Promise<void>;\n\n/**\n * Test context (passed to test functions)\n */\nexport interface TestContext {\n  /** Desktop test instance */\n  test: DesktopTestInstance;\n  /** Assertions */\n  assert: AssertionMethods;\n  /** Logger */\n  log: LogMethods;\n}\n\n/**\n * Desktop test instance interface (main API)\n */\nexport interface DesktopTestInstance {\n  // Connection\n  connect(): Promise<void>;\n  disconnect(): Promise<void>;\n  isConnected(): boolean;\n\n  // Snapshot\n  snapshot(options?: { interactive?: boolean }): Promise<SnapshotResult>;\n\n  // Element finding\n  find(locator: string | ElementLocator): Promise<ElementRef | null>;\n  findAll(locator: string | ElementLocator): Promise<ElementRef[]>;\n  waitFor(locator: string | ElementLocator, options?: WaitOptions): Promise<ElementRef>;\n\n  // Actions\n  click(locator: string | ElementLocator, options?: ClickOptions): Promise<ActionResult>;\n  dblclick(locator: string | ElementLocator): Promise<ActionResult>;\n  rightClick(locator: string | ElementLocator): Promise<ActionResult>;\n  type(locator: string | ElementLocator, text: string, options?: TypeOptions): Promise<ActionResult>;\n  fill(locator: string | ElementLocator, text: string): Promise<ActionResult>;\n  clear(locator: string | ElementLocator): Promise<ActionResult>;\n  press(key: string): Promise<ActionResult>;\n  hover(locator: string | ElementLocator): Promise<ActionResult>;\n  scroll(options: ScrollOptions): Promise<ActionResult>;\n  drag(from: string | ElementLocator, to: string | ElementLocator): Promise<ActionResult>;\n\n  // Visual AI methods (VLM mode)\n  clickText(text: string): Promise<ActionResult>;\n  clickImage(description: string): Promise<ActionResult>;\n  ai(instruction: string): Promise<ActionResult>;\n\n  // Getters\n  getText(locator: string | ElementLocator): Promise<string>;\n  getValue(locator: string | ElementLocator): Promise<string>;\n  getAttribute(locator: string | ElementLocator, attr: string): Promise<string | null>;\n  isVisible(locator: string | ElementLocator): Promise<boolean>;\n  isEnabled(locator: string | ElementLocator): Promise<boolean>;\n  count(locator: string | ElementLocator): Promise<number>;\n  boundingBox(locator: string | ElementLocator): Promise<BoundingBox | null>;\n\n  // Page\n  getUrl(): Promise<string>;\n  getTitle(): Promise<string>;\n  evaluate<T>(script: string): Promise<T>;\n\n  // Screenshot & Recording\n  screenshot(path?: string, options?: ScreenshotOptions): Promise<string>;\n  startRecording(path: string): Promise<void>;\n  stopRecording(): Promise<{ path: string }>;\n\n  // Cost tracking\n  getCostSummary(): CostSummary;\n  resetCostTracking(): void;\n\n  // Utilities\n  wait(ms: number): Promise<void>;\n  waitForIdle(timeout?: number): Promise<void>;\n}\n\n/**\n * Assertion methods\n */\nexport interface AssertionMethods {\n  // Basic\n  ok(condition: boolean, message?: string): void;\n  equal<T>(actual: T, expected: T, message?: string): void;\n  notEqual<T>(actual: T, expected: T, message?: string): void;\n\n  // Numbers\n  greaterThan(actual: number, expected: number, message?: string): void;\n  lessThan(actual: number, expected: number, message?: string): void;\n  greaterOrEqual(actual: number, expected: number, message?: string): void;\n  lessOrEqual(actual: number, expected: number, message?: string): void;\n\n  // Strings\n  contains(haystack: string, needle: string, message?: string): void;\n  matches(actual: string, pattern: RegExp, message?: string): void;\n\n  // Elements\n  exists(locator: string | ElementLocator, message?: string): Promise<void>;\n  notExists(locator: string | ElementLocator, message?: string): Promise<void>;\n  visible(locator: string | ElementLocator, message?: string): Promise<void>;\n  hidden(locator: string | ElementLocator, message?: string): Promise<void>;\n  hasText(locator: string | ElementLocator, text: string, message?: string): Promise<void>;\n  hasValue(locator: string | ElementLocator, value: string, message?: string): Promise<void>;\n  hasAttribute(locator: string | ElementLocator, attr: string, value?: string, message?: string): Promise<void>;\n\n  // Data correctness (key feature for preventing \"0 files\" bug)\n  notZero(locator: string | ElementLocator, message?: string): Promise<void>;\n  notEmpty(locator: string | ElementLocator, message?: string): Promise<void>;\n  dataCorrect(locator: string | ElementLocator, validator: (data: string) => boolean, message?: string): Promise<void>;\n\n  // Visual AI assertions\n  visualCheck(description: string, message?: string): Promise<void>;\n  noVisualRegression(baseline: string, threshold?: number): Promise<void>;\n}\n\n/**\n * Log methods\n */\nexport interface LogMethods {\n  info(message: string, ...args: unknown[]): void;\n  warn(message: string, ...args: unknown[]): void;\n  error(message: string, ...args: unknown[]): void;\n  debug(message: string, ...args: unknown[]): void;\n  step(message: string): void;\n}\n\n// ============================================================================\n// Test Runner Types\n// ============================================================================\n\n/**\n * Test result\n */\nexport interface TestResult {\n  /** Test case */\n  test: TestCase;\n  /** Passed */\n  passed: boolean;\n  /** Error */\n  error?: Error;\n  /** Duration (ms) */\n  duration: number;\n  /** Screenshots captured */\n  screenshots: string[];\n  /** Video path */\n  video?: string;\n  /** Used VLM */\n  usedVLM: boolean;\n  /** VLM cost */\n  vlmCost?: number;\n}\n\n/**\n * Test suite result\n */\nexport interface TestSuiteResult {\n  /** Suite name */\n  name: string;\n  /** Test results */\n  tests: TestResult[];\n  /** Total passed */\n  passed: number;\n  /** Total failed */\n  failed: number;\n  /** Total skipped */\n  skipped: number;\n  /** Total duration */\n  duration: number;\n  /** Total VLM cost */\n  totalVLMCost: number;\n}\n\n/**\n * Reporter interface\n */\nexport interface Reporter {\n  onTestStart(test: TestCase): void;\n  onTestEnd(result: TestResult): void;\n  onSuiteStart(name: string): void;\n  onSuiteEnd(result: TestSuiteResult): void;\n}\n\n// ============================================================================\n// Adapter Interfaces\n// ============================================================================\n\n/**\n * Base adapter interface\n */\nexport interface Adapter {\n  /** Initialize adapter */\n  initialize(): Promise<void>;\n  /** Cleanup adapter */\n  cleanup(): Promise<void>;\n  /** Check if available */\n  isAvailable(): boolean;\n}\n\n/**\n * CDP adapter interface\n */\nexport interface CDPAdapterInterface extends Adapter {\n  connect(): Promise<void>;\n  disconnect(): Promise<void>;\n  getSnapshot(options?: { interactive?: boolean; includeScreenshot?: boolean }): Promise<SnapshotResult>;\n  find(locator: ElementLocator): Promise<ElementRef | null>;\n  findAll(locator: ElementLocator): Promise<ElementRef[]>;\n  click(element: ElementRef, options?: ClickOptions): Promise<void>;\n  type(element: ElementRef, text: string, options?: TypeOptions): Promise<void>;\n  press(key: string): Promise<void>;\n  hover(element: ElementRef): Promise<void>;\n  scroll(options: ScrollOptions): Promise<void>;\n  drag(from: ElementRef, to: ElementRef): Promise<void>;\n  getText(element: ElementRef): Promise<string>;\n  getValue(element: ElementRef): Promise<string>;\n  getAttribute(element: ElementRef, attr: string): Promise<string | null>;\n  isVisible(element: ElementRef): Promise<boolean>;\n  isEnabled(element: ElementRef): Promise<boolean>;\n  getUrl(): Promise<string>;\n  getTitle(): Promise<string>;\n  evaluate<T>(script: string): Promise<T>;\n  screenshot(path?: string, options?: ScreenshotOptions): Promise<string>;\n  getScreenshotBase64(): Promise<string>;\n  startRecording(path: string): Promise<void>;\n  stopRecording(): Promise<{ path: string }>;\n  waitForIdle(timeout?: number): Promise<void>;\n}\n\n/**\n * Python bridge adapter interface\n */\nexport interface PythonBridgeInterface extends Adapter {\n  /** Call Python method */\n  call<T>(method: string, args?: unknown[]): Promise<T>;\n  /** Take screenshot via Python */\n  screenshot(): Promise<string>;\n  /** Click at coordinates via Python */\n  click(x: number, y: number, button?: string): Promise<void>;\n  /** Type text via Python */\n  typeText(text: string): Promise<void>;\n  /** Press key via Python */\n  pressKey(key: string, modifiers?: string[]): Promise<void>;\n  /** Get accessibility tree via Python */\n  getAccessibilityTree(): Promise<unknown>;\n  /** Analyze screenshot with VLM via Python */\n  analyzeVisual(screenshotBase64: string): Promise<unknown>;\n}\n\n/**\n * NutJS adapter interface\n */\nexport interface NutJSAdapterInterface extends Adapter {\n  click(x: number, y: number, button?: 'left' | 'right' | 'middle', count?: number): Promise<void>;\n  moveTo(x: number, y: number): Promise<void>;\n  type(text: string, delay?: number): Promise<void>;\n  press(key: string): Promise<void>;\n  scroll(direction: 'up' | 'down' | 'left' | 'right', amount: number): Promise<void>;\n  drag(fromX: number, fromY: number, toX: number, toY: number): Promise<void>;\n  screenshot(): Promise<string>;\n  getScreenSize(): Promise<{ width: number; height: number }>;\n}\n\n/**\n * VLM client interface\n */\nexport interface VLMClientInterface {\n  findElement(request: VLMFindRequest): Promise<VLMFindResponse>;\n  getNextAction(request: VLMActionRequest): Promise<VLMActionResponse>;\n  assertVisual(request: VLMAssertRequest): Promise<VLMAssertResponse>;\n  getCostSummary(): CostSummary;\n  resetCostTracking(): void;\n}\n","/**\n * @flowsight/desktop-test - CDP Adapter\n *\n * Chrome DevTools Protocol adapter for WebView/Browser control.\n * Uses agent-browser CLI under the hood for Tauri/Electron app testing.\n */\n\nimport { execSync } from 'child_process';\nimport * as fs from 'fs';\n\nimport {\n  LocatorStrategy,\n  type CDPConfig,\n  type SnapshotResult,\n  type ElementRef,\n  type ElementLocator,\n  type ClickOptions,\n  type TypeOptions,\n  type ScrollOptions,\n  type ScreenshotOptions,\n  type CDPAdapterInterface,\n} from '../types.js';\n\n/**\n * CDP Adapter - controls WebView through Chrome DevTools Protocol\n */\nexport class CDPAdapter implements CDPAdapterInterface {\n  private config: Required<CDPConfig>;\n  private connected: boolean = false;\n  private refMap: Map<string, ElementRef> = new Map();\n  private refCounter: number = 0;\n  private session: string;\n\n  constructor(config: CDPConfig) {\n    this.config = {\n      endpoint: config.endpoint,\n      timeout: config.timeout || 30000,\n    };\n    this.session = `session_${Date.now()}`;\n  }\n\n  /**\n   * Initialize adapter\n   */\n  async initialize(): Promise<void> {\n    // Check if agent-browser is available\n    try {\n      execSync('agent-browser --version', { encoding: 'utf-8', stdio: 'pipe' });\n    } catch {\n      console.warn('[CDP Adapter] agent-browser not found. Install with: npm install -g agent-browser');\n    }\n  }\n\n  /**\n   * Cleanup adapter\n   */\n  async cleanup(): Promise<void> {\n    await this.disconnect();\n  }\n\n  /**\n   * Check if available\n   */\n  isAvailable(): boolean {\n    try {\n      execSync('agent-browser --version', { encoding: 'utf-8', stdio: 'pipe' });\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Connect to the browser/app via CDP\n   */\n  async connect(): Promise<void> {\n    const endpoint = typeof this.config.endpoint === 'number'\n      ? String(this.config.endpoint)\n      : this.config.endpoint;\n\n    try {\n      this.exec(['open', `--cdp=${endpoint}`]);\n      this.connected = true;\n    } catch (error: unknown) {\n      const message = error instanceof Error ? error.message : String(error);\n      throw new Error(`Failed to connect via CDP: ${message}`);\n    }\n  }\n\n  /**\n   * Disconnect from the browser/app\n   */\n  async disconnect(): Promise<void> {\n    if (!this.connected) return;\n\n    try {\n      this.exec(['close']);\n    } catch {\n      // Ignore close errors\n    }\n\n    this.connected = false;\n  }\n\n  /**\n   * Get accessibility snapshot with refs\n   */\n  async getSnapshot(options: { interactive?: boolean; includeScreenshot?: boolean } = {}): Promise<SnapshotResult> {\n    this.ensureConnected();\n\n    const args = ['snapshot'];\n    if (options.interactive) args.push('-i');\n\n    const result = this.execJson<{ snapshot: string; refs?: Record<string, { role: string; name?: string }> }>(args);\n\n    // Convert refs to our format\n    const refs: Record<string, ElementRef> = {};\n    if (result.refs) {\n      for (const [key, value] of Object.entries(result.refs)) {\n        refs[key] = {\n          id: key,\n          role: value.role,\n          name: value.name,\n          source: 'dom',\n        };\n        this.refMap.set(key, refs[key]);\n      }\n    }\n\n    let screenshot: string | undefined;\n    if (options.includeScreenshot) {\n      screenshot = await this.getScreenshotBase64();\n    }\n\n    return {\n      tree: result.snapshot || '',\n      refs,\n      timestamp: Date.now(),\n      screenshot,\n    };\n  }\n\n  /**\n   * Find single element\n   */\n  async find(locator: ElementLocator): Promise<ElementRef | null> {\n    this.ensureConnected();\n\n    try {\n      const selector = this.locatorToSelector(locator);\n      const result = this.execJson<{ visible: boolean }>(['is', 'visible', selector]);\n\n      if (result.visible) {\n        const refId = `cdp_${++this.refCounter}`;\n        return {\n          id: refId,\n          role: 'element',\n          name: locator.value,\n          source: 'dom',\n        };\n      }\n    } catch {\n      // Element not found\n    }\n\n    return null;\n  }\n\n  /**\n   * Find all matching elements\n   */\n  async findAll(locator: ElementLocator): Promise<ElementRef[]> {\n    this.ensureConnected();\n\n    try {\n      const selector = this.locatorToSelector(locator);\n      const result = this.execJson<{ count: number }>(['get', 'count', selector]);\n\n      const count = result.count || 0;\n      return Array.from({ length: count }, (_, i) => ({\n        id: `cdp_${++this.refCounter}`,\n        role: 'element',\n        name: locator.value,\n        nth: i,\n        source: 'dom' as const,\n      }));\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Click element\n   */\n  async click(element: ElementRef, options: ClickOptions = {}): Promise<void> {\n    this.ensureConnected();\n\n    const selector = this.elementToSelector(element);\n    const args = ['click', selector];\n\n    if (options.count && options.count > 1) {\n      // For double-click\n      this.exec(['dblclick', selector]);\n    } else {\n      this.exec(args);\n    }\n  }\n\n  /**\n   * Type text\n   */\n  async type(element: ElementRef, text: string, _options: TypeOptions = {}): Promise<void> {\n    this.ensureConnected();\n\n    const selector = this.elementToSelector(element);\n    const escapedText = text.replace(/\"/g, '\\\\\"');\n    this.exec(['type', selector, `\"${escapedText}\"`]);\n  }\n\n  /**\n   * Press key\n   */\n  async press(key: string): Promise<void> {\n    this.ensureConnected();\n    this.exec(['press', key]);\n  }\n\n  /**\n   * Hover over element\n   */\n  async hover(element: ElementRef): Promise<void> {\n    this.ensureConnected();\n\n    const selector = this.elementToSelector(element);\n    this.exec(['hover', selector]);\n  }\n\n  /**\n   * Scroll\n   */\n  async scroll(options: ScrollOptions): Promise<void> {\n    this.ensureConnected();\n\n    const amount = options.amount || 100;\n    this.exec(['scroll', options.direction, String(amount)]);\n  }\n\n  /**\n   * Drag element\n   */\n  async drag(from: ElementRef, to: ElementRef): Promise<void> {\n    this.ensureConnected();\n\n    const fromSelector = this.elementToSelector(from);\n    const toSelector = this.elementToSelector(to);\n    this.exec(['drag', fromSelector, toSelector]);\n  }\n\n  /**\n   * Get element text\n   */\n  async getText(element: ElementRef): Promise<string> {\n    this.ensureConnected();\n\n    const selector = this.elementToSelector(element);\n    const result = this.execJson<{ text: string }>(['get', 'text', selector]);\n    return result.text || '';\n  }\n\n  /**\n   * Get element value\n   */\n  async getValue(element: ElementRef): Promise<string> {\n    this.ensureConnected();\n\n    const selector = this.elementToSelector(element);\n    const result = this.execJson<{ value: string }>(['get', 'value', selector]);\n    return result.value || '';\n  }\n\n  /**\n   * Get element attribute\n   */\n  async getAttribute(element: ElementRef, attr: string): Promise<string | null> {\n    this.ensureConnected();\n\n    const selector = this.elementToSelector(element);\n    const result = this.execJson<{ value: string | null }>(['get', 'attr', selector, attr]);\n    return result.value;\n  }\n\n  /**\n   * Check if element is visible\n   */\n  async isVisible(element: ElementRef): Promise<boolean> {\n    this.ensureConnected();\n\n    try {\n      const selector = this.elementToSelector(element);\n      const result = this.execJson<{ visible: boolean }>(['is', 'visible', selector]);\n      return result.visible;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Check if element is enabled\n   */\n  async isEnabled(element: ElementRef): Promise<boolean> {\n    this.ensureConnected();\n\n    try {\n      const selector = this.elementToSelector(element);\n      const result = this.execJson<{ enabled: boolean }>(['is', 'enabled', selector]);\n      return result.enabled;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Get current URL\n   */\n  async getUrl(): Promise<string> {\n    this.ensureConnected();\n\n    const result = this.execJson<{ url: string }>(['get', 'url']);\n    return result.url || '';\n  }\n\n  /**\n   * Get page title\n   */\n  async getTitle(): Promise<string> {\n    this.ensureConnected();\n\n    const result = this.execJson<{ title: string }>(['get', 'title']);\n    return result.title || '';\n  }\n\n  /**\n   * Evaluate JavaScript\n   */\n  async evaluate<T>(script: string): Promise<T> {\n    this.ensureConnected();\n\n    const escapedScript = script.replace(/\"/g, '\\\\\"');\n    const result = this.execJson<{ result: T }>(['eval', `\"${escapedScript}\"`]);\n    return result.result;\n  }\n\n  /**\n   * Take screenshot\n   */\n  async screenshot(screenshotPath?: string, options: ScreenshotOptions = {}): Promise<string> {\n    this.ensureConnected();\n\n    const args = ['screenshot'];\n    if (screenshotPath) args.push(screenshotPath);\n    if (options.fullPage) args.push('--full');\n\n    const result = this.execJson<{ path: string }>(args);\n    return result.path;\n  }\n\n  /**\n   * Get screenshot as base64\n   */\n  async getScreenshotBase64(): Promise<string> {\n    const tempPath = `/tmp/desktop-test-screenshot-${Date.now()}.jpg`;\n\n    try {\n      this.exec(['screenshot', tempPath]);\n      const data = fs.readFileSync(tempPath);\n      return data.toString('base64');\n    } finally {\n      if (fs.existsSync(tempPath)) {\n        fs.unlinkSync(tempPath);\n      }\n    }\n  }\n\n  /**\n   * Start recording\n   */\n  async startRecording(recordingPath: string): Promise<void> {\n    this.ensureConnected();\n    this.exec(['record', 'start', recordingPath]);\n  }\n\n  /**\n   * Stop recording\n   */\n  async stopRecording(): Promise<{ path: string }> {\n    this.ensureConnected();\n\n    const result = this.execJson<{ path: string }>(['record', 'stop']);\n    return { path: result.path || '' };\n  }\n\n  /**\n   * Wait for page to be idle\n   */\n  async waitForIdle(timeout: number = 5000): Promise<void> {\n    this.ensureConnected();\n    this.exec(['wait', '--load', 'networkidle'], { timeout });\n  }\n\n  // ============================================================================\n  // Private Helpers\n  // ============================================================================\n\n  private ensureConnected(): void {\n    if (!this.connected) {\n      throw new Error('CDP adapter not connected');\n    }\n  }\n\n  private exec(args: string[], options: { timeout?: number } = {}): string {\n    const sessionArg = `--session=${this.session}`;\n    const cmd = `agent-browser ${sessionArg} ${args.join(' ')}`.trim();\n\n    try {\n      return execSync(cmd, {\n        encoding: 'utf-8',\n        timeout: options.timeout ?? this.config.timeout,\n        stdio: ['pipe', 'pipe', 'pipe'],\n      }).trim();\n    } catch (err: unknown) {\n      const error = err as { stderr?: Buffer; stdout?: Buffer; message?: string };\n      const stderr = error.stderr?.toString() || '';\n      const stdout = error.stdout?.toString() || '';\n      throw new Error(`agent-browser command failed: ${cmd}\\nstderr: ${stderr}\\nstdout: ${stdout}`);\n    }\n  }\n\n  private execJson<T>(args: string[]): T {\n    const result = this.exec([...args, '--json']);\n\n    try {\n      const parsed = JSON.parse(result);\n      if (!parsed.success && parsed.error) {\n        throw new Error(parsed.error);\n      }\n      return (parsed.data || parsed) as T;\n    } catch (err: unknown) {\n      if (err instanceof Error && err.message.includes('agent-browser')) {\n        throw err;\n      }\n      throw new Error(`JSON parse failed: ${result}`);\n    }\n  }\n\n  private locatorToSelector(locator: ElementLocator): string {\n    switch (locator.strategy) {\n      case LocatorStrategy.REF:\n        return locator.value.startsWith('@') ? locator.value : `@${locator.value}`;\n      case LocatorStrategy.CSS:\n        return locator.value;\n      case LocatorStrategy.XPATH:\n        return `xpath=${locator.value}`;\n      case LocatorStrategy.TEXT:\n        return `text=${locator.value}`;\n      case LocatorStrategy.ROLE:\n        return `role=${locator.value}`;\n      case LocatorStrategy.TESTID:\n        return locator.value;\n      default:\n        return locator.value;\n    }\n  }\n\n  private elementToSelector(element: ElementRef): string {\n    if (element.id.startsWith('cdp_')) {\n      return element.name || '';\n    }\n    return `@${element.id}`;\n  }\n}\n","/**\n * @flowsight/desktop-test - Python Bridge Adapter\n *\n * Bridge to the existing Python desktop automation framework.\n * Communicates with Python via subprocess and JSON-RPC style messages.\n */\n\nimport { spawn, ChildProcess } from 'child_process';\nimport * as path from 'path';\nimport * as readline from 'readline';\n\nimport {\n  type PythonBridgeConfig,\n  type PythonBridgeInterface,\n} from '../types.js';\n\n/**\n * Default Python bridge configuration\n */\nconst DEFAULT_CONFIG: Required<PythonBridgeConfig> = {\n  pythonPath: 'python3',\n  serverPath: '',\n  port: 0,\n  debug: false,\n};\n\n/**\n * Python Bridge - connects to the existing Python desktop automation framework\n */\nexport class PythonBridge implements PythonBridgeInterface {\n  private config: Required<PythonBridgeConfig>;\n  private process: ChildProcess | null = null;\n  private available: boolean = false;\n  private requestId: number = 0;\n  private pendingRequests: Map<number, {\n    resolve: (value: unknown) => void;\n    reject: (error: Error) => void;\n  }> = new Map();\n  private readline: readline.Interface | null = null;\n\n  constructor(config: PythonBridgeConfig = {}) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n\n    // Default server path relative to this package\n    if (!this.config.serverPath) {\n      // Look for bridge server in the app/tests/desktop directory\n      this.config.serverPath = path.resolve(\n        __dirname,\n        '../../../../app/tests/desktop/bridge_server.py'\n      );\n    }\n  }\n\n  /**\n   * Initialize the Python bridge\n   */\n  async initialize(): Promise<void> {\n    try {\n      // Spawn Python subprocess\n      this.process = spawn(this.config.pythonPath, [this.config.serverPath], {\n        stdio: ['pipe', 'pipe', 'pipe'],\n        env: {\n          ...process.env,\n          PYTHONUNBUFFERED: '1',\n        },\n      });\n\n      if (!this.process.stdout || !this.process.stdin) {\n        throw new Error('Failed to create Python process streams');\n      }\n\n      // Set up readline for stdout\n      this.readline = readline.createInterface({\n        input: this.process.stdout,\n        terminal: false,\n      });\n\n      // Handle responses\n      this.readline.on('line', (line) => {\n        this.handleResponse(line);\n      });\n\n      // Handle stderr for debugging\n      this.process.stderr?.on('data', (data) => {\n        if (this.config.debug) {\n          console.error(`[Python Bridge stderr] ${data.toString()}`);\n        }\n      });\n\n      // Handle process exit\n      this.process.on('exit', (code) => {\n        this.available = false;\n        if (this.config.debug) {\n          console.log(`[Python Bridge] Process exited with code ${code}`);\n        }\n      });\n\n      // Wait for ready signal\n      await this.waitForReady();\n      this.available = true;\n\n      if (this.config.debug) {\n        console.log('[Python Bridge] Initialized successfully');\n      }\n    } catch (error) {\n      this.available = false;\n      throw error;\n    }\n  }\n\n  /**\n   * Cleanup the Python bridge\n   */\n  async cleanup(): Promise<void> {\n    if (this.process) {\n      try {\n        await this.call('shutdown');\n      } catch {\n        // Ignore shutdown errors\n      }\n\n      this.process.kill();\n      this.process = null;\n    }\n\n    if (this.readline) {\n      this.readline.close();\n      this.readline = null;\n    }\n\n    this.available = false;\n    this.pendingRequests.clear();\n  }\n\n  /**\n   * Check if available\n   */\n  isAvailable(): boolean {\n    return this.available && this.process !== null;\n  }\n\n  /**\n   * Call a Python method\n   */\n  async call<T>(method: string, args: unknown[] = []): Promise<T> {\n    if (!this.isAvailable()) {\n      throw new Error('Python bridge not available');\n    }\n\n    const id = ++this.requestId;\n    const request = {\n      jsonrpc: '2.0',\n      id,\n      method,\n      params: args,\n    };\n\n    return new Promise((resolve, reject) => {\n      this.pendingRequests.set(id, { resolve: resolve as (v: unknown) => void, reject });\n\n      // Send request\n      this.process!.stdin!.write(JSON.stringify(request) + '\\n');\n\n      // Timeout\n      setTimeout(() => {\n        if (this.pendingRequests.has(id)) {\n          this.pendingRequests.delete(id);\n          reject(new Error(`Python bridge timeout for method: ${method}`));\n        }\n      }, 30000);\n    });\n  }\n\n  /**\n   * Take screenshot via Python\n   */\n  async screenshot(): Promise<string> {\n    return this.call<string>('screenshot');\n  }\n\n  /**\n   * Click at coordinates via Python\n   */\n  async click(x: number, y: number, button: string = 'left'): Promise<void> {\n    await this.call('click', [x, y, button]);\n  }\n\n  /**\n   * Type text via Python\n   */\n  async typeText(text: string): Promise<void> {\n    await this.call('type_text', [text]);\n  }\n\n  /**\n   * Press key via Python\n   */\n  async pressKey(key: string, modifiers: string[] = []): Promise<void> {\n    await this.call('press_key', [key, modifiers]);\n  }\n\n  /**\n   * Get accessibility tree via Python\n   */\n  async getAccessibilityTree(): Promise<unknown> {\n    return this.call('get_accessibility_tree');\n  }\n\n  /**\n   * Analyze screenshot with VLM via Python\n   */\n  async analyzeVisual(screenshotBase64: string): Promise<unknown> {\n    return this.call('analyze_visual', [screenshotBase64]);\n  }\n\n  // ============================================================================\n  // Additional Desktop Control Methods\n  // ============================================================================\n\n  /**\n   * Move mouse to coordinates\n   */\n  async moveMouse(x: number, y: number): Promise<void> {\n    await this.call('move_mouse', [x, y]);\n  }\n\n  /**\n   * Double click\n   */\n  async doubleClick(x: number, y: number): Promise<void> {\n    await this.call('double_click', [x, y]);\n  }\n\n  /**\n   * Right click\n   */\n  async rightClick(x: number, y: number): Promise<void> {\n    await this.call('click', [x, y, 'right']);\n  }\n\n  /**\n   * Drag from one point to another\n   */\n  async drag(fromX: number, fromY: number, toX: number, toY: number): Promise<void> {\n    await this.call('drag', [fromX, fromY, toX, toY]);\n  }\n\n  /**\n   * Scroll\n   */\n  async scroll(x: number, y: number, deltaX: number, deltaY: number): Promise<void> {\n    await this.call('scroll', [x, y, deltaX, deltaY]);\n  }\n\n  /**\n   * Find application window\n   */\n  async findApplication(appName: string): Promise<unknown> {\n    return this.call('find_application', [appName]);\n  }\n\n  /**\n   * Activate application window\n   */\n  async activateApplication(appName: string): Promise<void> {\n    await this.call('activate_application', [appName]);\n  }\n\n  /**\n   * Get screen size\n   */\n  async getScreenSize(): Promise<{ width: number; height: number }> {\n    return this.call('get_screen_size');\n  }\n\n  /**\n   * Find element by name\n   */\n  async findElementByName(name: string, elementType?: string): Promise<unknown> {\n    return this.call('find_element_by_name', [name, elementType]);\n  }\n\n  // ============================================================================\n  // Private Methods\n  // ============================================================================\n\n  /**\n   * Wait for Python process to be ready\n   */\n  private async waitForReady(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const timeout = setTimeout(() => {\n        reject(new Error('Python bridge startup timeout'));\n      }, 10000);\n\n      const handler = (line: string) => {\n        try {\n          const data = JSON.parse(line);\n          if (data.status === 'ready') {\n            clearTimeout(timeout);\n            this.readline?.off('line', handler);\n            resolve();\n          }\n        } catch {\n          // Ignore non-JSON lines during startup\n        }\n      };\n\n      this.readline?.on('line', handler);\n    });\n  }\n\n  /**\n   * Handle response from Python process\n   */\n  private handleResponse(line: string): void {\n    try {\n      const response = JSON.parse(line);\n\n      // Skip status messages\n      if (response.status) {\n        return;\n      }\n\n      const { id, result, error } = response;\n\n      if (id && this.pendingRequests.has(id)) {\n        const { resolve, reject } = this.pendingRequests.get(id)!;\n        this.pendingRequests.delete(id);\n\n        if (error) {\n          reject(new Error(error.message || 'Python bridge error'));\n        } else {\n          resolve(result);\n        }\n      }\n    } catch (e) {\n      if (this.config.debug) {\n        console.log(`[Python Bridge] Non-JSON output: ${line}`);\n      }\n    }\n  }\n}\n","/**\n * @flowsight/desktop-test - NutJS Adapter\n *\n * Native desktop control adapter using NutJS.\n * Provides cross-platform mouse, keyboard, and screenshot capabilities.\n */\n\nimport type { NutJSConfig, NutJSAdapterInterface } from '../types.js';\n\n/**\n * Key mapping for NutJS\n */\nconst KEY_MAP: Record<string, string> = {\n  'ctrl': 'LeftControl',\n  'control': 'LeftControl',\n  'cmd': 'LeftSuper',\n  'command': 'LeftSuper',\n  'meta': 'LeftSuper',\n  'alt': 'LeftAlt',\n  'option': 'LeftAlt',\n  'shift': 'LeftShift',\n  'enter': 'Return',\n  'return': 'Return',\n  'esc': 'Escape',\n  'escape': 'Escape',\n  'backspace': 'Backspace',\n  'delete': 'Delete',\n  'tab': 'Tab',\n  'space': 'Space',\n  'up': 'Up',\n  'down': 'Down',\n  'left': 'Left',\n  'right': 'Right',\n  'home': 'Home',\n  'end': 'End',\n  'pageup': 'PageUp',\n  'pagedown': 'PageDown',\n  'insert': 'Insert',\n  'f1': 'F1', 'f2': 'F2', 'f3': 'F3', 'f4': 'F4',\n  'f5': 'F5', 'f6': 'F6', 'f7': 'F7', 'f8': 'F8',\n  'f9': 'F9', 'f10': 'F10', 'f11': 'F11', 'f12': 'F12',\n};\n\n/**\n * NutJS Adapter - native desktop control\n */\nexport class NutJSAdapter implements NutJSAdapterInterface {\n  private config: Required<NutJSConfig>;\n  private initialized: boolean = false;\n  private nut: NutJSModule | null = null;\n\n  constructor(config: NutJSConfig = {}) {\n    this.config = {\n      keyboard: config.keyboard ?? true,\n      mouse: config.mouse ?? true,\n      keyDelay: config.keyDelay ?? 50,\n      mouseSpeed: config.mouseSpeed ?? 500,\n    };\n  }\n\n  /**\n   * Initialize NutJS\n   */\n  async initialize(): Promise<void> {\n    if (this.initialized) return;\n\n    try {\n      // Dynamic import to avoid bundling issues\n      // Try @computer-use/nut-js first (newer package), fallback to @nut-tree/nut-js\n      let nutModule: NutJSModule;\n      \n      try {\n        // @ts-expect-error - Dynamic import, types not bundled\n        nutModule = await import('@computer-use/nut-js') as NutJSModule;\n      } catch {\n        try {\n          // @ts-expect-error - Dynamic import, types not bundled\n          nutModule = await import('@nut-tree/nut-js') as NutJSModule;\n        } catch {\n          throw new Error('NutJS not installed. Run: npm install @nut-tree/nut-js');\n        }\n      }\n\n      this.nut = nutModule;\n\n      // Configure\n      if (this.nut.keyboard) {\n        this.nut.keyboard.config.autoDelayMs = this.config.keyDelay;\n      }\n      if (this.nut.mouse) {\n        this.nut.mouse.config.mouseSpeed = this.config.mouseSpeed;\n      }\n\n      this.initialized = true;\n    } catch (error: unknown) {\n      // NutJS is optional - fall back gracefully\n      const message = error instanceof Error ? error.message : String(error);\n      console.warn(`[NutJS Adapter] Not available: ${message}`);\n      this.initialized = false;\n    }\n  }\n\n  /**\n   * Cleanup\n   */\n  async cleanup(): Promise<void> {\n    this.initialized = false;\n    this.nut = null;\n  }\n\n  /**\n   * Check if NutJS is available\n   */\n  isAvailable(): boolean {\n    return this.initialized && this.nut !== null;\n  }\n\n  /**\n   * Click at coordinates\n   */\n  async click(\n    x: number,\n    y: number,\n    button: 'left' | 'right' | 'middle' = 'left',\n    count: number = 1\n  ): Promise<void> {\n    if (!this.isAvailable() || !this.nut) {\n      throw new Error('NutJS not available');\n    }\n\n    const { mouse, Button, Point } = this.nut;\n\n    await mouse.setPosition(new Point(x, y));\n\n    const mouseButton = button === 'right' ? Button.RIGHT :\n                        button === 'middle' ? Button.MIDDLE : Button.LEFT;\n\n    for (let i = 0; i < count; i++) {\n      await mouse.click(mouseButton);\n      if (i < count - 1) {\n        await this.sleep(50);\n      }\n    }\n  }\n\n  /**\n   * Move mouse to coordinates\n   */\n  async moveTo(x: number, y: number): Promise<void> {\n    if (!this.isAvailable() || !this.nut) {\n      throw new Error('NutJS not available');\n    }\n\n    const { mouse, Point } = this.nut;\n    await mouse.move([new Point(x, y)]);\n  }\n\n  /**\n   * Type text\n   */\n  async type(text: string, delay?: number): Promise<void> {\n    if (!this.isAvailable() || !this.nut) {\n      throw new Error('NutJS not available');\n    }\n\n    const { keyboard } = this.nut;\n\n    if (delay) {\n      keyboard.config.autoDelayMs = delay;\n    }\n\n    await keyboard.type(text);\n\n    if (delay) {\n      keyboard.config.autoDelayMs = this.config.keyDelay;\n    }\n  }\n\n  /**\n   * Press key or key combination\n   */\n  async press(key: string): Promise<void> {\n    if (!this.isAvailable() || !this.nut) {\n      throw new Error('NutJS not available');\n    }\n\n    const { keyboard, Key } = this.nut;\n\n    // Parse key combination (e.g., \"Control+a\", \"Meta+Shift+s\")\n    const parts = key.split('+');\n    const keys: number[] = [];\n\n    for (const part of parts) {\n      const normalizedKey = this.normalizeKey(part.trim());\n      const nutKey = Key[normalizedKey as keyof typeof Key];\n      if (nutKey !== undefined) {\n        keys.push(nutKey);\n      }\n    }\n\n    if (keys.length === 0) {\n      throw new Error(`Unknown key: ${key}`);\n    }\n\n    if (keys.length === 1) {\n      await keyboard.pressKey(keys[0]);\n      await keyboard.releaseKey(keys[0]);\n    } else {\n      // Hold modifiers, press main key, release all\n      const modifiers = keys.slice(0, -1);\n      const mainKey = keys[keys.length - 1];\n\n      for (const mod of modifiers) {\n        await keyboard.pressKey(mod);\n      }\n      await keyboard.pressKey(mainKey);\n      await keyboard.releaseKey(mainKey);\n      for (const mod of modifiers.reverse()) {\n        await keyboard.releaseKey(mod);\n      }\n    }\n  }\n\n  /**\n   * Scroll\n   */\n  async scroll(direction: 'up' | 'down' | 'left' | 'right', amount: number): Promise<void> {\n    if (!this.isAvailable() || !this.nut) {\n      throw new Error('NutJS not available');\n    }\n\n    const { mouse } = this.nut;\n\n    switch (direction) {\n      case 'up':\n        await mouse.scrollUp(amount);\n        break;\n      case 'down':\n        await mouse.scrollDown(amount);\n        break;\n      case 'left':\n        await mouse.scrollLeft(amount);\n        break;\n      case 'right':\n        await mouse.scrollRight(amount);\n        break;\n    }\n  }\n\n  /**\n   * Drag from one point to another\n   */\n  async drag(fromX: number, fromY: number, toX: number, toY: number): Promise<void> {\n    if (!this.isAvailable() || !this.nut) {\n      throw new Error('NutJS not available');\n    }\n\n    const { mouse, Point } = this.nut;\n\n    await mouse.setPosition(new Point(fromX, fromY));\n    await mouse.drag([new Point(toX, toY)]);\n  }\n\n  /**\n   * Take screenshot and return base64\n   */\n  async screenshot(): Promise<string> {\n    if (!this.isAvailable() || !this.nut) {\n      throw new Error('NutJS not available');\n    }\n\n    const { screen } = this.nut;\n\n    // Import Jimp dynamically\n    const { Jimp } = await import('jimp');\n\n    const capture = await screen.capture();\n    const image = new Jimp({\n      width: capture.width,\n      height: capture.height,\n      data: Buffer.from(capture.data),\n    });\n\n    const buffer = await image.getBuffer('image/jpeg', { quality: 75 });\n    return buffer.toString('base64');\n  }\n\n  /**\n   * Get screen size\n   */\n  async getScreenSize(): Promise<{ width: number; height: number }> {\n    if (!this.isAvailable() || !this.nut) {\n      throw new Error('NutJS not available');\n    }\n\n    const { screen } = this.nut;\n    const size = await screen.size();\n    return { width: size.width, height: size.height };\n  }\n\n  // ============================================================================\n  // Private Helpers\n  // ============================================================================\n\n  private normalizeKey(key: string): string {\n    const lower = key.toLowerCase();\n    if (KEY_MAP[lower]) {\n      return KEY_MAP[lower];\n    }\n\n    // Single letter key\n    if (key.length === 1) {\n      return key.toUpperCase();\n    }\n\n    // Return as-is (capitalized)\n    return key.charAt(0).toUpperCase() + key.slice(1);\n  }\n\n  private sleep(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n}\n\n// ============================================================================\n// Type definitions for NutJS module\n// ============================================================================\n\ninterface NutJSModule {\n  mouse: {\n    config: { mouseSpeed: number };\n    setPosition: (point: NutPoint) => Promise<void>;\n    move: (path: NutPoint[]) => Promise<void>;\n    click: (button: number) => Promise<void>;\n    drag: (path: NutPoint[]) => Promise<void>;\n    scrollUp: (amount: number) => Promise<void>;\n    scrollDown: (amount: number) => Promise<void>;\n    scrollLeft: (amount: number) => Promise<void>;\n    scrollRight: (amount: number) => Promise<void>;\n  };\n  keyboard: {\n    config: { autoDelayMs: number };\n    type: (text: string) => Promise<void>;\n    pressKey: (key: number) => Promise<void>;\n    releaseKey: (key: number) => Promise<void>;\n  };\n  screen: {\n    capture: () => Promise<{ width: number; height: number; data: Uint8Array }>;\n    size: () => Promise<{ width: number; height: number }>;\n  };\n  Button: {\n    LEFT: number;\n    RIGHT: number;\n    MIDDLE: number;\n  };\n  Key: Record<string, number>;\n  Point: new (x: number, y: number) => NutPoint;\n}\n\ninterface NutPoint {\n  x: number;\n  y: number;\n}\n","/**\n * @flowsight/desktop-test - VLM Cost Tracker\n *\n * Tracks API usage and estimates costs across different VLM providers.\n */\n\nimport {\n  VLMProvider,\n  type CostEntry,\n  type CostSummary,\n} from '../types.js';\n\n/**\n * Pricing information per provider (as of 2024)\n * Prices in USD per unit\n */\nconst PRICING: Record<string, {\n  inputTokenPrice: number;      // per 1K tokens\n  outputTokenPrice: number;     // per 1K tokens\n  imagePrice: number;           // per image\n}> = {\n  [VLMProvider.ANTHROPIC]: {\n    inputTokenPrice: 0.003,     // Claude 3.5 Sonnet\n    outputTokenPrice: 0.015,\n    imagePrice: 0.0048,         // ~1280x1280 image\n  },\n  [VLMProvider.OPENAI]: {\n    inputTokenPrice: 0.005,     // GPT-4o\n    outputTokenPrice: 0.015,\n    imagePrice: 0.00765,        // high detail\n  },\n  [VLMProvider.VOLCENGINE]: {\n    inputTokenPrice: 0.0008,    // Doubao Pro (Chinese pricing)\n    outputTokenPrice: 0.002,\n    imagePrice: 0.001,\n  },\n  [VLMProvider.DOUBAO]: {\n    inputTokenPrice: 0.0008,\n    outputTokenPrice: 0.002,\n    imagePrice: 0.001,\n  },\n  // Default/fallback pricing\n  default: {\n    inputTokenPrice: 0.003,\n    outputTokenPrice: 0.015,\n    imagePrice: 0.005,\n  },\n};\n\n/**\n * Cost Tracker - monitors VLM API usage and costs\n */\nexport class CostTracker {\n  private entries: CostEntry[] = [];\n  private customPricing: Record<string, typeof PRICING[string]> = {};\n\n  /**\n   * Set custom pricing for a provider\n   */\n  setPricing(provider: string, pricing: typeof PRICING[string]): void {\n    this.customPricing[provider] = pricing;\n  }\n\n  /**\n   * Get pricing for a provider\n   */\n  private getPricing(provider: string): typeof PRICING[string] {\n    return this.customPricing[provider] || PRICING[provider] || PRICING.default;\n  }\n\n  /**\n   * Track a VLM API call\n   */\n  track(entry: {\n    provider: VLMProvider | string;\n    model: string;\n    inputTokens: number;\n    outputTokens: number;\n    images?: number;\n    operation: CostEntry['operation'];\n  }): CostEntry {\n    const pricing = this.getPricing(entry.provider);\n    const images = entry.images || 1;\n\n    const cost =\n      (entry.inputTokens / 1000) * pricing.inputTokenPrice +\n      (entry.outputTokens / 1000) * pricing.outputTokenPrice +\n      images * pricing.imagePrice;\n\n    const costEntry: CostEntry = {\n      provider: entry.provider,\n      model: entry.model,\n      inputTokens: entry.inputTokens,\n      outputTokens: entry.outputTokens,\n      images,\n      cost,\n      timestamp: Date.now(),\n      operation: entry.operation,\n    };\n\n    this.entries.push(costEntry);\n    return costEntry;\n  }\n\n  /**\n   * Estimate cost for a potential call (without tracking)\n   */\n  estimate(entry: {\n    provider: VLMProvider | string;\n    inputTokens: number;\n    outputTokens: number;\n    images?: number;\n  }): number {\n    const pricing = this.getPricing(entry.provider);\n    const images = entry.images || 1;\n\n    return (\n      (entry.inputTokens / 1000) * pricing.inputTokenPrice +\n      (entry.outputTokens / 1000) * pricing.outputTokenPrice +\n      images * pricing.imagePrice\n    );\n  }\n\n  /**\n   * Get cost summary\n   */\n  getSummary(): CostSummary {\n    const byProvider: Record<string, number> = {};\n    const byOperation: Record<string, number> = {};\n\n    for (const entry of this.entries) {\n      byProvider[entry.provider] = (byProvider[entry.provider] || 0) + entry.cost;\n      byOperation[entry.operation] = (byOperation[entry.operation] || 0) + entry.cost;\n    }\n\n    return {\n      totalCost: this.entries.reduce((sum, e) => sum + e.cost, 0),\n      totalCalls: this.entries.length,\n      byProvider,\n      byOperation,\n      entries: [...this.entries],\n    };\n  }\n\n  /**\n   * Get recent entries\n   */\n  getRecentEntries(count: number = 10): CostEntry[] {\n    return this.entries.slice(-count);\n  }\n\n  /**\n   * Reset tracking\n   */\n  reset(): void {\n    this.entries = [];\n  }\n\n  /**\n   * Export to JSON\n   */\n  toJSON(): string {\n    return JSON.stringify(this.getSummary(), null, 2);\n  }\n\n  /**\n   * Print summary to console\n   */\n  printSummary(): void {\n    const summary = this.getSummary();\n\n    console.log('\\n=== VLM Cost Summary ===');\n    console.log(`Total Cost: $${summary.totalCost.toFixed(4)}`);\n    console.log(`Total Calls: ${summary.totalCalls}`);\n\n    if (Object.keys(summary.byProvider).length > 0) {\n      console.log('\\nBy Provider:');\n      for (const [provider, cost] of Object.entries(summary.byProvider)) {\n        console.log(`  ${provider}: $${cost.toFixed(4)}`);\n      }\n    }\n\n    if (Object.keys(summary.byOperation).length > 0) {\n      console.log('\\nBy Operation:');\n      for (const [operation, cost] of Object.entries(summary.byOperation)) {\n        console.log(`  ${operation}: $${cost.toFixed(4)}`);\n      }\n    }\n\n    console.log('========================\\n');\n  }\n}\n","/**\n * @flowsight/desktop-test - Cursor Bridge\n *\n * Enables VLM functionality using Cursor's built-in Claude model.\n * When tests run within a Cursor Agent context, visual analysis\n * requests are automatically processed by the current Claude session.\n */\n\nimport * as fs from 'fs';\nimport * as path from 'path';\n\nimport type {\n  VLMConfig,\n  VLMFindRequest,\n  VLMFindResponse,\n  VLMActionRequest,\n  VLMActionResponse,\n  VLMAssertRequest,\n  VLMAssertResponse,\n  CostSummary,\n} from '../types.js';\n\n/**\n * Detected Claude Agent environment\n */\nexport type AgentEnvironment = \n  | 'cursor'           // Cursor IDE\n  | 'claude-code'      // Claude Code CLI (terminal)\n  | 'vscode-claude'    // VSCode Claude plugin\n  | 'claude-desktop'   // Claude Desktop app\n  | 'anthropic-mcp'    // Generic MCP environment\n  | 'unknown';         // Unknown but likely agent context\n\n/**\n * Detect which Claude Agent environment we're running in\n */\nexport function detectAgentEnvironment(): AgentEnvironment | null {\n  // 1. Cursor IDE\n  if (\n    process.env.CURSOR_SESSION ||\n    process.env.CURSOR_WORKSPACE ||\n    process.env.CURSOR_IDE ||\n    process.env.CURSOR_TRACE_ID\n  ) {\n    return 'cursor';\n  }\n\n  // 2. Claude Code CLI (terminal)\n  if (\n    process.env.CLAUDE_CODE ||\n    process.env.CLAUDE_CLI ||\n    process.env.ANTHROPIC_AGENT ||\n    process.env.CLAUDE_SESSION_ID\n  ) {\n    return 'claude-code';\n  }\n\n  // 3. VSCode Claude plugin\n  if (\n    process.env.VSCODE_CLAUDE ||\n    process.env.CLAUDE_VSCODE ||\n    process.env.VSCODE_PID && process.env.ANTHROPIC_API_KEY === undefined\n  ) {\n    return 'vscode-claude';\n  }\n\n  // 4. Claude Desktop app\n  if (\n    process.env.CLAUDE_DESKTOP ||\n    process.env.CLAUDE_APP\n  ) {\n    return 'claude-desktop';\n  }\n\n  // 5. Generic MCP environment\n  if (\n    process.env.MCP_SERVER ||\n    process.env.MCP_SESSION\n  ) {\n    return 'anthropic-mcp';\n  }\n\n  // 6. Check if running in TTY with common agent indicators\n  if (\n    process.stdout.isTTY === false &&\n    (process.env.TERM_PROGRAM === 'vscode' || \n     process.env.TERM === 'xterm-256color')\n  ) {\n    return 'unknown';\n  }\n\n  // 7. Explicit flag from user\n  if (process.env.USE_AGENT_MODE === 'true') {\n    return 'unknown';\n  }\n\n  return null;\n}\n\n/**\n * Check if we should use Agent mode (any Claude environment)\n */\nexport function shouldUseAgentMode(): boolean {\n  return detectAgentEnvironment() !== null || \n         process.env.USE_CURSOR === 'true' ||\n         process.env.USE_AGENT_MODE === 'true';\n}\n\n/**\n * Agent Bridge - Works with any Claude Agent environment\n * \n * Supports:\n * - Cursor IDE\n * - Claude Code CLI (terminal)\n * - VSCode Claude plugin\n * - Claude Desktop\n * - Any MCP-enabled environment\n *\n * This bridge outputs structured requests that the Agent processes,\n * using the model available in the current session.\n */\nexport class CursorBridge {\n  private screenshotDir: string;\n  private requestCount = 0;\n  private environment: AgentEnvironment;\n\n  constructor(_config: VLMConfig) {\n    this.environment = detectAgentEnvironment() || 'unknown';\n    this.screenshotDir = path.join(process.cwd(), '.agent-test-screenshots');\n\n    // Ensure screenshot directory exists\n    if (!fs.existsSync(this.screenshotDir)) {\n      fs.mkdirSync(this.screenshotDir, { recursive: true });\n    }\n\n    // Log detected environment\n    console.log(` Agent Bridge initialized (environment: ${this.environment})`);\n  }\n\n  /**\n   * Get the detected agent environment\n   */\n  getEnvironment(): AgentEnvironment {\n    return this.environment;\n  }\n\n  /**\n   * Save screenshot and return path\n   */\n  private saveScreenshot(base64Data: string): string {\n    this.requestCount++;\n    const filename = `screenshot_${Date.now()}_${this.requestCount}.png`;\n    const filepath = path.join(this.screenshotDir, filename);\n\n    // Remove data URL prefix if present\n    const cleanData = base64Data.replace(/^data:image\\/\\w+;base64,/, '');\n    fs.writeFileSync(filepath, Buffer.from(cleanData, 'base64'));\n\n    return filepath;\n  }\n\n  /**\n   * Find element using Cursor's Claude\n   */\n  async findElement(request: VLMFindRequest): Promise<VLMFindResponse> {\n    const screenshotPath = this.saveScreenshot(request.screenshot);\n\n    // Create analysis request file for Agent to process\n    const analysisRequest = {\n      type: 'find_element',\n      screenshot: screenshotPath,\n      description: request.description,\n      context: request.context,\n      timestamp: new Date().toISOString(),\n    };\n\n    const requestFile = path.join(\n      this.screenshotDir,\n      `request_${Date.now()}.json`\n    );\n    fs.writeFileSync(requestFile, JSON.stringify(analysisRequest, null, 2));\n\n    // Output for Agent processing\n    console.log('\\n');\n    console.log('  CURSOR VLM REQUEST: Find Element                     ');\n    console.log('');\n    console.log(` Screenshot: ${screenshotPath}`);\n    console.log(` Target: \"${request.description}\"`);\n    if (request.context) {\n      console.log(` Context: ${request.context}`);\n    }\n    console.log('');\n    console.log(' Please analyze the screenshot and provide coordinates   ');\n    console.log(' or set CURSOR_VLM_RESPONSE env var with JSON response   ');\n    console.log('\\n');\n\n    // Check for pre-set response (for automated scenarios)\n    if (process.env.CURSOR_VLM_RESPONSE) {\n      try {\n        const response = JSON.parse(process.env.CURSOR_VLM_RESPONSE);\n        delete process.env.CURSOR_VLM_RESPONSE;\n        return response as VLMFindResponse;\n      } catch {\n        // Continue with default response\n      }\n    }\n\n    // Check for response file\n    const responseFile = requestFile.replace('request_', 'response_');\n    if (fs.existsSync(responseFile)) {\n      const response = JSON.parse(fs.readFileSync(responseFile, 'utf-8'));\n      return response as VLMFindResponse;\n    }\n\n    // Default: return not found (Agent should intercept and handle)\n    return {\n      confidence: 0,\n      reasoning: 'Waiting for Cursor Agent to analyze screenshot',\n      notFound: true,\n      alternative: 'Use MCP browser tools or provide manual coordinates',\n    };\n  }\n\n  /**\n   * Get next action using Cursor's Claude\n   */\n  async getNextAction(request: VLMActionRequest): Promise<VLMActionResponse> {\n    const screenshotPath = this.saveScreenshot(request.screenshot);\n\n    // Output structured request\n    console.log('\\n');\n    console.log('  CURSOR VLM REQUEST: Get Next Action                  ');\n    console.log('');\n    console.log(` Screenshot: ${screenshotPath}`);\n    console.log(` Instruction: \"${request.instruction}\"`);\n    console.log(' Available Actions:');\n    request.actionSpaces.slice(0, 5).forEach((action) => {\n      console.log(`   - ${action}`);\n    });\n    console.log('\\n');\n\n    // Check for pre-set response\n    if (process.env.CURSOR_VLM_RESPONSE) {\n      try {\n        const response = JSON.parse(process.env.CURSOR_VLM_RESPONSE);\n        delete process.env.CURSOR_VLM_RESPONSE;\n        return response as VLMActionResponse;\n      } catch {\n        // Continue\n      }\n    }\n\n    return {\n      actionType: 'wait',\n      actionParams: {},\n      thought: 'Waiting for Cursor Agent to provide action',\n      finished: false,\n    };\n  }\n\n  /**\n   * Visual assertion using Cursor's Claude\n   */\n  async assertVisual(request: VLMAssertRequest): Promise<VLMAssertResponse> {\n    const screenshotPath = this.saveScreenshot(request.screenshot);\n\n    // Output structured request\n    console.log('\\n');\n    console.log('  CURSOR VLM REQUEST: Visual Assertion                 ');\n    console.log('');\n    console.log(` Screenshot: ${screenshotPath}`);\n    console.log(` Assertion: \"${request.assertion}\"`);\n    if (request.expected) {\n      console.log(` Expected: ${request.expected}`);\n    }\n    console.log('');\n    console.log(' Please verify the assertion and respond with:           ');\n    console.log(' { \"passed\": true/false, \"reasoning\": \"...\", \"actual\": \"...\" }');\n    console.log('\\n');\n\n    // Check for pre-set response\n    if (process.env.CURSOR_VLM_RESPONSE) {\n      try {\n        const response = JSON.parse(process.env.CURSOR_VLM_RESPONSE);\n        delete process.env.CURSOR_VLM_RESPONSE;\n        return response as VLMAssertResponse;\n      } catch {\n        // Continue\n      }\n    }\n\n    // For automated testing, try to use simple heuristics\n    // In real usage, the Cursor Agent should intercept and handle\n    return {\n      passed: false,\n      reasoning: 'Waiting for Cursor Agent to verify assertion',\n      actual: 'Pending verification',\n    };\n  }\n\n  /**\n   * Get cost summary (Cursor mode is free - uses existing subscription)\n   */\n  getCostSummary(): CostSummary {\n    return {\n      totalCost: 0, // Cursor mode is free (uses existing subscription)\n      totalCalls: this.requestCount,\n      byProvider: { cursor: 0 },\n      byOperation: { find: 0, action: 0, assert: 0 },\n      entries: [],\n    };\n  }\n}\n\n/**\n * Create an automated Cursor VLM handler for use in Agent context\n *\n * This function can be called by the Cursor Agent to process VLM requests\n * that were output by the test framework.\n */\nexport async function handleCursorVLMRequest(\n  requestPath: string,\n  analyzeImage: (imagePath: string, prompt: string) => Promise<string>\n): Promise<void> {\n  if (!fs.existsSync(requestPath)) {\n    throw new Error(`Request file not found: ${requestPath}`);\n  }\n\n  const request = JSON.parse(fs.readFileSync(requestPath, 'utf-8'));\n  const responsePath = requestPath.replace('request_', 'response_');\n\n  let response: VLMFindResponse | VLMActionResponse | VLMAssertResponse;\n\n  switch (request.type) {\n    case 'find_element': {\n      const prompt = `Look at this screenshot and find the element described as: \"${request.description}\"\n${request.context ? `Context: ${request.context}` : ''}\n\nReturn a JSON object with:\n- coordinates: { x: number, y: number } - the center point of the element\n- confidence: number (0-1) - how confident you are\n- reasoning: string - explanation\n- notFound: boolean - true if element cannot be found`;\n\n      const result = await analyzeImage(request.screenshot, prompt);\n      response = JSON.parse(result) as VLMFindResponse;\n      break;\n    }\n\n    case 'get_action': {\n      const prompt = `Look at this screenshot and determine the next action for: \"${request.instruction}\"\n\nAvailable actions: ${request.actionSpaces?.join(', ')}\n\nReturn a JSON object with:\n- actionType: string\n- actionParams: object\n- thought: string\n- finished: boolean`;\n\n      const result = await analyzeImage(request.screenshot, prompt);\n      response = JSON.parse(result) as VLMActionResponse;\n      break;\n    }\n\n    case 'assert_visual': {\n      const prompt = `Look at this screenshot and verify: \"${request.assertion}\"\n${request.expected ? `Expected: ${request.expected}` : ''}\n\nReturn a JSON object with:\n- passed: boolean\n- reasoning: string\n- actual: string (what you actually observed)`;\n\n      const result = await analyzeImage(request.screenshot, prompt);\n      response = JSON.parse(result) as VLMAssertResponse;\n      break;\n    }\n\n    default:\n      throw new Error(`Unknown request type: ${request.type}`);\n  }\n\n  fs.writeFileSync(responsePath, JSON.stringify(response, null, 2));\n  console.log(` Response written to: ${responsePath}`);\n}\n","/**\n * @flowsight/desktop-test - VLM Client\n *\n * Unified client for Vision-Language Models (Claude, GPT-4V, Doubao, etc.)\n * Used for visual element finding and intelligent UI understanding.\n */\n\nimport {\n  VLMProvider,\n  type VLMConfig,\n  type VLMFindRequest,\n  type VLMFindResponse,\n  type VLMActionRequest,\n  type VLMActionResponse,\n  type VLMAssertRequest,\n  type VLMAssertResponse,\n  type CostSummary,\n  type VLMClientInterface,\n} from '../types.js';\n\nimport { CostTracker } from './cost-tracker.js';\nimport { CursorBridge, shouldUseAgentMode, detectAgentEnvironment } from './cursor-bridge.js';\n\n/**\n * Default models for each provider\n */\nconst DEFAULT_MODELS: Record<string, string> = {\n  [VLMProvider.ANTHROPIC]: 'claude-sonnet-4-20250514',\n  [VLMProvider.OPENAI]: 'gpt-4o',\n  [VLMProvider.VOLCENGINE]: 'doubao-1-5-vision-pro',\n  [VLMProvider.DOUBAO]: 'doubao-1-5-vision-pro',\n  [VLMProvider.CURSOR]: 'claude-opus-4-5', // Uses Cursor's built-in model\n};\n\n/**\n * VLM Client - provides unified access to various VLM providers\n */\nexport class VLMClient implements VLMClientInterface {\n  private config: VLMConfig;\n  private provider: VLMProvider;\n  private model: string;\n  private costTracker: CostTracker;\n  private cursorBridge?: CursorBridge;\n\n  constructor(config: VLMConfig) {\n    this.config = config;\n    this.provider = this.normalizeProvider(config.provider);\n    this.model = config.model || DEFAULT_MODELS[this.provider] || 'gpt-4o';\n    this.costTracker = new CostTracker();\n\n    // Auto-detect agent environment if no API key provided\n    const shouldAutoUseAgent = \n      this.provider === VLMProvider.CURSOR ||\n      (shouldUseAgentMode() && !config.apiKey && !process.env.ANTHROPIC_API_KEY && !process.env.OPENAI_API_KEY);\n\n    if (shouldAutoUseAgent) {\n      this.cursorBridge = new CursorBridge(config);\n      this.provider = VLMProvider.CURSOR;\n      \n      const env = detectAgentEnvironment();\n      if (env && env !== 'cursor') {\n        console.log(` Auto-detected ${env} environment, using Agent mode`);\n      }\n    }\n  }\n\n  /**\n   * Check if using Agent mode\n   */\n  isUsingAgentMode(): boolean {\n    return this.cursorBridge !== undefined;\n  }\n\n  /**\n   * Get detected agent environment\n   */\n  getAgentEnvironment(): string | null {\n    return this.cursorBridge?.getEnvironment() || null;\n  }\n\n  private normalizeProvider(provider: VLMProvider | string): VLMProvider {\n    if (typeof provider === 'string') {\n      const normalized = provider.toLowerCase();\n      if (normalized === 'anthropic' || normalized === 'claude') {\n        return VLMProvider.ANTHROPIC;\n      }\n      if (normalized === 'openai' || normalized === 'gpt') {\n        return VLMProvider.OPENAI;\n      }\n      if (normalized === 'volcengine' || normalized === 'volc') {\n        return VLMProvider.VOLCENGINE;\n      }\n      if (normalized === 'doubao') {\n        return VLMProvider.DOUBAO;\n      }\n      if (normalized === 'cursor') {\n        return VLMProvider.CURSOR;\n      }\n      // 'agent' or 'auto' - auto-detect any Claude environment\n      if (normalized === 'agent' || normalized === 'auto') {\n        return VLMProvider.CURSOR; // Will use CursorBridge for all agent environments\n      }\n      return VLMProvider.CUSTOM;\n    }\n    return provider;\n  }\n\n  /**\n   * Find element by visual description\n   */\n  async findElement(request: VLMFindRequest): Promise<VLMFindResponse> {\n    // Use Cursor bridge if configured\n    if (this.cursorBridge) {\n      return this.cursorBridge.findElement(request);\n    }\n\n    const systemPrompt = `You are a GUI automation assistant. Your task is to find UI elements in screenshots.\n\nGiven a screenshot and an element description, you need to:\n1. Locate the described element in the screenshot\n2. Return the center coordinates (x, y) of the element\n3. Provide your confidence level (0-1)\n4. Explain your reasoning\n\nIf the element cannot be found, set notFound to true and suggest alternatives.\n\nIMPORTANT: Return coordinates in the format that can be used for clicking.\nThe screenshot dimensions will be provided.`;\n\n    const userPrompt = `Find the following element in the screenshot:\n\"${request.description}\"\n\n${request.context ? `Context: ${request.context}` : ''}\n\nReturn a JSON object with:\n- coordinates: { x: number, y: number } or null if not found\n- confidence: number (0-1)\n- reasoning: string\n- notFound: boolean\n- alternative: string (if not found, suggest what similar element exists)`;\n\n    const response = await this.callVLM(systemPrompt, userPrompt, request.screenshot, 'find');\n\n    try {\n      const parsed = this.parseJSON(response);\n      const coordinates = parsed.coordinates as { x: number; y: number } | undefined;\n      return {\n        coordinates,\n        confidence: (parsed.confidence as number) || 0,\n        reasoning: (parsed.reasoning as string) || '',\n        notFound: (parsed.notFound as boolean) || !coordinates,\n        alternative: parsed.alternative as string | undefined,\n      };\n    } catch {\n      return {\n        confidence: 0,\n        reasoning: 'Failed to parse VLM response',\n        notFound: true,\n      };\n    }\n  }\n\n  /**\n   * Get next action to perform\n   */\n  async getNextAction(request: VLMActionRequest): Promise<VLMActionResponse> {\n    // Use Cursor bridge if configured\n    if (this.cursorBridge) {\n      return this.cursorBridge.getNextAction(request);\n    }\n\n    const systemPrompt = `You are a GUI automation agent. Your task is to control a desktop application to complete user instructions.\n\nAvailable actions:\n${request.actionSpaces.join('\\n')}\n\nFor each step:\n1. Analyze the current screenshot\n2. Decide the best action to take\n3. Return the action with parameters\n\nWhen the task is complete, return finished: true.\n\nIMPORTANT: \n- Think step by step\n- Only perform one action at a time\n- Be precise with coordinates`;\n\n    const userPrompt = `Instruction: \"${request.instruction}\"\n\nBased on the current screenshot, what action should be taken next?\n\nReturn a JSON object with:\n- actionType: string (one of the available actions)\n- actionParams: object (parameters for the action)\n- thought: string (your reasoning)\n- reflection: string (any observations)\n- finished: boolean (true if task is complete)`;\n\n    const response = await this.callVLM(systemPrompt, userPrompt, request.screenshot, 'action');\n\n    try {\n      const parsed = this.parseJSON(response);\n      return {\n        actionType: (parsed.actionType as string) || 'wait',\n        actionParams: (parsed.actionParams as Record<string, unknown>) || {},\n        thought: (parsed.thought as string) || '',\n        reflection: parsed.reflection as string | undefined,\n        finished: (parsed.finished as boolean) || false,\n      };\n    } catch {\n      return {\n        actionType: 'wait',\n        actionParams: {},\n        thought: 'Failed to parse VLM response',\n        finished: false,\n      };\n    }\n  }\n\n  /**\n   * Perform visual assertion\n   */\n  async assertVisual(request: VLMAssertRequest): Promise<VLMAssertResponse> {\n    // Use Cursor bridge if configured\n    if (this.cursorBridge) {\n      return this.cursorBridge.assertVisual(request);\n    }\n\n    const systemPrompt = `You are a QA automation assistant. Your task is to verify UI states and conditions.\n\nGiven a screenshot and an assertion, you need to:\n1. Analyze the screenshot carefully\n2. Determine if the assertion is true or false\n3. Provide detailed reasoning\n4. If the assertion fails, suggest how to fix it`;\n\n    const userPrompt = `Assertion: \"${request.assertion}\"\n\n${request.expected ? `Expected: ${request.expected}` : ''}\n\nAnalyze the screenshot and verify the assertion.\n\nReturn a JSON object with:\n- passed: boolean\n- reasoning: string (detailed explanation)\n- actual: string (what you actually observed)\n- suggestions: string[] (if failed, how to fix)`;\n\n    const response = await this.callVLM(systemPrompt, userPrompt, request.screenshot, 'assert');\n\n    try {\n      const parsed = this.parseJSON(response);\n      return {\n        passed: (parsed.passed as boolean) || false,\n        reasoning: (parsed.reasoning as string) || '',\n        actual: (parsed.actual as string) || '',\n        suggestions: parsed.suggestions as string[] | undefined,\n      };\n    } catch {\n      return {\n        passed: false,\n        reasoning: 'Failed to parse VLM response',\n        actual: 'Unknown',\n      };\n    }\n  }\n\n  /**\n   * Compare two screenshots and find differences (from Python framework)\n   * Note: Currently uses single image analysis. For true comparison, \n   * both images should be sent to the VLM.\n   */\n  async compareScreenshots(\n    screenshot1: string,\n    _screenshot2: string,\n    context?: string\n  ): Promise<{\n    differences: Array<{ type: string; description: string; severity: string }>;\n    summary: string;\n    similarityScore: number;\n  }> {\n    const systemPrompt = `You are a UI testing assistant. Compare two screenshots and identify all differences.`;\n\n    const userPrompt = `Compare these two screenshots and identify differences.\n${context ? `Context: ${context}` : ''}\n\nReturn a JSON object with:\n- differences: array of { type: \"added|removed|changed|moved\", description: string, severity: \"high|medium|low\" }\n- summary: string (overall summary)\n- similarityScore: number (0-1, how similar they are)`;\n\n    // For this we need to send both images - simplified version\n    const response = await this.callVLM(systemPrompt, userPrompt, screenshot1, 'assert');\n\n    try {\n      const parsed = this.parseJSON(response);\n      return {\n        differences: (parsed.differences as Array<{ type: string; description: string; severity: string }>) || [],\n        summary: (parsed.summary as string) || '',\n        similarityScore: (parsed.similarityScore as number) || 0,\n      };\n    } catch {\n      return {\n        differences: [],\n        summary: 'Failed to parse response',\n        similarityScore: 0,\n      };\n    }\n  }\n\n  /**\n   * Detect visual issues in screenshot (from Python framework)\n   */\n  async detectVisualIssues(screenshot: string): Promise<Array<{\n    type: string;\n    severity: string;\n    description: string;\n    location?: { x: number; y: number; width: number; height: number };\n    suggestion?: string;\n  }>> {\n    const systemPrompt = `You are a UI quality assurance expert. Detect visual issues and UI defects.`;\n\n    const userPrompt = `Analyze this screenshot for visual issues and UI defects.\n\nCheck for:\n1. Text truncation or overflow\n2. Element overlap\n3. Alignment issues\n4. Color contrast problems\n5. Blurry or distorted elements\n6. Inconsistent spacing\n7. Layout errors\n\nReturn a JSON object with:\n{\n  \"issues\": [\n    {\n      \"type\": \"text_truncation|overlap|misalignment|contrast|blur|spacing|layout\",\n      \"severity\": \"critical|high|medium|low\",\n      \"description\": \"description of the issue\",\n      \"location\": {\"x\": 100, \"y\": 200, \"width\": 50, \"height\": 20},\n      \"suggestion\": \"how to fix it\"\n    }\n  ]\n}`;\n\n    const response = await this.callVLM(systemPrompt, userPrompt, screenshot, 'assert');\n\n    try {\n      const parsed = this.parseJSON(response);\n      return (parsed.issues as Array<{\n        type: string;\n        severity: string;\n        description: string;\n        location?: { x: number; y: number; width: number; height: number };\n        suggestion?: string;\n      }>) || [];\n    } catch {\n      return [];\n    }\n  }\n\n  /**\n   * Analyze IDE screenshot with specialized prompts (from Python framework)\n   */\n  async analyzeIDEScreenshot(screenshot: string): Promise<{\n    elements: Array<{\n      elementType: string;\n      text?: string;\n      bounds: { x: number; y: number; width: number; height: number };\n      attributes?: Record<string, unknown>;\n    }>;\n    layoutStructure: {\n      type: string;\n      sidebarWidth?: number;\n      editorArea?: { x: number; y: number; width: number; height: number };\n      panels?: string[];\n    };\n    colorScheme: 'dark' | 'light';\n    issues: string[];\n  }> {\n    const systemPrompt = `You are an IDE interface analysis expert. Analyze IDE screenshots to identify all UI elements.\n\nIDE common element types:\n- menu: Menu bar (File, Edit, View, etc.)\n- sidebar: Sidebar (file tree, outline, etc.)\n- editor: Code editor area\n- tab: Tab pages\n- toolbar: Toolbar\n- statusbar: Status bar\n- panel: Panels (terminal, output, etc.)\n- button: Buttons (run, debug, settings, etc.)\n- icon: Icons\n- input: Input fields, search boxes\n- dropdown: Dropdown menus\n- tooltip: Tooltips`;\n\n    const userPrompt = `Analyze this IDE screenshot and identify all interface elements.\n\nReturn a JSON object with:\n{\n  \"elements\": [\n    {\n      \"elementType\": \"type\",\n      \"text\": \"text content\",\n      \"bounds\": {\"x\": 0, \"y\": 0, \"width\": 100, \"height\": 30},\n      \"attributes\": {\"active\": true, \"collapsed\": false}\n    }\n  ],\n  \"layoutStructure\": {\n    \"type\": \"three-column|two-column|single-column\",\n    \"sidebarWidth\": 250,\n    \"editorArea\": {\"x\": 250, \"y\": 50, \"width\": 800, \"height\": 600},\n    \"panels\": [\"terminal\", \"output\"]\n  },\n  \"colorScheme\": \"dark|light\",\n  \"issues\": []\n}`;\n\n    const response = await this.callVLM(systemPrompt, userPrompt, screenshot, 'find');\n\n    try {\n      const parsed = this.parseJSON(response);\n      return {\n        elements: (parsed.elements as Array<{\n          elementType: string;\n          text?: string;\n          bounds: { x: number; y: number; width: number; height: number };\n          attributes?: Record<string, unknown>;\n        }>) || [],\n        layoutStructure: (parsed.layoutStructure as {\n          type: string;\n          sidebarWidth?: number;\n          editorArea?: { x: number; y: number; width: number; height: number };\n          panels?: string[];\n        }) || { type: 'unknown' },\n        colorScheme: ((parsed.colorScheme as string) === 'light' ? 'light' : 'dark'),\n        issues: (parsed.issues as string[]) || [],\n      };\n    } catch {\n      return {\n        elements: [],\n        layoutStructure: { type: 'unknown' },\n        colorScheme: 'dark',\n        issues: ['Failed to analyze screenshot'],\n      };\n    }\n  }\n\n  /**\n   * Get cost summary\n   */\n  getCostSummary(): CostSummary {\n    // Cursor mode is free (uses existing subscription)\n    if (this.cursorBridge) {\n      return this.cursorBridge.getCostSummary();\n    }\n    return this.costTracker.getSummary();\n  }\n\n  /**\n   * Reset cost tracking\n   */\n  resetCostTracking(): void {\n    this.costTracker.reset();\n  }\n\n  /**\n   * Call the VLM API\n   */\n  private async callVLM(\n    systemPrompt: string,\n    userPrompt: string,\n    screenshot: string,\n    operation: 'find' | 'action' | 'assert' | 'analyze'\n  ): Promise<string> {\n    let response: string;\n    let inputTokens = 0;\n    let outputTokens = 0;\n\n    switch (this.provider) {\n      case VLMProvider.ANTHROPIC:\n        ({ response, inputTokens, outputTokens } = await this.callAnthropic(systemPrompt, userPrompt, screenshot));\n        break;\n      case VLMProvider.OPENAI:\n        ({ response, inputTokens, outputTokens } = await this.callOpenAI(systemPrompt, userPrompt, screenshot));\n        break;\n      case VLMProvider.VOLCENGINE:\n      case VLMProvider.DOUBAO:\n        ({ response, inputTokens, outputTokens } = await this.callVolcengine(systemPrompt, userPrompt, screenshot));\n        break;\n      case VLMProvider.CUSTOM:\n        ({ response, inputTokens, outputTokens } = await this.callCustom(systemPrompt, userPrompt, screenshot));\n        break;\n      default:\n        throw new Error(`Unsupported VLM provider: ${this.provider}`);\n    }\n\n    // Track cost\n    if (this.config.trackCost !== false) {\n      this.costTracker.track({\n        provider: this.provider,\n        model: this.model,\n        inputTokens,\n        outputTokens,\n        images: 1,\n        operation,\n      });\n    }\n\n    return response;\n  }\n\n  /**\n   * Call Anthropic Claude API\n   */\n  private async callAnthropic(\n    systemPrompt: string,\n    userPrompt: string,\n    screenshot: string\n  ): Promise<{ response: string; inputTokens: number; outputTokens: number }> {\n    const apiKey = this.config.apiKey || process.env.ANTHROPIC_API_KEY;\n    if (!apiKey) {\n      throw new Error('Anthropic API key not provided. Set ANTHROPIC_API_KEY or pass apiKey in config.');\n    }\n\n    const fetchResponse = await fetch('https://api.anthropic.com/v1/messages', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'x-api-key': apiKey,\n        'anthropic-version': '2023-06-01',\n      },\n      body: JSON.stringify({\n        model: this.model,\n        max_tokens: this.config.maxTokens || 4096,\n        system: systemPrompt,\n        messages: [\n          {\n            role: 'user',\n            content: [\n              {\n                type: 'image',\n                source: {\n                  type: 'base64',\n                  media_type: 'image/jpeg',\n                  data: screenshot,\n                },\n              },\n              {\n                type: 'text',\n                text: userPrompt,\n              },\n            ],\n          },\n        ],\n      }),\n    });\n\n    if (!fetchResponse.ok) {\n      const error = await fetchResponse.text();\n      throw new Error(`Anthropic API error: ${error}`);\n    }\n\n    const data = await fetchResponse.json() as {\n      content: Array<{ text: string }>;\n      usage?: { input_tokens?: number; output_tokens?: number };\n    };\n    return {\n      response: data.content[0].text,\n      inputTokens: data.usage?.input_tokens || 1000,\n      outputTokens: data.usage?.output_tokens || 500,\n    };\n  }\n\n  /**\n   * Call OpenAI GPT-4V API\n   */\n  private async callOpenAI(\n    systemPrompt: string,\n    userPrompt: string,\n    screenshot: string\n  ): Promise<{ response: string; inputTokens: number; outputTokens: number }> {\n    const apiKey = this.config.apiKey || process.env.OPENAI_API_KEY;\n    if (!apiKey) {\n      throw new Error('OpenAI API key not provided. Set OPENAI_API_KEY or pass apiKey in config.');\n    }\n\n    const baseURL = this.config.baseURL || 'https://api.openai.com/v1';\n\n    const fetchResponse = await fetch(`${baseURL}/chat/completions`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${apiKey}`,\n      },\n      body: JSON.stringify({\n        model: this.model,\n        max_tokens: this.config.maxTokens || 4096,\n        messages: [\n          {\n            role: 'system',\n            content: systemPrompt,\n          },\n          {\n            role: 'user',\n            content: [\n              {\n                type: 'image_url',\n                image_url: {\n                  url: `data:image/jpeg;base64,${screenshot}`,\n                },\n              },\n              {\n                type: 'text',\n                text: userPrompt,\n              },\n            ],\n          },\n        ],\n      }),\n    });\n\n    if (!fetchResponse.ok) {\n      const error = await fetchResponse.text();\n      throw new Error(`OpenAI API error: ${error}`);\n    }\n\n    const data = await fetchResponse.json() as {\n      choices: Array<{ message: { content: string } }>;\n      usage?: { prompt_tokens?: number; completion_tokens?: number };\n    };\n    return {\n      response: data.choices[0].message.content,\n      inputTokens: data.usage?.prompt_tokens || 1000,\n      outputTokens: data.usage?.completion_tokens || 500,\n    };\n  }\n\n  /**\n   * Call Volcengine (Doubao) API\n   */\n  private async callVolcengine(\n    systemPrompt: string,\n    userPrompt: string,\n    screenshot: string\n  ): Promise<{ response: string; inputTokens: number; outputTokens: number }> {\n    const apiKey = this.config.apiKey || process.env.VOLCENGINE_API_KEY || process.env.DOUBAO_API_KEY;\n    if (!apiKey) {\n      throw new Error('Volcengine API key not provided. Set VOLCENGINE_API_KEY or pass apiKey in config.');\n    }\n\n    const baseURL = this.config.baseURL || 'https://ark.cn-beijing.volces.com/api/v3';\n\n    const fetchResponse = await fetch(`${baseURL}/chat/completions`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${apiKey}`,\n      },\n      body: JSON.stringify({\n        model: this.model,\n        max_tokens: this.config.maxTokens || 4096,\n        messages: [\n          {\n            role: 'system',\n            content: systemPrompt,\n          },\n          {\n            role: 'user',\n            content: [\n              {\n                type: 'image_url',\n                image_url: {\n                  url: `data:image/jpeg;base64,${screenshot}`,\n                },\n              },\n              {\n                type: 'text',\n                text: userPrompt,\n              },\n            ],\n          },\n        ],\n      }),\n    });\n\n    if (!fetchResponse.ok) {\n      const error = await fetchResponse.text();\n      throw new Error(`Volcengine API error: ${error}`);\n    }\n\n    const data = await fetchResponse.json() as {\n      choices: Array<{ message: { content: string } }>;\n      usage?: { prompt_tokens?: number; completion_tokens?: number };\n    };\n    return {\n      response: data.choices[0].message.content,\n      inputTokens: data.usage?.prompt_tokens || 1000,\n      outputTokens: data.usage?.completion_tokens || 500,\n    };\n  }\n\n  /**\n   * Call custom API (OpenAI-compatible)\n   */\n  private async callCustom(\n    systemPrompt: string,\n    userPrompt: string,\n    screenshot: string\n  ): Promise<{ response: string; inputTokens: number; outputTokens: number }> {\n    if (!this.config.baseURL) {\n      throw new Error('Custom provider requires baseURL');\n    }\n\n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json',\n    };\n\n    if (this.config.apiKey) {\n      headers['Authorization'] = `Bearer ${this.config.apiKey}`;\n    }\n\n    const fetchResponse = await fetch(`${this.config.baseURL}/chat/completions`, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify({\n        model: this.model,\n        max_tokens: this.config.maxTokens || 4096,\n        messages: [\n          {\n            role: 'system',\n            content: systemPrompt,\n          },\n          {\n            role: 'user',\n            content: [\n              {\n                type: 'image_url',\n                image_url: {\n                  url: `data:image/jpeg;base64,${screenshot}`,\n                },\n              },\n              {\n                type: 'text',\n                text: userPrompt,\n              },\n            ],\n          },\n        ],\n      }),\n    });\n\n    if (!fetchResponse.ok) {\n      const error = await fetchResponse.text();\n      throw new Error(`Custom API error: ${error}`);\n    }\n\n    const data = await fetchResponse.json() as {\n      choices: Array<{ message: { content: string } }>;\n      usage?: { prompt_tokens?: number; completion_tokens?: number };\n    };\n    return {\n      response: data.choices[0].message.content,\n      inputTokens: data.usage?.prompt_tokens || 1000,\n      outputTokens: data.usage?.completion_tokens || 500,\n    };\n  }\n\n  /**\n   * Parse JSON from VLM response (handles markdown code blocks)\n   */\n  private parseJSON(text: string): Record<string, unknown> {\n    // Try direct parse first\n    try {\n      return JSON.parse(text);\n    } catch {\n      // Try extracting from markdown code block\n      const jsonMatch = text.match(/```(?:json)?\\s*([\\s\\S]*?)```/);\n      if (jsonMatch) {\n        return JSON.parse(jsonMatch[1].trim());\n      }\n\n      // Try finding JSON object in text\n      const objectMatch = text.match(/\\{[\\s\\S]*\\}/);\n      if (objectMatch) {\n        return JSON.parse(objectMatch[0]);\n      }\n\n      throw new Error('Could not parse JSON from response');\n    }\n  }\n}\n","/**\n * @flowsight/desktop-test - Core DesktopTest Class\n *\n * The main entry point for the hybrid desktop testing framework.\n * Implements smart fallback chain: DOM  Accessibility  VLM\n */\n\nimport {\n  TestMode,\n  LocatorStrategy,\n  ActionStatus,\n  type DesktopTestConfig,\n  type SnapshotResult,\n  type ElementRef,\n  type ElementLocator,\n  type ClickOptions,\n  type TypeOptions,\n  type ScrollOptions,\n  type WaitOptions,\n  type ScreenshotOptions,\n  type ActionResult,\n  type BoundingBox,\n  type DesktopTestInstance,\n  type CostSummary,\n  type CDPAdapterInterface,\n  type PythonBridgeInterface,\n  type NutJSAdapterInterface,\n  type VLMClientInterface,\n} from '../types.js';\n\n/**\n * Default configuration values\n */\nconst DEFAULT_CONFIG: Required<DesktopTestConfig> = {\n  mode: TestMode.HYBRID,\n  cdp: { endpoint: 9222, timeout: 30000 },\n  vlm: undefined as unknown as Required<DesktopTestConfig>['vlm'],\n  pythonBridge: { debug: false },\n  nutjs: { keyboard: true, mouse: true, keyDelay: 50, mouseSpeed: 500 },\n  timeout: 30000,\n  debug: false,\n  screenshotDir: './screenshots',\n  videoDir: './videos',\n  session: 'default',\n};\n\n/**\n * Main Desktop Test class - implements the unified API with hybrid mode\n */\nexport class DesktopTest implements DesktopTestInstance {\n  private config: Required<DesktopTestConfig>;\n  private cdpAdapter: CDPAdapterInterface | null = null;\n  private pythonBridge: PythonBridgeInterface | null = null;\n  private nutjsAdapter: NutJSAdapterInterface | null = null;\n  private vlmClient: VLMClientInterface | null = null;\n  private connected: boolean = false;\n  private lastSnapshot: SnapshotResult | null = null;\n\n  constructor(config: DesktopTestConfig = {}) {\n    this.config = this.mergeConfig(config);\n  }\n\n  private mergeConfig(config: DesktopTestConfig): Required<DesktopTestConfig> {\n    return {\n      ...DEFAULT_CONFIG,\n      ...config,\n      cdp: { ...DEFAULT_CONFIG.cdp, ...config.cdp },\n      pythonBridge: { ...DEFAULT_CONFIG.pythonBridge, ...config.pythonBridge },\n      nutjs: { ...DEFAULT_CONFIG.nutjs, ...config.nutjs },\n    };\n  }\n\n  // ============================================================================\n  // Connection Management\n  // ============================================================================\n\n  async connect(): Promise<void> {\n    if (this.connected) return;\n\n    this.log('Connecting to desktop application...');\n\n    // Initialize CDP adapter for WebView control\n    if (this.config.cdp) {\n      const { CDPAdapter } = await import('../adapters/cdp-adapter.js');\n      this.cdpAdapter = new CDPAdapter(this.config.cdp);\n      await this.cdpAdapter.initialize();\n      await this.cdpAdapter.connect();\n      this.log('CDP adapter connected');\n    }\n\n    // Initialize Python bridge for native desktop control\n    if (this.config.pythonBridge) {\n      try {\n        const { PythonBridge } = await import('../adapters/python-bridge.js');\n        this.pythonBridge = new PythonBridge(this.config.pythonBridge);\n        await this.pythonBridge.initialize();\n        this.log('Python bridge initialized');\n      } catch (e) {\n        this.log('Python bridge not available, using NutJS fallback');\n      }\n    }\n\n    // Initialize NutJS adapter as fallback for native control\n    if (this.config.nutjs && !this.pythonBridge?.isAvailable()) {\n      try {\n        const { NutJSAdapter } = await import('../adapters/nutjs-adapter.js');\n        this.nutjsAdapter = new NutJSAdapter(this.config.nutjs);\n        await this.nutjsAdapter.initialize();\n        this.log('NutJS adapter initialized');\n      } catch (e) {\n        this.log('NutJS adapter not available');\n      }\n    }\n\n    // Initialize VLM client if in visual/hybrid mode\n    if (this.config.vlm && this.getMode() !== TestMode.DETERMINISTIC) {\n      const { VLMClient } = await import('../vlm/client.js');\n      this.vlmClient = new VLMClient(this.config.vlm);\n      this.log('VLM client initialized');\n    }\n\n    this.connected = true;\n    this.log('Connected successfully');\n  }\n\n  async disconnect(): Promise<void> {\n    if (!this.connected) return;\n\n    if (this.cdpAdapter) {\n      await this.cdpAdapter.cleanup();\n      this.cdpAdapter = null;\n    }\n\n    if (this.pythonBridge) {\n      await this.pythonBridge.cleanup();\n      this.pythonBridge = null;\n    }\n\n    if (this.nutjsAdapter) {\n      await this.nutjsAdapter.cleanup();\n      this.nutjsAdapter = null;\n    }\n\n    this.vlmClient = null;\n    this.connected = false;\n    this.log('Disconnected');\n  }\n\n  isConnected(): boolean {\n    return this.connected;\n  }\n\n  private getMode(): TestMode {\n    const mode = this.config.mode;\n    if (typeof mode === 'string') {\n      return mode as TestMode;\n    }\n    return mode;\n  }\n\n  // ============================================================================\n  // Snapshot\n  // ============================================================================\n\n  async snapshot(options: { interactive?: boolean } = {}): Promise<SnapshotResult> {\n    this.ensureConnected();\n\n    if (!this.cdpAdapter) {\n      throw new Error('CDP adapter not available for snapshot');\n    }\n\n    const result = await this.cdpAdapter.getSnapshot({\n      interactive: options.interactive ?? true,\n      includeScreenshot: this.getMode() !== TestMode.DETERMINISTIC,\n    });\n\n    this.lastSnapshot = result;\n    return result;\n  }\n\n  // ============================================================================\n  // Element Finding - Core Hybrid Mode Implementation\n  // ============================================================================\n\n  /**\n   * Find element using hybrid fallback chain:\n   * Level 1: Refs from snapshot (free, fast)\n   * Level 2: CSS/XPath via CDP (free, fast)\n   * Level 3: Visual AI via VLM (paid, intelligent)\n   */\n  async find(locator: string | ElementLocator): Promise<ElementRef | null> {\n    this.ensureConnected();\n\n    const normalized = this.normalizeLocator(locator);\n    const mode = this.getMode();\n\n    // Level 1 & 2: Try deterministic approach first (unless in VISUAL mode)\n    if (mode !== TestMode.VISUAL) {\n      const element = await this.findDeterministic(normalized);\n      if (element) {\n        this.log(`Found element via deterministic: ${normalized.value}`);\n        return element;\n      }\n    }\n\n    // Level 3: Fall back to VLM if in hybrid/visual mode\n    if (mode !== TestMode.DETERMINISTIC && this.vlmClient) {\n      this.log(`Falling back to VLM for: ${normalized.value}`);\n      return this.findVisual(normalized);\n    }\n\n    return null;\n  }\n\n  async findAll(locator: string | ElementLocator): Promise<ElementRef[]> {\n    this.ensureConnected();\n\n    if (!this.cdpAdapter) return [];\n\n    const normalized = this.normalizeLocator(locator);\n    return this.cdpAdapter.findAll(normalized);\n  }\n\n  async waitFor(locator: string | ElementLocator, options: WaitOptions = {}): Promise<ElementRef> {\n    const timeout = options.timeout || this.config.timeout;\n    const interval = options.interval || 100;\n    const startTime = Date.now();\n\n    while (Date.now() - startTime < timeout) {\n      const element = await this.find(locator);\n      if (element) {\n        if (options.state === 'hidden') {\n          await this.wait(interval);\n          continue;\n        }\n        return element;\n      }\n      await this.wait(interval);\n    }\n\n    throw new Error(`Element not found: ${JSON.stringify(locator)} (timeout: ${timeout}ms)`);\n  }\n\n  private async findDeterministic(locator: ElementLocator): Promise<ElementRef | null> {\n    // Level 1: Try refs from snapshot\n    if (locator.strategy === LocatorStrategy.REF) {\n      const element = await this.findByRef(locator.value);\n      if (element) return element;\n    }\n\n    // Level 2: Try CDP/DOM\n    if (this.cdpAdapter) {\n      return this.cdpAdapter.find(locator);\n    }\n\n    return null;\n  }\n\n  private async findByRef(ref: string): Promise<ElementRef | null> {\n    if (!this.lastSnapshot) {\n      await this.snapshot();\n    }\n\n    const cleanRef = ref.startsWith('@') ? ref.slice(1) : ref;\n    const element = this.lastSnapshot?.refs[cleanRef];\n\n    if (element) {\n      return { ...element, source: 'dom' };\n    }\n\n    return null;\n  }\n\n  private async findVisual(locator: ElementLocator): Promise<ElementRef | null> {\n    if (!this.vlmClient) return null;\n\n    // Get screenshot\n    const screenshot = await this.getScreenshotBase64();\n\n    // Ask VLM to find the element\n    const result = await this.vlmClient.findElement({\n      screenshot,\n      description: this.locatorToDescription(locator),\n    });\n\n    if (result.notFound || !result.coordinates) {\n      return null;\n    }\n\n    // Create a virtual ElementRef from VLM response\n    return {\n      id: 'vlm_' + Date.now(),\n      role: 'visual',\n      name: locator.value,\n      boundingBox: {\n        x: result.coordinates.x,\n        y: result.coordinates.y,\n        width: 1,\n        height: 1,\n      },\n      source: 'vlm',\n    };\n  }\n\n  // ============================================================================\n  // Actions\n  // ============================================================================\n\n  async click(locator: string | ElementLocator, options: ClickOptions = {}): Promise<ActionResult> {\n    const startTime = Date.now();\n    let usedVLM = false;\n\n    try {\n      const element = await this.find(locator);\n\n      if (!element) {\n        return {\n          status: ActionStatus.NOT_FOUND,\n          error: `Element not found: ${JSON.stringify(locator)}`,\n          duration: Date.now() - startTime,\n          usedVLM: false,\n        };\n      }\n\n      usedVLM = element.source === 'vlm';\n\n      // Use native adapter for precise clicking if we have coordinates\n      if (element.boundingBox && (this.pythonBridge?.isAvailable() || this.nutjsAdapter?.isAvailable())) {\n        const { x, y, width, height } = element.boundingBox;\n        const centerX = x + width / 2;\n        const centerY = y + height / 2;\n\n        if (this.pythonBridge?.isAvailable()) {\n          await this.pythonBridge.click(centerX, centerY, options.button || 'left');\n        } else if (this.nutjsAdapter?.isAvailable()) {\n          await this.nutjsAdapter.click(centerX, centerY, options.button || 'left', options.count || 1);\n        }\n      } else if (this.cdpAdapter) {\n        // Use CDP for WebView clicking\n        await this.cdpAdapter.click(element, options);\n      }\n\n      return {\n        status: usedVLM ? ActionStatus.VLM_FALLBACK : ActionStatus.SUCCESS,\n        duration: Date.now() - startTime,\n        usedVLM,\n        vlmCost: usedVLM ? this.vlmClient?.getCostSummary().totalCost : undefined,\n      };\n    } catch (error: unknown) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      return {\n        status: ActionStatus.FAILED,\n        error: errorMessage,\n        duration: Date.now() - startTime,\n        usedVLM,\n      };\n    }\n  }\n\n  async dblclick(locator: string | ElementLocator): Promise<ActionResult> {\n    return this.click(locator, { count: 2 });\n  }\n\n  async rightClick(locator: string | ElementLocator): Promise<ActionResult> {\n    return this.click(locator, { button: 'right' });\n  }\n\n  async type(locator: string | ElementLocator, text: string, options: TypeOptions = {}): Promise<ActionResult> {\n    const startTime = Date.now();\n\n    try {\n      const element = await this.find(locator);\n      if (!element) {\n        return {\n          status: ActionStatus.NOT_FOUND,\n          error: `Element not found: ${JSON.stringify(locator)}`,\n          duration: Date.now() - startTime,\n          usedVLM: false,\n        };\n      }\n\n      // Click to focus first\n      await this.click(locator);\n\n      if (options.clear) {\n        await this.clear(locator);\n      }\n\n      // Type using appropriate adapter\n      if (this.pythonBridge?.isAvailable()) {\n        await this.pythonBridge.typeText(text);\n      } else if (this.nutjsAdapter?.isAvailable()) {\n        await this.nutjsAdapter.type(text, options.delay);\n      } else if (this.cdpAdapter) {\n        await this.cdpAdapter.type(element, text, options);\n      }\n\n      if (options.submit) {\n        await this.press('Enter');\n      }\n\n      return {\n        status: ActionStatus.SUCCESS,\n        duration: Date.now() - startTime,\n        usedVLM: element.source === 'vlm',\n      };\n    } catch (error: unknown) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      return {\n        status: ActionStatus.FAILED,\n        error: errorMessage,\n        duration: Date.now() - startTime,\n        usedVLM: false,\n      };\n    }\n  }\n\n  async fill(locator: string | ElementLocator, text: string): Promise<ActionResult> {\n    return this.type(locator, text, { clear: true });\n  }\n\n  async clear(locator: string | ElementLocator): Promise<ActionResult> {\n    const startTime = Date.now();\n\n    try {\n      await this.click(locator);\n      await this.press('Control+a');\n      await this.press('Backspace');\n\n      return {\n        status: ActionStatus.SUCCESS,\n        duration: Date.now() - startTime,\n        usedVLM: false,\n      };\n    } catch (error: unknown) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      return {\n        status: ActionStatus.FAILED,\n        error: errorMessage,\n        duration: Date.now() - startTime,\n        usedVLM: false,\n      };\n    }\n  }\n\n  async press(key: string): Promise<ActionResult> {\n    const startTime = Date.now();\n\n    try {\n      // Parse key combination (e.g., \"Control+a\", \"Meta+Shift+s\")\n      const parts = key.split('+');\n      const mainKey = parts[parts.length - 1];\n      const modifiers = parts.slice(0, -1);\n\n      if (this.pythonBridge?.isAvailable()) {\n        await this.pythonBridge.pressKey(mainKey, modifiers);\n      } else if (this.nutjsAdapter?.isAvailable()) {\n        await this.nutjsAdapter.press(key);\n      } else if (this.cdpAdapter) {\n        await this.cdpAdapter.press(key);\n      }\n\n      return {\n        status: ActionStatus.SUCCESS,\n        duration: Date.now() - startTime,\n        usedVLM: false,\n      };\n    } catch (error: unknown) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      return {\n        status: ActionStatus.FAILED,\n        error: errorMessage,\n        duration: Date.now() - startTime,\n        usedVLM: false,\n      };\n    }\n  }\n\n  async hover(locator: string | ElementLocator): Promise<ActionResult> {\n    const startTime = Date.now();\n\n    try {\n      const element = await this.find(locator);\n      if (!element) {\n        return {\n          status: ActionStatus.NOT_FOUND,\n          error: `Element not found: ${JSON.stringify(locator)}`,\n          duration: Date.now() - startTime,\n          usedVLM: false,\n        };\n      }\n\n      if (element.boundingBox && (this.pythonBridge?.isAvailable() || this.nutjsAdapter?.isAvailable())) {\n        const { x, y, width, height } = element.boundingBox;\n        const centerX = x + width / 2;\n        const centerY = y + height / 2;\n\n        if (this.nutjsAdapter?.isAvailable()) {\n          await this.nutjsAdapter.moveTo(centerX, centerY);\n        }\n      } else if (this.cdpAdapter) {\n        await this.cdpAdapter.hover(element);\n      }\n\n      return {\n        status: ActionStatus.SUCCESS,\n        duration: Date.now() - startTime,\n        usedVLM: element.source === 'vlm',\n      };\n    } catch (error: unknown) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      return {\n        status: ActionStatus.FAILED,\n        error: errorMessage,\n        duration: Date.now() - startTime,\n        usedVLM: false,\n      };\n    }\n  }\n\n  async scroll(options: ScrollOptions): Promise<ActionResult> {\n    const startTime = Date.now();\n\n    try {\n      const amount = options.amount || 100;\n\n      if (this.nutjsAdapter?.isAvailable()) {\n        await this.nutjsAdapter.scroll(options.direction, amount);\n      } else if (this.cdpAdapter) {\n        await this.cdpAdapter.scroll(options);\n      }\n\n      return {\n        status: ActionStatus.SUCCESS,\n        duration: Date.now() - startTime,\n        usedVLM: false,\n      };\n    } catch (error: unknown) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      return {\n        status: ActionStatus.FAILED,\n        error: errorMessage,\n        duration: Date.now() - startTime,\n        usedVLM: false,\n      };\n    }\n  }\n\n  async drag(from: string | ElementLocator, to: string | ElementLocator): Promise<ActionResult> {\n    const startTime = Date.now();\n\n    try {\n      const fromElement = await this.find(from);\n      const toElement = await this.find(to);\n\n      if (!fromElement || !toElement) {\n        return {\n          status: ActionStatus.NOT_FOUND,\n          error: 'Source or target element not found',\n          duration: Date.now() - startTime,\n          usedVLM: false,\n        };\n      }\n\n      if (fromElement.boundingBox && toElement.boundingBox && this.nutjsAdapter?.isAvailable()) {\n        const fromBox = fromElement.boundingBox;\n        const toBox = toElement.boundingBox;\n        await this.nutjsAdapter.drag(\n          fromBox.x + fromBox.width / 2,\n          fromBox.y + fromBox.height / 2,\n          toBox.x + toBox.width / 2,\n          toBox.y + toBox.height / 2\n        );\n      } else if (this.cdpAdapter) {\n        await this.cdpAdapter.drag(fromElement, toElement);\n      }\n\n      return {\n        status: ActionStatus.SUCCESS,\n        duration: Date.now() - startTime,\n        usedVLM: false,\n      };\n    } catch (error: unknown) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      return {\n        status: ActionStatus.FAILED,\n        error: errorMessage,\n        duration: Date.now() - startTime,\n        usedVLM: false,\n      };\n    }\n  }\n\n  // ============================================================================\n  // Visual AI Methods\n  // ============================================================================\n\n  async clickText(text: string): Promise<ActionResult> {\n    return this.click({ strategy: LocatorStrategy.VISUAL, value: `button or link with text \"${text}\"` });\n  }\n\n  async clickImage(description: string): Promise<ActionResult> {\n    return this.click({ strategy: LocatorStrategy.VISUAL, value: description });\n  }\n\n  async ai(instruction: string): Promise<ActionResult> {\n    const startTime = Date.now();\n\n    if (!this.vlmClient) {\n      return {\n        status: ActionStatus.FAILED,\n        error: 'VLM client not configured. Enable visual or hybrid mode.',\n        duration: Date.now() - startTime,\n        usedVLM: false,\n      };\n    }\n\n    try {\n      const actionSpaces = [\n        'click(x, y)',\n        'type(text)',\n        'scroll(direction)',\n        'press(key)',\n        'wait()',\n        'finished()',\n      ];\n\n      let maxIterations = 10;\n      let finished = false;\n\n      while (!finished && maxIterations > 0) {\n        const screenshot = await this.getScreenshotBase64();\n\n        const response = await this.vlmClient.getNextAction({\n          screenshot,\n          instruction,\n          actionSpaces,\n        });\n\n        if (response.finished) {\n          finished = true;\n          break;\n        }\n\n        // Execute the action\n        await this.executeVLMAction(response);\n        await this.wait(500);\n        maxIterations--;\n      }\n\n      return {\n        status: ActionStatus.SUCCESS,\n        duration: Date.now() - startTime,\n        usedVLM: true,\n        vlmCost: this.vlmClient.getCostSummary().totalCost,\n      };\n    } catch (error: unknown) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      return {\n        status: ActionStatus.FAILED,\n        error: errorMessage,\n        duration: Date.now() - startTime,\n        usedVLM: true,\n      };\n    }\n  }\n\n  private async executeVLMAction(response: { actionType: string; actionParams: Record<string, unknown> }): Promise<void> {\n    switch (response.actionType) {\n      case 'click':\n        if (this.nutjsAdapter?.isAvailable() && response.actionParams.x && response.actionParams.y) {\n          await this.nutjsAdapter.click(\n            response.actionParams.x as number,\n            response.actionParams.y as number\n          );\n        }\n        break;\n      case 'type':\n        if (this.nutjsAdapter?.isAvailable() && response.actionParams.text) {\n          await this.nutjsAdapter.type(response.actionParams.text as string);\n        }\n        break;\n      case 'scroll':\n        await this.scroll({ direction: (response.actionParams.direction as ScrollOptions['direction']) || 'down' });\n        break;\n      case 'press':\n        await this.press((response.actionParams.key as string) || 'Enter');\n        break;\n      case 'wait':\n        await this.wait(2000);\n        break;\n    }\n  }\n\n  // ============================================================================\n  // Getters\n  // ============================================================================\n\n  async getText(locator: string | ElementLocator): Promise<string> {\n    this.ensureConnected();\n\n    if (!this.cdpAdapter) return '';\n\n    const element = await this.find(locator);\n    if (!element) return '';\n\n    return this.cdpAdapter.getText(element);\n  }\n\n  async getValue(locator: string | ElementLocator): Promise<string> {\n    this.ensureConnected();\n\n    if (!this.cdpAdapter) return '';\n\n    const element = await this.find(locator);\n    if (!element) return '';\n\n    return this.cdpAdapter.getValue(element);\n  }\n\n  async getAttribute(locator: string | ElementLocator, attr: string): Promise<string | null> {\n    this.ensureConnected();\n\n    if (!this.cdpAdapter) return null;\n\n    const element = await this.find(locator);\n    if (!element) return null;\n\n    return this.cdpAdapter.getAttribute(element, attr);\n  }\n\n  async isVisible(locator: string | ElementLocator): Promise<boolean> {\n    const element = await this.find(locator);\n    if (!element) return false;\n\n    if (this.cdpAdapter) {\n      return this.cdpAdapter.isVisible(element);\n    }\n\n    return true;\n  }\n\n  async isEnabled(locator: string | ElementLocator): Promise<boolean> {\n    const element = await this.find(locator);\n    if (!element) return false;\n\n    if (this.cdpAdapter) {\n      return this.cdpAdapter.isEnabled(element);\n    }\n\n    return true;\n  }\n\n  async count(locator: string | ElementLocator): Promise<number> {\n    const elements = await this.findAll(locator);\n    return elements.length;\n  }\n\n  async boundingBox(locator: string | ElementLocator): Promise<BoundingBox | null> {\n    const element = await this.find(locator);\n    return element?.boundingBox || null;\n  }\n\n  // ============================================================================\n  // Page\n  // ============================================================================\n\n  async getUrl(): Promise<string> {\n    this.ensureConnected();\n\n    if (!this.cdpAdapter) return '';\n\n    return this.cdpAdapter.getUrl();\n  }\n\n  async getTitle(): Promise<string> {\n    this.ensureConnected();\n\n    if (!this.cdpAdapter) return '';\n\n    return this.cdpAdapter.getTitle();\n  }\n\n  async evaluate<T>(script: string): Promise<T> {\n    this.ensureConnected();\n\n    if (!this.cdpAdapter) {\n      throw new Error('CDP adapter not available for evaluate');\n    }\n\n    return this.cdpAdapter.evaluate(script);\n  }\n\n  // ============================================================================\n  // Screenshot & Recording\n  // ============================================================================\n\n  async screenshot(path?: string, options: ScreenshotOptions = {}): Promise<string> {\n    this.ensureConnected();\n\n    if (!this.cdpAdapter) {\n      throw new Error('CDP adapter not available for screenshot');\n    }\n\n    return this.cdpAdapter.screenshot(path, options);\n  }\n\n  async startRecording(path: string): Promise<void> {\n    this.ensureConnected();\n\n    if (!this.cdpAdapter) {\n      throw new Error('CDP adapter not available for recording');\n    }\n\n    await this.cdpAdapter.startRecording(path);\n  }\n\n  async stopRecording(): Promise<{ path: string }> {\n    this.ensureConnected();\n\n    if (!this.cdpAdapter) {\n      throw new Error('CDP adapter not available for recording');\n    }\n\n    return this.cdpAdapter.stopRecording();\n  }\n\n  // ============================================================================\n  // Cost Tracking\n  // ============================================================================\n\n  getCostSummary(): CostSummary {\n    if (!this.vlmClient) {\n      return {\n        totalCost: 0,\n        totalCalls: 0,\n        byProvider: {},\n        byOperation: {},\n        entries: [],\n      };\n    }\n\n    return this.vlmClient.getCostSummary();\n  }\n\n  resetCostTracking(): void {\n    this.vlmClient?.resetCostTracking();\n  }\n\n  // ============================================================================\n  // Utilities\n  // ============================================================================\n\n  async wait(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  async waitForIdle(timeout: number = 5000): Promise<void> {\n    this.ensureConnected();\n\n    if (this.cdpAdapter) {\n      await this.cdpAdapter.waitForIdle(timeout);\n    }\n  }\n\n  // ============================================================================\n  // Private Helpers\n  // ============================================================================\n\n  private ensureConnected(): void {\n    if (!this.connected) {\n      throw new Error('Not connected. Call connect() first.');\n    }\n  }\n\n  private normalizeLocator(locator: string | ElementLocator): ElementLocator {\n    if (typeof locator === 'string') {\n      // Parse string locator\n      if (locator.startsWith('@')) {\n        return { strategy: LocatorStrategy.REF, value: locator };\n      }\n      if (locator.startsWith('//')) {\n        return { strategy: LocatorStrategy.XPATH, value: locator };\n      }\n      if (locator.startsWith('text=')) {\n        return { strategy: LocatorStrategy.TEXT, value: locator.slice(5) };\n      }\n      if (locator.startsWith('role=')) {\n        return { strategy: LocatorStrategy.ROLE, value: locator.slice(5) };\n      }\n      if (locator.startsWith('[data-testid=')) {\n        return { strategy: LocatorStrategy.TESTID, value: locator };\n      }\n      // Default to CSS\n      return { strategy: LocatorStrategy.CSS, value: locator };\n    }\n    return locator;\n  }\n\n  private locatorToDescription(locator: ElementLocator): string {\n    switch (locator.strategy) {\n      case LocatorStrategy.TEXT:\n        return `element with text \"${locator.value}\"`;\n      case LocatorStrategy.ROLE:\n        return `${locator.value} element`;\n      case LocatorStrategy.VISUAL:\n        return locator.value;\n      default:\n        return `element matching ${locator.value}`;\n    }\n  }\n\n  private async getScreenshotBase64(): Promise<string> {\n    if (this.cdpAdapter) {\n      return this.cdpAdapter.getScreenshotBase64();\n    }\n    if (this.nutjsAdapter?.isAvailable()) {\n      return this.nutjsAdapter.screenshot();\n    }\n    if (this.pythonBridge?.isAvailable()) {\n      return this.pythonBridge.screenshot();\n    }\n    throw new Error('No adapter available for screenshot');\n  }\n\n  private log(message: string, ...args: unknown[]): void {\n    if (this.config.debug) {\n      console.log(`[desktop-test] ${message}`, ...args);\n    }\n  }\n}\n\n/**\n * Factory function for creating DesktopTest instance\n */\nexport function createDesktopTest(config: DesktopTestConfig = {}): DesktopTest {\n  return new DesktopTest(config);\n}\n","/**\n * @flowsight/desktop-test - Assertions\n *\n * Test assertion methods including data correctness checks.\n */\n\nimport {\n  type AssertionMethods,\n  type ElementLocator,\n  type DesktopTestInstance,\n} from '../types.js';\n\n/**\n * Assertion error with details\n */\nexport class AssertionError extends Error {\n  actual?: unknown;\n  expected?: unknown;\n\n  constructor(message: string, actual?: unknown, expected?: unknown) {\n    super(message);\n    this.name = 'AssertionError';\n    this.actual = actual;\n    this.expected = expected;\n  }\n}\n\n/**\n * Assertions class - implements test assertions\n */\nexport class Assertions implements AssertionMethods {\n  private test?: DesktopTestInstance;\n\n  constructor(test?: DesktopTestInstance) {\n    this.test = test;\n  }\n\n  // ============================================================================\n  // Static Value Assertions (no DesktopTest needed)\n  // ============================================================================\n\n  /**\n   * Assert a number is not zero (static version)\n   */\n  static valueNotZero(value: number, message?: string): void {\n    if (value === 0) {\n      throw new AssertionError(\n        message || `Expected non-zero value, got 0`,\n        value,\n        'non-zero'\n      );\n    }\n  }\n\n  /**\n   * Assert an array/string is not empty (static version)\n   */\n  static valueNotEmpty(value: unknown[] | string, message?: string): void {\n    if (value.length === 0) {\n      throw new AssertionError(\n        message || `Expected non-empty value, got empty`,\n        value,\n        'non-empty'\n      );\n    }\n  }\n\n  /**\n   * Assert data passes validation rules (static version)\n   */\n  static validateData<T extends Record<string, unknown>>(\n    data: T,\n    rules: { [K in keyof T]?: (value: T[K]) => boolean },\n    message?: string\n  ): void {\n    for (const [key, validator] of Object.entries(rules)) {\n      if (validator && !validator(data[key as keyof T] as T[keyof T])) {\n        throw new AssertionError(\n          message || `Validation failed for field \"${key}\"`,\n          data[key as keyof T],\n          `valid ${key}`\n        );\n      }\n    }\n  }\n\n  // ============================================================================\n  // Basic Assertions\n  // ============================================================================\n\n  ok(condition: boolean, message?: string): void {\n    if (!condition) {\n      throw new AssertionError(message || 'Expected condition to be truthy', condition, true);\n    }\n  }\n\n  equal<T>(actual: T, expected: T, message?: string): void {\n    if (actual !== expected) {\n      throw new AssertionError(\n        message || `Expected ${JSON.stringify(expected)}, got ${JSON.stringify(actual)}`,\n        actual,\n        expected\n      );\n    }\n  }\n\n  notEqual<T>(actual: T, expected: T, message?: string): void {\n    if (actual === expected) {\n      throw new AssertionError(\n        message || `Expected value to not equal ${JSON.stringify(expected)}`,\n        actual,\n        `not ${JSON.stringify(expected)}`\n      );\n    }\n  }\n\n  // ============================================================================\n  // Number Assertions\n  // ============================================================================\n\n  greaterThan(actual: number, expected: number, message?: string): void {\n    if (actual <= expected) {\n      throw new AssertionError(\n        message || `Expected ${actual} to be greater than ${expected}`,\n        actual,\n        `> ${expected}`\n      );\n    }\n  }\n\n  lessThan(actual: number, expected: number, message?: string): void {\n    if (actual >= expected) {\n      throw new AssertionError(\n        message || `Expected ${actual} to be less than ${expected}`,\n        actual,\n        `< ${expected}`\n      );\n    }\n  }\n\n  greaterOrEqual(actual: number, expected: number, message?: string): void {\n    if (actual < expected) {\n      throw new AssertionError(\n        message || `Expected ${actual} to be greater than or equal to ${expected}`,\n        actual,\n        `>= ${expected}`\n      );\n    }\n  }\n\n  lessOrEqual(actual: number, expected: number, message?: string): void {\n    if (actual > expected) {\n      throw new AssertionError(\n        message || `Expected ${actual} to be less than or equal to ${expected}`,\n        actual,\n        `<= ${expected}`\n      );\n    }\n  }\n\n  // ============================================================================\n  // String Assertions\n  // ============================================================================\n\n  contains(haystack: string, needle: string, message?: string): void {\n    if (!haystack.includes(needle)) {\n      throw new AssertionError(\n        message || `Expected \"${haystack.slice(0, 50)}...\" to contain \"${needle}\"`,\n        haystack,\n        `contains \"${needle}\"`\n      );\n    }\n  }\n\n  matches(actual: string, pattern: RegExp, message?: string): void {\n    if (!pattern.test(actual)) {\n      throw new AssertionError(\n        message || `Expected \"${actual.slice(0, 50)}...\" to match ${pattern}`,\n        actual,\n        pattern.toString()\n      );\n    }\n  }\n\n  // ============================================================================\n  // Element Assertions\n  // ============================================================================\n\n  private requireTest(): DesktopTestInstance {\n    if (!this.test) {\n      throw new Error('This assertion method requires a DesktopTest instance');\n    }\n    return this.test;\n  }\n\n  async exists(locator: string | ElementLocator, message?: string): Promise<void> {\n    const element = await this.requireTest().find(locator);\n    if (!element) {\n      throw new AssertionError(\n        message || `Expected element to exist: ${JSON.stringify(locator)}`,\n        null,\n        'element'\n      );\n    }\n  }\n\n  async notExists(locator: string | ElementLocator, message?: string): Promise<void> {\n    const element = await this.requireTest().find(locator);\n    if (element) {\n      throw new AssertionError(\n        message || `Expected element to not exist: ${JSON.stringify(locator)}`,\n        'element found',\n        null\n      );\n    }\n  }\n\n  async visible(locator: string | ElementLocator, message?: string): Promise<void> {\n    const isVisible = await this.requireTest().isVisible(locator);\n    if (!isVisible) {\n      throw new AssertionError(\n        message || `Expected element to be visible: ${JSON.stringify(locator)}`,\n        'not visible',\n        'visible'\n      );\n    }\n  }\n\n  async hidden(locator: string | ElementLocator, message?: string): Promise<void> {\n    const isVisible = await this.requireTest().isVisible(locator);\n    if (isVisible) {\n      throw new AssertionError(\n        message || `Expected element to be hidden: ${JSON.stringify(locator)}`,\n        'visible',\n        'hidden'\n      );\n    }\n  }\n\n  async hasText(locator: string | ElementLocator, text: string, message?: string): Promise<void> {\n    const actualText = await this.requireTest().getText(locator);\n    if (!actualText.includes(text)) {\n      throw new AssertionError(\n        message || `Expected element to have text \"${text}\", got \"${actualText.slice(0, 50)}...\"`,\n        actualText,\n        text\n      );\n    }\n  }\n\n  async hasValue(locator: string | ElementLocator, value: string, message?: string): Promise<void> {\n    const actualValue = await this.requireTest().getValue(locator);\n    if (actualValue !== value) {\n      throw new AssertionError(\n        message || `Expected element to have value \"${value}\", got \"${actualValue}\"`,\n        actualValue,\n        value\n      );\n    }\n  }\n\n  async hasAttribute(locator: string | ElementLocator, attr: string, value?: string, message?: string): Promise<void> {\n    const actualValue = await this.requireTest().getAttribute(locator, attr);\n    \n    if (actualValue === null) {\n      throw new AssertionError(\n        message || `Expected element to have attribute \"${attr}\"`,\n        null,\n        attr\n      );\n    }\n\n    if (value !== undefined && actualValue !== value) {\n      throw new AssertionError(\n        message || `Expected attribute \"${attr}\" to have value \"${value}\", got \"${actualValue}\"`,\n        actualValue,\n        value\n      );\n    }\n  }\n\n  // ============================================================================\n  // Data Correctness Assertions (Key feature for \"0 files\" bug prevention)\n  // ============================================================================\n\n  /**\n   * Assert that a numeric value from the element is not zero.\n   * This is specifically designed to catch the \"0 files, 0 functions\" bug.\n   */\n  async notZero(locator: string | ElementLocator, message?: string): Promise<void> {\n    const text = await this.requireTest().getText(locator);\n    \n    // Extract numbers from text\n    const numbers = text.match(/\\d+/g);\n    \n    if (!numbers || numbers.length === 0) {\n      throw new AssertionError(\n        message || `Expected element to contain a number: ${JSON.stringify(locator)}`,\n        text,\n        'number > 0'\n      );\n    }\n\n    const allZero = numbers.every(n => parseInt(n, 10) === 0);\n    if (allZero) {\n      throw new AssertionError(\n        message || `Expected non-zero value, but all numbers are zero: \"${text}\"`,\n        numbers,\n        'non-zero'\n      );\n    }\n  }\n\n  /**\n   * Assert that an element's text content is not empty.\n   */\n  async notEmpty(locator: string | ElementLocator, message?: string): Promise<void> {\n    const text = await this.requireTest().getText(locator);\n    const trimmed = text.trim();\n\n    if (trimmed.length === 0) {\n      throw new AssertionError(\n        message || `Expected element to have non-empty text: ${JSON.stringify(locator)}`,\n        '',\n        'non-empty text'\n      );\n    }\n  }\n\n  /**\n   * Assert that element data passes a custom validation function.\n   */\n  async dataCorrect(\n    locator: string | ElementLocator,\n    validator: (data: string) => boolean,\n    message?: string\n  ): Promise<void> {\n    const text = await this.requireTest().getText(locator);\n    \n    if (!validator(text)) {\n      throw new AssertionError(\n        message || `Data validation failed for: ${JSON.stringify(locator)}`,\n        text,\n        'valid data'\n      );\n    }\n  }\n\n  // ============================================================================\n  // Visual AI Assertions\n  // ============================================================================\n\n  /**\n   * Use VLM to visually verify a condition.\n   */\n  async visualCheck(description: string, _message?: string): Promise<void> {\n    // This would need VLM client access - simplified for now\n    // In full implementation, this would take a screenshot and ask VLM to verify\n    console.log(`  [Visual Check] ${description}`);\n    \n    // For now, just log - full implementation would use VLM\n    // const result = await this.vlmClient.assertVisual({\n    //   screenshot: await this.test.getScreenshotBase64(),\n    //   assertion: description,\n    // });\n    // if (!result.passed) {\n    //   throw new AssertionError(message || result.reasoning, result.actual, description);\n    // }\n  }\n\n  /**\n   * Compare current screenshot against baseline for visual regression.\n   */\n  async noVisualRegression(baseline: string, threshold: number = 0.95): Promise<void> {\n    // Simplified - would compare screenshots using image diff\n    console.log(`  [Visual Regression] Comparing against baseline: ${baseline} (threshold: ${threshold})`);\n    \n    // Full implementation would:\n    // 1. Load baseline image\n    // 2. Take current screenshot\n    // 3. Compare using pixel diff or perceptual hash\n    // 4. Fail if similarity < threshold\n  }\n}\n","/**\n * @flowsight/desktop-test - Test Runner\n *\n * Runs test cases and manages test lifecycle.\n */\n\nimport {\n  type TestCase,\n  type TestResult,\n  type TestSuiteResult,\n  type TestContext,\n  type DesktopTestConfig,\n  type Reporter,\n} from '../types.js';\n\nimport { DesktopTest } from './desktop-test.js';\nimport { Assertions } from './assertions.js';\n\n/**\n * Test runner options\n */\nexport interface TestRunnerOptions {\n  /** Desktop test configuration */\n  config?: DesktopTestConfig;\n  /** Stop on first failure */\n  stopOnFailure?: boolean;\n  /** Video recording directory */\n  videoDir?: string;\n  /** Reporter */\n  reporter?: Reporter;\n}\n\n/**\n * Logger implementation\n */\nclass Logger {\n  info(message: string, ...args: unknown[]): void {\n    console.log(`[INFO] ${message}`, ...args);\n  }\n\n  warn(message: string, ...args: unknown[]): void {\n    console.warn(`[WARN] ${message}`, ...args);\n  }\n\n  error(message: string, ...args: unknown[]): void {\n    console.error(`[ERROR] ${message}`, ...args);\n  }\n\n  debug(message: string, ...args: unknown[]): void {\n    console.debug(`[DEBUG] ${message}`, ...args);\n  }\n\n  step(message: string): void {\n    console.log(`   ${message}`);\n  }\n}\n\n/**\n * Test Runner - manages test execution\n */\nexport class TestRunner {\n  private options: TestRunnerOptions;\n  private desktopTest: DesktopTest;\n  private results: TestResult[] = [];\n  private logger = new Logger();\n\n  constructor(options: TestRunnerOptions = {}) {\n    this.options = {\n      stopOnFailure: false,\n      ...options,\n    };\n    this.desktopTest = new DesktopTest(options.config);\n  }\n\n  /**\n   * Run a single test case\n   */\n  async runTest(test: TestCase): Promise<TestResult> {\n    const startTime = Date.now();\n    const screenshots: string[] = [];\n    let passed = false;\n    let error: Error | undefined;\n    let usedVLM = false;\n\n    // Notify reporter\n    this.options.reporter?.onTestStart(test);\n\n    console.log(`\\n  [TEST] ${test.name}`);\n\n    // Start video recording if configured\n    let videoPath: string | undefined;\n    if (this.options.videoDir) {\n      const sanitizedName = test.name.replace(/[^a-zA-Z0-9]/g, '_');\n      videoPath = `${this.options.videoDir}/${sanitizedName}.webm`;\n      try {\n        await this.desktopTest.startRecording(videoPath);\n      } catch {\n        // Ignore recording start errors\n      }\n    }\n\n    // Create test context\n    const assertions = new Assertions(this.desktopTest);\n    const context: TestContext = {\n      test: this.desktopTest,\n      assert: assertions,\n      log: this.logger,\n    };\n\n    // Run test with retries\n    const maxRetries = test.retries || 0;\n    let attempts = 0;\n\n    while (attempts <= maxRetries) {\n      attempts++;\n      try {\n        await test.fn(context);\n        passed = true;\n        break;\n      } catch (e) {\n        error = e instanceof Error ? e : new Error(String(e));\n        if (attempts <= maxRetries) {\n          console.log(`    Retry ${attempts}/${maxRetries}...`);\n        }\n      }\n    }\n\n    // Stop video recording\n    if (videoPath) {\n      try {\n        await this.desktopTest.stopRecording();\n      } catch {\n        // Ignore recording stop errors\n      }\n    }\n\n    // Check VLM usage\n    const costSummary = this.desktopTest.getCostSummary();\n    usedVLM = costSummary.totalCalls > 0;\n\n    const result: TestResult = {\n      test,\n      passed,\n      error,\n      duration: Date.now() - startTime,\n      screenshots,\n      video: videoPath,\n      usedVLM,\n      vlmCost: costSummary.totalCost,\n    };\n\n    this.results.push(result);\n\n    // Print result\n    const status = passed ? ' PASS' : ' FAIL';\n    console.log(`  ${status} (${result.duration}ms)${usedVLM ? ` [VLM: $${costSummary.totalCost.toFixed(4)}]` : ''}`);\n    if (error) {\n      console.log(`    ${error.message}`);\n    }\n\n    // Notify reporter\n    this.options.reporter?.onTestEnd(result);\n\n    return result;\n  }\n\n  /**\n   * Run all test cases\n   */\n  async runAll(tests: TestCase[], suiteName: string = 'Desktop Tests'): Promise<TestSuiteResult> {\n    console.log('\\n');\n    console.log(`  ${suiteName}`);\n    console.log('\\n');\n\n    // Notify reporter\n    this.options.reporter?.onSuiteStart(suiteName);\n\n    // Connect to the application\n    console.log('  Connecting to application...');\n    try {\n      await this.desktopTest.connect();\n      console.log('   Connected\\n');\n    } catch (err) {\n      const message = err instanceof Error ? err.message : String(err);\n      console.log(`   Connection failed: ${message}`);\n      console.log('  Please ensure the Tauri app is running with remote debugging enabled.');\n      process.exit(1);\n    }\n\n    // Filter tests\n    const onlyTests = tests.filter(t => t.only);\n    const testsToRun = onlyTests.length > 0 ? onlyTests : tests.filter(t => !t.skip);\n\n    // Run tests\n    for (const test of testsToRun) {\n      const result = await this.runTest(test);\n\n      if (!result.passed && this.options.stopOnFailure) {\n        console.log('\\n  Stopping: stopOnFailure is enabled');\n        break;\n      }\n    }\n\n    // Disconnect\n    await this.desktopTest.disconnect();\n\n    // Build suite result\n    const suiteResult: TestSuiteResult = {\n      name: suiteName,\n      tests: this.results,\n      passed: this.results.filter(r => r.passed).length,\n      failed: this.results.filter(r => !r.passed).length,\n      skipped: tests.filter(t => t.skip).length,\n      duration: this.results.reduce((sum, r) => sum + r.duration, 0),\n      totalVLMCost: this.results.reduce((sum, r) => sum + (r.vlmCost || 0), 0),\n    };\n\n    // Print summary\n    this.printSummary(suiteResult);\n\n    // Notify reporter\n    this.options.reporter?.onSuiteEnd(suiteResult);\n\n    return suiteResult;\n  }\n\n  /**\n   * Print test summary\n   */\n  private printSummary(result: TestSuiteResult): void {\n    console.log('\\n');\n    console.log('  Test Results');\n    console.log('\\n');\n\n    console.log(`  Total:    ${result.tests.length} tests`);\n    console.log(`  Passed:   ${result.passed} `);\n    console.log(`  Failed:   ${result.failed} `);\n    console.log(`  Skipped:  ${result.skipped}`);\n    console.log(`  Duration: ${result.duration}ms`);\n\n    if (result.totalVLMCost > 0) {\n      console.log(`  VLM Cost: $${result.totalVLMCost.toFixed(4)}`);\n    }\n\n    if (result.failed > 0) {\n      console.log('\\n  Failed tests:');\n      for (const test of result.tests.filter(t => !t.passed)) {\n        console.log(`    - ${test.test.name}`);\n        if (test.error) {\n          console.log(`      ${test.error.message}`);\n        }\n      }\n    }\n\n    console.log('\\n\\n');\n\n    // Set exit code\n    if (result.failed > 0) {\n      process.exitCode = 1;\n    }\n  }\n\n  /**\n   * Get test results\n   */\n  getResults(): TestResult[] {\n    return this.results;\n  }\n\n  /**\n   * Reset results\n   */\n  reset(): void {\n    this.results = [];\n    this.desktopTest.resetCostTracking();\n  }\n}\n","/**\n * @flowsight/desktop-test - Accessibility Tree\n *\n * Complete implementation of Accessibility Tree functionality.\n * Provides full access to the accessibility hierarchy for testing\n * with screen readers and assistive technologies.\n */\n\nimport type { DesktopTestInstance } from '../types.js';\n\n// ===========================================================================\n// Types\n// ===========================================================================\n\n/**\n * ARIA roles organized by category\n */\nexport const ARIA_ROLES = {\n  // Document structure\n  document: ['article', 'document', 'application', 'feed', 'figure', 'group', 'img', 'main', 'math', 'none', 'note', 'presentation', 'separator', 'toolbar'],\n  \n  // Landmark roles\n  landmark: ['banner', 'complementary', 'contentinfo', 'form', 'main', 'navigation', 'region', 'search'],\n  \n  // Widget roles (interactive)\n  widget: ['button', 'checkbox', 'combobox', 'gridcell', 'link', 'listbox', 'menuitem', 'menuitemcheckbox', 'menuitemradio', 'option', 'progressbar', 'radio', 'scrollbar', 'searchbox', 'slider', 'spinbutton', 'switch', 'tab', 'tabpanel', 'textbox', 'treeitem'],\n  \n  // Composite widgets\n  composite: ['combobox', 'grid', 'listbox', 'menu', 'menubar', 'radiogroup', 'tablist', 'tree', 'treegrid'],\n  \n  // Live regions\n  live: ['alert', 'log', 'marquee', 'status', 'timer'],\n  \n  // Window roles\n  window: ['alertdialog', 'dialog'],\n} as const;\n\n/**\n * Accessibility tree node\n */\nexport interface AXNode {\n  nodeId: string;\n  role: string;\n  name: string;\n  description?: string;\n  value?: string;\n  properties: AXProperty[];\n  children: AXNode[];\n  parent?: AXNode;\n  \n  // Computed properties\n  isInteractive: boolean;\n  isFocusable: boolean;\n  isVisible: boolean;\n  isLandmark: boolean;\n  level?: number;\n  \n  // DOM reference\n  backendDOMNodeId?: number;\n  boundingBox?: { x: number; y: number; width: number; height: number };\n}\n\n/**\n * Accessibility property\n */\nexport interface AXProperty {\n  name: string;\n  value: string | number | boolean;\n}\n\n/**\n * Accessibility tree structure\n */\nexport interface AccessibilityTree {\n  root: AXNode;\n  nodes: Map<string, AXNode>;\n  \n  // Statistics\n  totalNodes: number;\n  interactiveNodes: number;\n  landmarkCount: number;\n  headingCount: number;\n}\n\n/**\n * Tree query result\n */\nexport interface AXQueryResult {\n  nodes: AXNode[];\n  count: number;\n}\n\n/**\n * Accessibility issue found during validation\n */\nexport interface AXIssue {\n  type: 'error' | 'warning' | 'info';\n  code: string;\n  message: string;\n  node?: AXNode;\n  suggestion?: string;\n}\n\n// ===========================================================================\n// Accessibility Tree Builder\n// ===========================================================================\n\n/**\n * Accessibility Tree Manager\n * \n * Provides complete access to the page's accessibility tree\n */\nexport class AccessibilityTreeManager {\n  private test: DesktopTestInstance;\n  private tree: AccessibilityTree | null = null;\n\n  constructor(test: DesktopTestInstance) {\n    this.test = test;\n  }\n\n  // =========================================================================\n  // Tree Building\n  // =========================================================================\n\n  /**\n   * Get the full accessibility tree from the page\n   */\n  async getTree(options: {\n    includeHidden?: boolean;\n    maxDepth?: number;\n  } = {}): Promise<AccessibilityTree> {\n    const { includeHidden = false, maxDepth = 100 } = options;\n\n    // Get accessibility tree via page evaluation\n    const rawTree = await this.test.evaluate<{\n      tree: RawAXNode;\n      stats: { total: number; interactive: number; landmarks: number; headings: number };\n    }>(`\n      (function() {\n        const stats = { total: 0, interactive: 0, landmarks: 0, headings: 0 };\n        const landmarkRoles = ['banner', 'complementary', 'contentinfo', 'form', 'main', 'navigation', 'region', 'search'];\n        const interactiveRoles = ['button', 'checkbox', 'combobox', 'link', 'listbox', 'menuitem', 'option', 'radio', 'searchbox', 'slider', 'spinbutton', 'switch', 'tab', 'textbox', 'treeitem'];\n        \n        function getAccessibleName(el) {\n          // aria-labelledby\n          const labelledBy = el.getAttribute('aria-labelledby');\n          if (labelledBy) {\n            const labels = labelledBy.split(' ').map(id => document.getElementById(id)?.textContent || '').join(' ');\n            if (labels.trim()) return labels.trim();\n          }\n          \n          // aria-label\n          const ariaLabel = el.getAttribute('aria-label');\n          if (ariaLabel) return ariaLabel;\n          \n          // <label> for form elements\n          if (el.id) {\n            const label = document.querySelector('label[for=\"' + el.id + '\"]');\n            if (label) return label.textContent?.trim() || '';\n          }\n          \n          // title attribute\n          const title = el.getAttribute('title');\n          if (title) return title;\n          \n          // alt for images\n          const alt = el.getAttribute('alt');\n          if (alt) return alt;\n          \n          // Text content for certain elements\n          const tagName = el.tagName.toLowerCase();\n          if (['button', 'a', 'label', 'legend', 'caption', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'].includes(tagName)) {\n            return el.textContent?.trim() || '';\n          }\n          \n          // value for inputs\n          if (tagName === 'input' && ['submit', 'button', 'reset'].includes(el.type)) {\n            return el.value || '';\n          }\n          \n          return '';\n        }\n        \n        function getRole(el) {\n          // Explicit role\n          const role = el.getAttribute('role');\n          if (role) return role;\n          \n          // Implicit roles\n          const tagName = el.tagName.toLowerCase();\n          const type = el.getAttribute('type') || '';\n          \n          const implicitRoles = {\n            'a[href]': 'link',\n            'button': 'button',\n            'input[type=button]': 'button',\n            'input[type=submit]': 'button',\n            'input[type=reset]': 'button',\n            'input[type=image]': 'button',\n            'input[type=checkbox]': 'checkbox',\n            'input[type=radio]': 'radio',\n            'input[type=range]': 'slider',\n            'input[type=search]': 'searchbox',\n            'input[type=text]': 'textbox',\n            'input[type=email]': 'textbox',\n            'input[type=password]': 'textbox',\n            'input[type=tel]': 'textbox',\n            'input[type=url]': 'textbox',\n            'input': 'textbox',\n            'select': 'combobox',\n            'textarea': 'textbox',\n            'article': 'article',\n            'aside': 'complementary',\n            'footer': 'contentinfo',\n            'form': 'form',\n            'header': 'banner',\n            'main': 'main',\n            'nav': 'navigation',\n            'section': 'region',\n            'img': 'img',\n            'ul': 'list',\n            'ol': 'list',\n            'li': 'listitem',\n            'table': 'table',\n            'tr': 'row',\n            'td': 'cell',\n            'th': 'columnheader',\n            'h1': 'heading',\n            'h2': 'heading',\n            'h3': 'heading',\n            'h4': 'heading',\n            'h5': 'heading',\n            'h6': 'heading',\n            'dialog': 'dialog',\n            'progress': 'progressbar',\n            'meter': 'meter',\n            'option': 'option',\n            'menu': 'menu',\n          };\n          \n          // Check with attribute\n          if (tagName === 'a' && el.hasAttribute('href')) return 'link';\n          if (tagName === 'input' && type) {\n            return implicitRoles['input[type=' + type + ']'] || implicitRoles['input'] || 'generic';\n          }\n          \n          return implicitRoles[tagName] || 'generic';\n        }\n        \n        function getProperties(el) {\n          const props = [];\n          \n          // ARIA states\n          const ariaProps = ['aria-checked', 'aria-disabled', 'aria-expanded', 'aria-hidden', 'aria-invalid', 'aria-pressed', 'aria-readonly', 'aria-required', 'aria-selected', 'aria-busy', 'aria-live', 'aria-haspopup', 'aria-controls', 'aria-describedby', 'aria-owns', 'aria-level', 'aria-valuemin', 'aria-valuemax', 'aria-valuenow', 'aria-valuetext'];\n          \n          for (const attr of ariaProps) {\n            const value = el.getAttribute(attr);\n            if (value !== null) {\n              props.push({ name: attr.replace('aria-', ''), value: value === 'true' ? true : value === 'false' ? false : value });\n            }\n          }\n          \n          // Standard properties\n          if (el.disabled !== undefined) props.push({ name: 'disabled', value: !!el.disabled });\n          if (el.readOnly !== undefined) props.push({ name: 'readonly', value: !!el.readOnly });\n          if (el.required !== undefined) props.push({ name: 'required', value: !!el.required });\n          if (el.checked !== undefined) props.push({ name: 'checked', value: !!el.checked });\n          \n          // Tabindex\n          const tabindex = el.getAttribute('tabindex');\n          if (tabindex !== null) props.push({ name: 'tabindex', value: parseInt(tabindex, 10) });\n          \n          return props;\n        }\n        \n        function isVisible(el) {\n          if (!el || el.nodeType !== Node.ELEMENT_NODE) return false;\n          const style = getComputedStyle(el);\n          if (style.display === 'none') return false;\n          if (style.visibility === 'hidden') return false;\n          if (parseFloat(style.opacity) === 0) return false;\n          if (el.getAttribute('aria-hidden') === 'true') return false;\n          return true;\n        }\n        \n        function isFocusable(el) {\n          if (el.disabled) return false;\n          const tabindex = el.getAttribute('tabindex');\n          if (tabindex !== null && parseInt(tabindex, 10) >= 0) return true;\n          const focusable = ['a[href]', 'button', 'input', 'select', 'textarea', '[contenteditable]'];\n          return focusable.some(sel => el.matches(sel));\n        }\n        \n        function buildTree(el, depth = 0, includeHidden = false, maxDepth = 100) {\n          if (!el || depth > maxDepth) return null;\n          if (!includeHidden && !isVisible(el)) return null;\n          \n          stats.total++;\n          \n          const role = getRole(el);\n          const name = getAccessibleName(el);\n          \n          if (landmarkRoles.includes(role)) stats.landmarks++;\n          if (role === 'heading') stats.headings++;\n          if (interactiveRoles.includes(role)) stats.interactive++;\n          \n          const rect = el.getBoundingClientRect();\n          const node = {\n            nodeId: 'ax_' + stats.total,\n            role: role,\n            name: name,\n            description: el.getAttribute('aria-description') || '',\n            value: el.value || el.getAttribute('aria-valuenow') || '',\n            properties: getProperties(el),\n            children: [],\n            isInteractive: interactiveRoles.includes(role),\n            isFocusable: isFocusable(el),\n            isVisible: isVisible(el),\n            isLandmark: landmarkRoles.includes(role),\n            level: role === 'heading' ? parseInt(el.tagName[1]) || 1 : undefined,\n            boundingBox: { x: rect.x, y: rect.y, width: rect.width, height: rect.height }\n          };\n          \n          // Process children\n          for (const child of el.children) {\n            const childNode = buildTree(child, depth + 1, includeHidden, maxDepth);\n            if (childNode) {\n              node.children.push(childNode);\n            }\n          }\n          \n          return node;\n        }\n        \n        const tree = buildTree(document.body, 0, ${includeHidden}, ${maxDepth});\n        return { tree, stats };\n      })()\n    `);\n\n    // Build the tree structure\n    const nodes = new Map<string, AXNode>();\n    \n    const processNode = (raw: RawAXNode, parent?: AXNode): AXNode => {\n      const node: AXNode = {\n        nodeId: raw.nodeId,\n        role: raw.role,\n        name: raw.name,\n        description: raw.description,\n        value: raw.value,\n        properties: raw.properties,\n        children: [],\n        parent,\n        isInteractive: raw.isInteractive,\n        isFocusable: raw.isFocusable,\n        isVisible: raw.isVisible,\n        isLandmark: raw.isLandmark,\n        level: raw.level,\n        boundingBox: raw.boundingBox,\n      };\n      \n      nodes.set(node.nodeId, node);\n      \n      for (const childRaw of raw.children) {\n        node.children.push(processNode(childRaw, node));\n      }\n      \n      return node;\n    };\n\n    const root = processNode(rawTree.tree);\n\n    this.tree = {\n      root,\n      nodes,\n      totalNodes: rawTree.stats.total,\n      interactiveNodes: rawTree.stats.interactive,\n      landmarkCount: rawTree.stats.landmarks,\n      headingCount: rawTree.stats.headings,\n    };\n\n    return this.tree;\n  }\n\n  // =========================================================================\n  // Tree Queries\n  // =========================================================================\n\n  /**\n   * Find nodes by role\n   */\n  async findByRole(role: string): Promise<AXQueryResult> {\n    const tree = this.tree || await this.getTree();\n    const results: AXNode[] = [];\n\n    const search = (node: AXNode) => {\n      if (node.role === role) results.push(node);\n      for (const child of node.children) search(child);\n    };\n\n    search(tree.root);\n    return { nodes: results, count: results.length };\n  }\n\n  /**\n   * Find nodes by name (accessible name)\n   */\n  async findByName(name: string, options: { exact?: boolean } = {}): Promise<AXQueryResult> {\n    const tree = this.tree || await this.getTree();\n    const results: AXNode[] = [];\n    const { exact = false } = options;\n\n    const search = (node: AXNode) => {\n      const match = exact \n        ? node.name === name \n        : node.name.toLowerCase().includes(name.toLowerCase());\n      if (match) results.push(node);\n      for (const child of node.children) search(child);\n    };\n\n    search(tree.root);\n    return { nodes: results, count: results.length };\n  }\n\n  /**\n   * Find all landmarks\n   */\n  async findLandmarks(): Promise<AXQueryResult> {\n    const tree = this.tree || await this.getTree();\n    const results: AXNode[] = [];\n\n    const search = (node: AXNode) => {\n      if (node.isLandmark) results.push(node);\n      for (const child of node.children) search(child);\n    };\n\n    search(tree.root);\n    return { nodes: results, count: results.length };\n  }\n\n  /**\n   * Find all headings\n   */\n  async findHeadings(): Promise<AXQueryResult> {\n    const tree = this.tree || await this.getTree();\n    const results: AXNode[] = [];\n\n    const search = (node: AXNode) => {\n      if (node.role === 'heading') results.push(node);\n      for (const child of node.children) search(child);\n    };\n\n    search(tree.root);\n    \n    // Sort by level\n    results.sort((a, b) => (a.level || 0) - (b.level || 0));\n    return { nodes: results, count: results.length };\n  }\n\n  /**\n   * Find all focusable elements\n   */\n  async findFocusable(): Promise<AXQueryResult> {\n    const tree = this.tree || await this.getTree();\n    const results: AXNode[] = [];\n\n    const search = (node: AXNode) => {\n      if (node.isFocusable) results.push(node);\n      for (const child of node.children) search(child);\n    };\n\n    search(tree.root);\n    return { nodes: results, count: results.length };\n  }\n\n  /**\n   * Find all interactive elements\n   */\n  async findInteractive(): Promise<AXQueryResult> {\n    const tree = this.tree || await this.getTree();\n    const results: AXNode[] = [];\n\n    const search = (node: AXNode) => {\n      if (node.isInteractive) results.push(node);\n      for (const child of node.children) search(child);\n    };\n\n    search(tree.root);\n    return { nodes: results, count: results.length };\n  }\n\n  /**\n   * Query with custom predicate\n   */\n  async query(predicate: (node: AXNode) => boolean): Promise<AXQueryResult> {\n    const tree = this.tree || await this.getTree();\n    const results: AXNode[] = [];\n\n    const search = (node: AXNode) => {\n      if (predicate(node)) results.push(node);\n      for (const child of node.children) search(child);\n    };\n\n    search(tree.root);\n    return { nodes: results, count: results.length };\n  }\n\n  // =========================================================================\n  // Validation\n  // =========================================================================\n\n  /**\n   * Validate the accessibility tree for common issues\n   */\n  async validate(): Promise<AXIssue[]> {\n    const tree = this.tree || await this.getTree();\n    const issues: AXIssue[] = [];\n\n    // Check for missing landmarks\n    const landmarks = await this.findLandmarks();\n    if (!landmarks.nodes.some(n => n.role === 'main')) {\n      issues.push({\n        type: 'error',\n        code: 'missing-main-landmark',\n        message: 'Page is missing a main landmark',\n        suggestion: 'Add <main> or role=\"main\" to the main content area',\n      });\n    }\n    if (!landmarks.nodes.some(n => n.role === 'navigation')) {\n      issues.push({\n        type: 'warning',\n        code: 'missing-navigation-landmark',\n        message: 'Page is missing a navigation landmark',\n        suggestion: 'Add <nav> or role=\"navigation\" to navigation areas',\n      });\n    }\n\n    // Check heading structure\n    const headings = await this.findHeadings();\n    if (headings.count === 0) {\n      issues.push({\n        type: 'error',\n        code: 'no-headings',\n        message: 'Page has no headings',\n        suggestion: 'Add heading elements (h1-h6) to structure the content',\n      });\n    } else {\n      // Check for h1\n      const h1s = headings.nodes.filter(n => n.level === 1);\n      if (h1s.length === 0) {\n        issues.push({\n          type: 'error',\n          code: 'missing-h1',\n          message: 'Page is missing an h1 heading',\n          suggestion: 'Add a single h1 heading as the main page title',\n        });\n      } else if (h1s.length > 1) {\n        issues.push({\n          type: 'warning',\n          code: 'multiple-h1',\n          message: `Page has ${h1s.length} h1 headings`,\n          suggestion: 'Consider using only one h1 per page',\n        });\n      }\n\n      // Check for skipped heading levels\n      let prevLevel = 0;\n      for (const heading of headings.nodes) {\n        const level = heading.level || 0;\n        if (level > prevLevel + 1 && prevLevel > 0) {\n          issues.push({\n            type: 'warning',\n            code: 'skipped-heading-level',\n            message: `Heading level skipped from h${prevLevel} to h${level}`,\n            node: heading,\n            suggestion: 'Use sequential heading levels without skipping',\n          });\n        }\n        prevLevel = level;\n      }\n    }\n\n    // Check for buttons/links without accessible names\n    const validate = (node: AXNode) => {\n      if (node.isInteractive && !node.name) {\n        issues.push({\n          type: 'error',\n          code: 'missing-accessible-name',\n          message: `${node.role} element has no accessible name`,\n          node,\n          suggestion: 'Add aria-label, aria-labelledby, or visible text content',\n        });\n      }\n\n      // Check for images without alt\n      if (node.role === 'img' && !node.name && !node.properties.some(p => p.name === 'hidden' && p.value === true)) {\n        issues.push({\n          type: 'error',\n          code: 'missing-alt-text',\n          message: 'Image has no alt text',\n          node,\n          suggestion: 'Add alt attribute to the image',\n        });\n      }\n\n      for (const child of node.children) validate(child);\n    };\n\n    validate(tree.root);\n\n    return issues;\n  }\n\n  /**\n   * Check if a specific ARIA pattern is correctly implemented\n   */\n  async validatePattern(pattern: 'dialog' | 'menu' | 'tabs' | 'tree' | 'listbox'): Promise<AXIssue[]> {\n    const issues: AXIssue[] = [];\n\n    switch (pattern) {\n      case 'dialog': {\n        const dialogs = await this.findByRole('dialog');\n        for (const dialog of dialogs.nodes) {\n          if (!dialog.name) {\n            issues.push({\n              type: 'error',\n              code: 'dialog-no-label',\n              message: 'Dialog has no accessible name',\n              node: dialog,\n              suggestion: 'Add aria-label or aria-labelledby to the dialog',\n            });\n          }\n          // Check for focus trap\n          const focusable = dialog.children.filter(n => n.isFocusable);\n          if (focusable.length === 0) {\n            issues.push({\n              type: 'warning',\n              code: 'dialog-no-focusable',\n              message: 'Dialog has no focusable elements',\n              node: dialog,\n            });\n          }\n        }\n        break;\n      }\n\n      case 'tabs': {\n        const tablists = await this.findByRole('tablist');\n        for (const tablist of tablists.nodes) {\n          const tabs = tablist.children.filter(n => n.role === 'tab');\n          if (tabs.length === 0) {\n            issues.push({\n              type: 'error',\n              code: 'tablist-no-tabs',\n              message: 'Tablist contains no tabs',\n              node: tablist,\n            });\n          }\n          // Check for selected tab\n          const selected = tabs.filter(t => t.properties.some(p => p.name === 'selected' && p.value === true));\n          if (selected.length === 0 && tabs.length > 0) {\n            issues.push({\n              type: 'warning',\n              code: 'tabs-no-selection',\n              message: 'No tab is marked as selected',\n              node: tablist,\n              suggestion: 'Add aria-selected=\"true\" to the active tab',\n            });\n          }\n        }\n        break;\n      }\n\n      case 'menu': {\n        const menus = await this.findByRole('menu');\n        for (const menu of menus.nodes) {\n          const items = menu.children.filter(n => \n            n.role === 'menuitem' || n.role === 'menuitemcheckbox' || n.role === 'menuitemradio'\n          );\n          if (items.length === 0) {\n            issues.push({\n              type: 'error',\n              code: 'menu-no-items',\n              message: 'Menu contains no menu items',\n              node: menu,\n            });\n          }\n        }\n        break;\n      }\n\n      case 'tree': {\n        const trees = await this.findByRole('tree');\n        for (const tree of trees.nodes) {\n          const items = await this.query(n => n.role === 'treeitem');\n          if (items.count === 0) {\n            issues.push({\n              type: 'error',\n              code: 'tree-no-items',\n              message: 'Tree contains no tree items',\n              node: tree,\n            });\n          }\n        }\n        break;\n      }\n\n      case 'listbox': {\n        const listboxes = await this.findByRole('listbox');\n        for (const listbox of listboxes.nodes) {\n          const options = listbox.children.filter(n => n.role === 'option');\n          if (options.length === 0) {\n            issues.push({\n              type: 'error',\n              code: 'listbox-no-options',\n              message: 'Listbox contains no options',\n              node: listbox,\n            });\n          }\n        }\n        break;\n      }\n    }\n\n    return issues;\n  }\n\n  // =========================================================================\n  // Tree Traversal\n  // =========================================================================\n\n  /**\n   * Get the path from root to a node\n   */\n  getPath(node: AXNode): AXNode[] {\n    const path: AXNode[] = [];\n    let current: AXNode | undefined = node;\n    \n    while (current) {\n      path.unshift(current);\n      current = current.parent;\n    }\n    \n    return path;\n  }\n\n  /**\n   * Get all siblings of a node\n   */\n  getSiblings(node: AXNode): AXNode[] {\n    if (!node.parent) return [];\n    return node.parent.children.filter(n => n.nodeId !== node.nodeId);\n  }\n\n  /**\n   * Get all descendants of a node\n   */\n  getDescendants(node: AXNode): AXNode[] {\n    const descendants: AXNode[] = [];\n    \n    const collect = (n: AXNode) => {\n      for (const child of n.children) {\n        descendants.push(child);\n        collect(child);\n      }\n    };\n    \n    collect(node);\n    return descendants;\n  }\n\n  // =========================================================================\n  // Output Formats\n  // =========================================================================\n\n  /**\n   * Serialize tree to text (for screen reader simulation)\n   */\n  async toText(): Promise<string> {\n    const tree = this.tree || await this.getTree();\n    const lines: string[] = [];\n\n    const visit = (node: AXNode, indent: number = 0) => {\n      if (!node.isVisible) return;\n      \n      const prefix = '  '.repeat(indent);\n      let line = prefix;\n\n      // Role and name\n      if (node.role !== 'generic' || node.name) {\n        line += `[${node.role}]`;\n        if (node.name) line += ` \"${node.name}\"`;\n        if (node.value) line += ` value=\"${node.value}\"`;\n        if (node.level) line += ` level=${node.level}`;\n        \n        // Key properties\n        const keyProps = node.properties.filter(p => \n          ['checked', 'selected', 'expanded', 'disabled'].includes(p.name)\n        );\n        if (keyProps.length > 0) {\n          line += ' (' + keyProps.map(p => `${p.name}=${p.value}`).join(', ') + ')';\n        }\n\n        if (line.trim() !== prefix.trim()) {\n          lines.push(line);\n        }\n      }\n\n      for (const child of node.children) {\n        visit(child, indent + 1);\n      }\n    };\n\n    visit(tree.root);\n    return lines.join('\\n');\n  }\n\n  /**\n   * Serialize tree to JSON\n   */\n  async toJSON(): Promise<string> {\n    const tree = this.tree || await this.getTree();\n    \n    const simplify = (node: AXNode): object => ({\n      role: node.role,\n      name: node.name,\n      ...(node.value && { value: node.value }),\n      ...(node.level && { level: node.level }),\n      ...(node.properties.length > 0 && { properties: node.properties }),\n      ...(node.children.length > 0 && { children: node.children.map(simplify) }),\n    });\n\n    return JSON.stringify(simplify(tree.root), null, 2);\n  }\n\n  /**\n   * Generate accessibility summary report\n   */\n  async generateSummary(): Promise<string> {\n    const tree = this.tree || await this.getTree();\n    const issues = await this.validate();\n    \n    let report = '# Accessibility Tree Summary\\n\\n';\n    \n    report += '## Statistics\\n';\n    report += `- Total nodes: ${tree.totalNodes}\\n`;\n    report += `- Interactive elements: ${tree.interactiveNodes}\\n`;\n    report += `- Landmarks: ${tree.landmarkCount}\\n`;\n    report += `- Headings: ${tree.headingCount}\\n\\n`;\n\n    // Landmarks list\n    const landmarks = await this.findLandmarks();\n    if (landmarks.count > 0) {\n      report += '## Landmarks\\n';\n      for (const landmark of landmarks.nodes) {\n        report += `- ${landmark.role}${landmark.name ? `: \"${landmark.name}\"` : ''}\\n`;\n      }\n      report += '\\n';\n    }\n\n    // Headings outline\n    const headings = await this.findHeadings();\n    if (headings.count > 0) {\n      report += '## Heading Outline\\n';\n      for (const heading of headings.nodes) {\n        const indent = '  '.repeat((heading.level || 1) - 1);\n        report += `${indent}- h${heading.level}: \"${heading.name}\"\\n`;\n      }\n      report += '\\n';\n    }\n\n    // Issues\n    if (issues.length > 0) {\n      report += '## Issues Found\\n';\n      const errors = issues.filter(i => i.type === 'error');\n      const warnings = issues.filter(i => i.type === 'warning');\n      \n      if (errors.length > 0) {\n        report += `\\n### Errors (${errors.length})\\n`;\n        for (const issue of errors) {\n          report += `- **${issue.code}**: ${issue.message}\\n`;\n          if (issue.suggestion) report += `  - Suggestion: ${issue.suggestion}\\n`;\n        }\n      }\n      \n      if (warnings.length > 0) {\n        report += `\\n### Warnings (${warnings.length})\\n`;\n        for (const issue of warnings) {\n          report += `- **${issue.code}**: ${issue.message}\\n`;\n          if (issue.suggestion) report += `  - Suggestion: ${issue.suggestion}\\n`;\n        }\n      }\n    } else {\n      report += '## No Issues Found\\n';\n      report += 'The accessibility tree passes basic validation checks.\\n';\n    }\n\n    return report;\n  }\n}\n\n// ===========================================================================\n// Internal Types\n// ===========================================================================\n\ninterface RawAXNode {\n  nodeId: string;\n  role: string;\n  name: string;\n  description: string;\n  value: string;\n  properties: AXProperty[];\n  children: RawAXNode[];\n  isInteractive: boolean;\n  isFocusable: boolean;\n  isVisible: boolean;\n  isLandmark: boolean;\n  level?: number;\n  boundingBox?: { x: number; y: number; width: number; height: number };\n}\n\n// ===========================================================================\n// Factory\n// ===========================================================================\n\n/**\n * Create accessibility tree manager\n */\nexport function createAccessibilityTreeManager(test: DesktopTestInstance): AccessibilityTreeManager {\n  return new AccessibilityTreeManager(test);\n}\n","/**\n * @flowsight/desktop-test - Accessibility Testing\n *\n * Provides accessibility (a11y) testing capabilities using axe-core standards.\n * Detects WCAG violations and provides remediation suggestions.\n * \n * Integrates with AccessibilityTreeManager for complete a11y testing.\n */\n\nimport type { DesktopTestInstance } from '../types.js';\nimport { AccessibilityTreeManager, type AXIssue } from './accessibility-tree.js';\n\n/**\n * WCAG violation severity levels\n */\nexport type ViolationImpact = 'critical' | 'serious' | 'moderate' | 'minor';\n\n/**\n * Accessibility violation\n */\nexport interface A11yViolation {\n  id: string;\n  impact: ViolationImpact;\n  description: string;\n  help: string;\n  helpUrl: string;\n  nodes: Array<{\n    html: string;\n    target: string[];\n    failureSummary: string;\n  }>;\n}\n\n/**\n * Accessibility test result\n */\nexport interface A11yResult {\n  violations: A11yViolation[];\n  passes: number;\n  incomplete: number;\n  inapplicable: number;\n}\n\n/**\n * Complete accessibility audit result\n */\nexport interface CompleteA11yResult extends A11yResult {\n  treeIssues: AXIssue[];\n  summary: {\n    totalNodes: number;\n    interactiveNodes: number;\n    landmarkCount: number;\n    headingCount: number;\n  };\n}\n\n/**\n * WCAG rules categories\n */\nexport const WCAG_TAGS = {\n  'wcag2a': 'WCAG 2.0 Level A',\n  'wcag2aa': 'WCAG 2.0 Level AA',\n  'wcag2aaa': 'WCAG 2.0 Level AAA',\n  'wcag21a': 'WCAG 2.1 Level A',\n  'wcag21aa': 'WCAG 2.1 Level AA',\n  'best-practice': 'Best Practices',\n} as const;\n\n/**\n * Accessibility Tester\n * \n * Provides methods to check accessibility compliance.\n * Combines axe-core auditing with accessibility tree analysis.\n */\nexport class A11yTester {\n  private test: DesktopTestInstance;\n  private treeManager: AccessibilityTreeManager;\n\n  constructor(test: DesktopTestInstance) {\n    this.test = test;\n    this.treeManager = new AccessibilityTreeManager(test);\n  }\n\n  /**\n   * Get the accessibility tree manager for direct tree access\n   */\n  get tree(): AccessibilityTreeManager {\n    return this.treeManager;\n  }\n\n  /**\n   * Run accessibility audit using axe-core (injected into page)\n   */\n  async audit(options: {\n    tags?: Array<keyof typeof WCAG_TAGS>;\n    includeSelectors?: string[];\n    excludeSelectors?: string[];\n  } = {}): Promise<A11yResult> {\n    const { tags = ['wcag2a', 'wcag2aa'], includeSelectors, excludeSelectors } = options;\n\n    // Inject and run axe-core\n    const result = await this.test.evaluate<A11yResult>(`\n      (async function() {\n        // Load axe-core if not present\n        if (!window.axe) {\n          const script = document.createElement('script');\n          script.src = 'https://cdnjs.cloudflare.com/ajax/libs/axe-core/4.8.2/axe.min.js';\n          document.head.appendChild(script);\n          await new Promise(resolve => script.onload = resolve);\n        }\n\n        // Configure axe\n        const options = {\n          runOnly: {\n            type: 'tag',\n            values: ${JSON.stringify(tags)}\n          }\n        };\n\n        ${includeSelectors ? `options.include = ${JSON.stringify(includeSelectors)};` : ''}\n        ${excludeSelectors ? `options.exclude = ${JSON.stringify(excludeSelectors)};` : ''}\n\n        // Run audit\n        try {\n          const results = await window.axe.run(document, options);\n          return {\n            violations: results.violations.map(v => ({\n              id: v.id,\n              impact: v.impact,\n              description: v.description,\n              help: v.help,\n              helpUrl: v.helpUrl,\n              nodes: v.nodes.map(n => ({\n                html: n.html,\n                target: n.target,\n                failureSummary: n.failureSummary\n              }))\n            })),\n            passes: results.passes.length,\n            incomplete: results.incomplete.length,\n            inapplicable: results.inapplicable.length\n          };\n        } catch (e) {\n          return {\n            violations: [{\n              id: 'axe-error',\n              impact: 'critical',\n              description: 'Failed to run axe-core: ' + e.message,\n              help: 'Check if axe-core loaded correctly',\n              helpUrl: '',\n              nodes: []\n            }],\n            passes: 0,\n            incomplete: 0,\n            inapplicable: 0\n          };\n        }\n      })()\n    `);\n\n    return result;\n  }\n\n  /**\n   * Check for critical violations only\n   */\n  async checkCritical(): Promise<A11yViolation[]> {\n    const result = await this.audit();\n    return result.violations.filter(v => v.impact === 'critical');\n  }\n\n  /**\n   * Check for serious and critical violations\n   */\n  async checkSerious(): Promise<A11yViolation[]> {\n    const result = await this.audit();\n    return result.violations.filter(v => \n      v.impact === 'critical' || v.impact === 'serious'\n    );\n  }\n\n  /**\n   * Check color contrast issues\n   */\n  async checkContrast(): Promise<A11yViolation[]> {\n    const result = await this.audit({ tags: ['wcag2aa'] });\n    return result.violations.filter(v => \n      v.id.includes('contrast') || v.id.includes('color')\n    );\n  }\n\n  /**\n   * Check keyboard navigation issues\n   */\n  async checkKeyboardNav(): Promise<A11yViolation[]> {\n    const result = await this.audit({ tags: ['wcag2a'] });\n    return result.violations.filter(v => \n      v.id.includes('focus') || \n      v.id.includes('keyboard') || \n      v.id.includes('tabindex')\n    );\n  }\n\n  /**\n   * Generate accessibility report\n   */\n  async generateReport(): Promise<string> {\n    const result = await this.audit();\n    \n    let report = '# Accessibility Report\\n\\n';\n    report += `## Summary\\n`;\n    report += `- Violations: ${result.violations.length}\\n`;\n    report += `- Passes: ${result.passes}\\n`;\n    report += `- Incomplete: ${result.incomplete}\\n\\n`;\n\n    if (result.violations.length > 0) {\n      report += '## Violations\\n\\n';\n      \n      // Group by impact\n      const byImpact: Record<ViolationImpact, A11yViolation[]> = {\n        critical: [],\n        serious: [],\n        moderate: [],\n        minor: [],\n      };\n\n      for (const v of result.violations) {\n        byImpact[v.impact].push(v);\n      }\n\n      for (const impact of ['critical', 'serious', 'moderate', 'minor'] as ViolationImpact[]) {\n        const violations = byImpact[impact];\n        if (violations.length > 0) {\n          report += `### ${impact.toUpperCase()} (${violations.length})\\n\\n`;\n          for (const v of violations) {\n            report += `#### ${v.id}\\n`;\n            report += `- ${v.description}\\n`;\n            report += `- Help: ${v.help}\\n`;\n            report += `- URL: ${v.helpUrl}\\n`;\n            report += `- Affected: ${v.nodes.length} elements\\n\\n`;\n          }\n        }\n      }\n    }\n\n    return report;\n  }\n\n  // =========================================================================\n  // Complete Audit (axe-core + tree analysis)\n  // =========================================================================\n\n  /**\n   * Run a complete accessibility audit combining axe-core and tree analysis\n   */\n  async completeAudit(options: {\n    tags?: Array<keyof typeof WCAG_TAGS>;\n    includeSelectors?: string[];\n    excludeSelectors?: string[];\n  } = {}): Promise<CompleteA11yResult> {\n    // Run axe-core audit\n    const axeResult = await this.audit(options);\n    \n    // Get accessibility tree and validate\n    const tree = await this.treeManager.getTree();\n    const treeIssues = await this.treeManager.validate();\n    \n    return {\n      ...axeResult,\n      treeIssues,\n      summary: {\n        totalNodes: tree.totalNodes,\n        interactiveNodes: tree.interactiveNodes,\n        landmarkCount: tree.landmarkCount,\n        headingCount: tree.headingCount,\n      },\n    };\n  }\n\n  /**\n   * Get all landmarks from the page\n   */\n  async getLandmarks() {\n    return this.treeManager.findLandmarks();\n  }\n\n  /**\n   * Get all headings from the page\n   */\n  async getHeadings() {\n    return this.treeManager.findHeadings();\n  }\n\n  /**\n   * Get all focusable elements\n   */\n  async getFocusableElements() {\n    return this.treeManager.findFocusable();\n  }\n\n  /**\n   * Get all interactive elements\n   */\n  async getInteractiveElements() {\n    return this.treeManager.findInteractive();\n  }\n\n  /**\n   * Find elements by ARIA role\n   */\n  async findByRole(role: string) {\n    return this.treeManager.findByRole(role);\n  }\n\n  /**\n   * Find elements by accessible name\n   */\n  async findByName(name: string, options?: { exact?: boolean }) {\n    return this.treeManager.findByName(name, options);\n  }\n\n  /**\n   * Validate a specific ARIA pattern\n   */\n  async validatePattern(pattern: 'dialog' | 'menu' | 'tabs' | 'tree' | 'listbox') {\n    return this.treeManager.validatePattern(pattern);\n  }\n\n  /**\n   * Get the accessibility tree as text (screen reader simulation)\n   */\n  async getTreeAsText(): Promise<string> {\n    return this.treeManager.toText();\n  }\n\n  /**\n   * Get the accessibility tree as JSON\n   */\n  async getTreeAsJSON(): Promise<string> {\n    return this.treeManager.toJSON();\n  }\n\n  /**\n   * Generate complete accessibility summary\n   */\n  async generateCompleteSummary(): Promise<string> {\n    const axeReport = await this.generateReport();\n    const treeSummary = await this.treeManager.generateSummary();\n    \n    return `${axeReport}\\n\\n---\\n\\n${treeSummary}`;\n  }\n\n  // =========================================================================\n  // Specific Checks\n  // =========================================================================\n\n  /**\n   * Check if page has proper heading structure\n   */\n  async checkHeadingStructure(): Promise<{\n    valid: boolean;\n    issues: string[];\n    outline: string;\n  }> {\n    const headings = await this.getHeadings();\n    const issues: string[] = [];\n    \n    // Check for h1\n    const h1s = headings.nodes.filter(n => n.level === 1);\n    if (h1s.length === 0) {\n      issues.push('Page is missing an h1 heading');\n    } else if (h1s.length > 1) {\n      issues.push(`Page has ${h1s.length} h1 headings (should have 1)`);\n    }\n    \n    // Check for skipped levels\n    let prevLevel = 0;\n    for (const heading of headings.nodes) {\n      const level = heading.level || 0;\n      if (level > prevLevel + 1 && prevLevel > 0) {\n        issues.push(`Heading level skipped from h${prevLevel} to h${level}`);\n      }\n      prevLevel = level;\n    }\n    \n    // Generate outline\n    const outline = headings.nodes.map(h => {\n      const indent = '  '.repeat((h.level || 1) - 1);\n      return `${indent}h${h.level}: ${h.name || '(empty)'}`;\n    }).join('\\n');\n    \n    return {\n      valid: issues.length === 0,\n      issues,\n      outline,\n    };\n  }\n\n  /**\n   * Check if page has proper landmark structure\n   */\n  async checkLandmarkStructure(): Promise<{\n    valid: boolean;\n    issues: string[];\n    landmarks: Array<{ role: string; name: string }>;\n  }> {\n    const landmarks = await this.getLandmarks();\n    const issues: string[] = [];\n    \n    // Check for main landmark\n    if (!landmarks.nodes.some(n => n.role === 'main')) {\n      issues.push('Page is missing a main landmark');\n    }\n    \n    // Check for multiple main landmarks\n    const mains = landmarks.nodes.filter(n => n.role === 'main');\n    if (mains.length > 1) {\n      issues.push(`Page has ${mains.length} main landmarks (should have 1)`);\n    }\n    \n    // Check for navigation\n    if (!landmarks.nodes.some(n => n.role === 'navigation')) {\n      issues.push('Page is missing a navigation landmark');\n    }\n    \n    return {\n      valid: issues.length === 0,\n      issues,\n      landmarks: landmarks.nodes.map(n => ({ role: n.role, name: n.name })),\n    };\n  }\n\n  /**\n   * Check for elements with missing accessible names\n   */\n  async checkAccessibleNames(): Promise<{\n    valid: boolean;\n    missingNames: Array<{ role: string; suggestion: string }>;\n  }> {\n    const interactive = await this.getInteractiveElements();\n    const missingNames: Array<{ role: string; suggestion: string }> = [];\n    \n    for (const node of interactive.nodes) {\n      if (!node.name) {\n        missingNames.push({\n          role: node.role,\n          suggestion: `Add aria-label, aria-labelledby, or visible text to ${node.role}`,\n        });\n      }\n    }\n    \n    return {\n      valid: missingNames.length === 0,\n      missingNames,\n    };\n  }\n\n  /**\n   * Simulate screen reader reading order\n   */\n  async getReadingOrder(): Promise<string[]> {\n    const tree = await this.treeManager.getTree();\n    const order: string[] = [];\n    \n    const visit = (node: typeof tree.root) => {\n      if (!node.isVisible) return;\n      \n      // Add meaningful content\n      if (node.name && node.role !== 'generic') {\n        let text = '';\n        \n        // Role announcement\n        if (node.isLandmark) {\n          text += `[${node.role} landmark] `;\n        } else if (node.role === 'heading') {\n          text += `[heading level ${node.level}] `;\n        } else if (node.isInteractive) {\n          text += `[${node.role}] `;\n        }\n        \n        text += node.name;\n        \n        // State announcements\n        const states: string[] = [];\n        for (const prop of node.properties) {\n          if (prop.name === 'checked' && prop.value) states.push('checked');\n          if (prop.name === 'selected' && prop.value) states.push('selected');\n          if (prop.name === 'expanded') states.push(prop.value ? 'expanded' : 'collapsed');\n          if (prop.name === 'disabled' && prop.value) states.push('disabled');\n        }\n        if (states.length > 0) {\n          text += ` (${states.join(', ')})`;\n        }\n        \n        if (text.trim()) order.push(text.trim());\n      }\n      \n      for (const child of node.children) visit(child);\n    };\n    \n    visit(tree.root);\n    return order;\n  }\n}\n\n/**\n * Create accessibility tester for a DesktopTest instance\n */\nexport function createA11yTester(test: DesktopTestInstance): A11yTester {\n  return new A11yTester(test);\n}\n","/**\n * @flowsight/desktop-test - Visual Regression Testing\n *\n * Provides screenshot comparison and visual regression detection.\n * Supports baseline management and diff generation.\n */\n\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport * as crypto from 'crypto';\n\nimport type { DesktopTestInstance } from '../types.js';\n\n/**\n * Visual diff result\n */\nexport interface VisualDiffResult {\n  match: boolean;\n  diffPercentage: number;\n  diffPixels: number;\n  totalPixels: number;\n  baselineExists: boolean;\n  screenshotPath: string;\n  baselinePath: string;\n  diffPath?: string;\n}\n\n/**\n * Visual regression options\n */\nexport interface VisualRegressionOptions {\n  /** Directory to store baselines */\n  baselineDir: string;\n  /** Directory to store current screenshots */\n  outputDir: string;\n  /** Threshold for acceptable diff (0-1) */\n  threshold?: number;\n  /** Update baselines automatically */\n  updateBaselines?: boolean;\n  /** Mask areas to ignore */\n  maskSelectors?: string[];\n}\n\n/**\n * Visual Regression Tester\n */\nexport class VisualRegressionTester {\n  private test: DesktopTestInstance;\n  private options: Required<VisualRegressionOptions>;\n\n  constructor(test: DesktopTestInstance, options: VisualRegressionOptions) {\n    this.test = test;\n    this.options = {\n      threshold: 0.01, // 1% default threshold\n      updateBaselines: false,\n      maskSelectors: [],\n      ...options,\n    };\n\n    // Ensure directories exist\n    if (!fs.existsSync(this.options.baselineDir)) {\n      fs.mkdirSync(this.options.baselineDir, { recursive: true });\n    }\n    if (!fs.existsSync(this.options.outputDir)) {\n      fs.mkdirSync(this.options.outputDir, { recursive: true });\n    }\n  }\n\n  /**\n   * Generate a unique name for a screenshot\n   */\n  private getSnapshotName(name: string): string {\n    const sanitized = name.replace(/[^a-zA-Z0-9-_]/g, '_');\n    return `${sanitized}.png`;\n  }\n\n  /**\n   * Take a screenshot and compare with baseline\n   */\n  async compareScreenshot(\n    name: string,\n    _options: {\n      selector?: string;\n      fullPage?: boolean;\n      mask?: string[];\n    } = {}\n  ): Promise<VisualDiffResult> {\n    const filename = this.getSnapshotName(name);\n    const screenshotPath = path.join(this.options.outputDir, filename);\n    const baselinePath = path.join(this.options.baselineDir, filename);\n    const diffPath = path.join(this.options.outputDir, `diff_${filename}`);\n\n    // Take current screenshot using CDP adapter\n    const screenshot = await this.test.screenshot();\n    const screenshotBuffer = Buffer.from(screenshot, 'base64');\n    fs.writeFileSync(screenshotPath, screenshotBuffer);\n\n    // Check if baseline exists\n    if (!fs.existsSync(baselinePath)) {\n      if (this.options.updateBaselines) {\n        // Create baseline\n        fs.copyFileSync(screenshotPath, baselinePath);\n        return {\n          match: true,\n          diffPercentage: 0,\n          diffPixels: 0,\n          totalPixels: 0,\n          baselineExists: false,\n          screenshotPath,\n          baselinePath,\n        };\n      }\n      return {\n        match: false,\n        diffPercentage: 100,\n        diffPixels: -1,\n        totalPixels: -1,\n        baselineExists: false,\n        screenshotPath,\n        baselinePath,\n      };\n    }\n\n    // Compare images using pixel comparison\n    const diffResult = await this.compareImages(\n      baselinePath,\n      screenshotPath,\n      diffPath\n    );\n\n    // Update baseline if requested and diff exceeds threshold\n    if (this.options.updateBaselines && diffResult.diffPercentage > this.options.threshold) {\n      fs.copyFileSync(screenshotPath, baselinePath);\n    }\n\n    return {\n      ...diffResult,\n      baselineExists: true,\n      screenshotPath,\n      baselinePath,\n      diffPath: diffResult.diffPixels > 0 ? diffPath : undefined,\n    };\n  }\n\n  /**\n   * Compare two images using pixel-by-pixel comparison\n   */\n  private async compareImages(\n    baselinePath: string,\n    currentPath: string,\n    _diffPath: string\n  ): Promise<{ match: boolean; diffPercentage: number; diffPixels: number; totalPixels: number }> {\n    try {\n      // Use jimp for image comparison\n      const { Jimp } = await import('jimp');\n      \n      const baseline = await Jimp.read(baselinePath);\n      const current = await Jimp.read(currentPath);\n\n      // Simple hash comparison for now\n      // Full pixel comparison can be enabled when jimp types are stable\n      const baselineHash = baseline.hash();\n      const currentHash = current.hash();\n      \n      const match = baselineHash === currentHash;\n      \n      return {\n        match,\n        diffPercentage: match ? 0 : 100,\n        diffPixels: match ? 0 : -1,\n        totalPixels: baseline.width * baseline.height,\n      };\n    } catch {\n      // Fallback to hash comparison\n      const baselineHash = this.hashFile(baselinePath);\n      const currentHash = this.hashFile(currentPath);\n      const match = baselineHash === currentHash;\n      \n      return {\n        match,\n        diffPercentage: match ? 0 : 100,\n        diffPixels: match ? 0 : -1,\n        totalPixels: -1,\n      };\n    }\n  }\n\n  /**\n   * Hash a file for quick comparison\n   */\n  private hashFile(filePath: string): string {\n    const buffer = fs.readFileSync(filePath);\n    return crypto.createHash('md5').update(buffer).digest('hex');\n  }\n\n  /**\n   * Compare full page screenshot\n   */\n  async compareFullPage(name: string): Promise<VisualDiffResult> {\n    return this.compareScreenshot(name, { fullPage: true });\n  }\n\n  /**\n   * Compare specific element\n   */\n  async compareElement(name: string, selector: string): Promise<VisualDiffResult> {\n    // First scroll element into view\n    await this.test.evaluate(`\n      document.querySelector('${selector}')?.scrollIntoView({ block: 'center' });\n    `);\n    await this.test.wait(300);\n    \n    return this.compareScreenshot(name, { selector });\n  }\n\n  /**\n   * Update all baselines\n   */\n  async updateAllBaselines(): Promise<void> {\n    const currentFiles = fs.readdirSync(this.options.outputDir)\n      .filter(f => f.endsWith('.png') && !f.startsWith('diff_'));\n    \n    for (const file of currentFiles) {\n      const src = path.join(this.options.outputDir, file);\n      const dest = path.join(this.options.baselineDir, file);\n      fs.copyFileSync(src, dest);\n    }\n  }\n\n  /**\n   * Get list of baselines\n   */\n  getBaselines(): string[] {\n    if (!fs.existsSync(this.options.baselineDir)) {\n      return [];\n    }\n    return fs.readdirSync(this.options.baselineDir)\n      .filter(f => f.endsWith('.png'));\n  }\n\n  /**\n   * Delete a baseline\n   */\n  deleteBaseline(name: string): boolean {\n    const filename = this.getSnapshotName(name);\n    const baselinePath = path.join(this.options.baselineDir, filename);\n    if (fs.existsSync(baselinePath)) {\n      fs.unlinkSync(baselinePath);\n      return true;\n    }\n    return false;\n  }\n}\n\n/**\n * Create visual regression tester\n */\nexport function createVisualRegressionTester(\n  test: DesktopTestInstance,\n  options: VisualRegressionOptions\n): VisualRegressionTester {\n  return new VisualRegressionTester(test, options);\n}\n","/**\n * @flowsight/desktop-test - Interaction Testing\n *\n * Provides comprehensive interaction testing capabilities:\n * - Keyboard navigation\n * - Drag and drop\n * - Gestures\n * - Focus management\n * - Responsive testing\n */\n\nimport type { DesktopTestInstance, ElementLocator } from '../types.js';\n\n/**\n * Keyboard navigation test result\n */\nexport interface KeyboardNavResult {\n  success: boolean;\n  focusPath: string[];\n  missedElements: string[];\n  trapDetected: boolean;\n  issues: string[];\n}\n\n/**\n * Drag operation result\n */\nexport interface DragResult {\n  success: boolean;\n  startPosition: { x: number; y: number };\n  endPosition: { x: number; y: number };\n  distance: number;\n}\n\n/**\n * Responsive test result\n */\nexport interface ResponsiveResult {\n  viewport: { width: number; height: number };\n  issues: string[];\n  overflowElements: string[];\n  hiddenElements: string[];\n}\n\n/**\n * Interaction Tester\n */\nexport class InteractionTester {\n  private test: DesktopTestInstance;\n\n  constructor(test: DesktopTestInstance) {\n    this.test = test;\n  }\n\n  // ===========================================================================\n  // Keyboard Navigation\n  // ===========================================================================\n\n  /**\n   * Test Tab key navigation through focusable elements\n   */\n  async testTabNavigation(maxTabs: number = 50): Promise<KeyboardNavResult> {\n    const focusPath: string[] = [];\n    const issues: string[] = [];\n    let trapDetected = false;\n\n    // Get initial focus\n    const initialFocus = await this.test.evaluate<string>(`\n      document.activeElement?.tagName + (document.activeElement?.id ? '#' + document.activeElement.id : '')\n    `);\n    focusPath.push(initialFocus);\n\n    // Press Tab repeatedly\n    for (let i = 0; i < maxTabs; i++) {\n      await this.test.press('Tab');\n      await this.test.wait(100);\n\n      const currentFocus = await this.test.evaluate<string>(`\n        document.activeElement?.tagName + (document.activeElement?.id ? '#' + document.activeElement.id : '')\n      `);\n\n      // Check for focus trap\n      if (focusPath.slice(-3).every(f => f === currentFocus)) {\n        trapDetected = true;\n        issues.push(`Focus trap detected at: ${currentFocus}`);\n        break;\n      }\n\n      focusPath.push(currentFocus);\n\n      // Check if we've cycled back to start\n      if (currentFocus === initialFocus && i > 0) {\n        break;\n      }\n    }\n\n    return {\n      success: !trapDetected && focusPath.length > 1,\n      focusPath,\n      missedElements: [], // Would need expected elements to check\n      trapDetected,\n      issues,\n    };\n  }\n\n  /**\n   * Test arrow key navigation in a container\n   */\n  async testArrowNavigation(\n    container: string | ElementLocator,\n    direction: 'horizontal' | 'vertical' | 'both' = 'both'\n  ): Promise<KeyboardNavResult> {\n    const focusPath: string[] = [];\n    const issues: string[] = [];\n\n    // Focus the container\n    await this.test.click(container);\n    await this.test.wait(100);\n\n    // Test arrow keys based on direction\n    const keys = direction === 'horizontal' \n      ? ['ArrowRight', 'ArrowRight', 'ArrowLeft'] \n      : direction === 'vertical'\n        ? ['ArrowDown', 'ArrowDown', 'ArrowUp']\n        : ['ArrowDown', 'ArrowRight', 'ArrowUp', 'ArrowLeft'];\n\n    for (const key of keys) {\n      await this.test.press(key);\n      await this.test.wait(100);\n\n      const currentFocus = await this.test.evaluate<string>(`\n        document.activeElement?.tagName + \n        (document.activeElement?.getAttribute('data-testid') || \n         document.activeElement?.textContent?.slice(0, 20) || '')\n      `);\n      focusPath.push(`${key} -> ${currentFocus}`);\n    }\n\n    return {\n      success: focusPath.length > 0,\n      focusPath,\n      missedElements: [],\n      trapDetected: false,\n      issues,\n    };\n  }\n\n  /**\n   * Test Escape key closes modal/dialog\n   */\n  async testEscapeCloses(modalSelector: string): Promise<boolean> {\n    // Check if modal is visible\n    const initialVisible = await this.test.isVisible(modalSelector);\n    if (!initialVisible) {\n      return true; // Already closed, consider success\n    }\n\n    // Press Escape\n    await this.test.press('Escape');\n    await this.test.wait(300);\n\n    // Check if modal is now hidden\n    const afterVisible = await this.test.isVisible(modalSelector);\n    return !afterVisible;\n  }\n\n  // ===========================================================================\n  // Drag and Drop\n  // ===========================================================================\n\n  /**\n   * Perform drag and drop operation\n   */\n  async dragAndDrop(\n    source: string | ElementLocator,\n    target: string | ElementLocator\n  ): Promise<DragResult> {\n    // Get source position\n    const sourcePos = await this.test.evaluate<{ x: number; y: number } | null>(`\n      (function() {\n        const el = document.querySelector('${source}');\n        if (!el) return null;\n        const rect = el.getBoundingClientRect();\n        return { x: rect.x + rect.width/2, y: rect.y + rect.height/2 };\n      })()\n    `);\n\n    // Get target position\n    const targetPos = await this.test.evaluate<{ x: number; y: number } | null>(`\n      (function() {\n        const el = document.querySelector('${target}');\n        if (!el) return null;\n        const rect = el.getBoundingClientRect();\n        return { x: rect.x + rect.width/2, y: rect.y + rect.height/2 };\n      })()\n    `);\n\n    if (!sourcePos || !targetPos) {\n      return {\n        success: false,\n        startPosition: sourcePos || { x: 0, y: 0 },\n        endPosition: targetPos || { x: 0, y: 0 },\n        distance: 0,\n      };\n    }\n\n    // Perform drag\n    await this.test.drag(source, target);\n\n    const distance = Math.sqrt(\n      Math.pow(targetPos.x - sourcePos.x, 2) + \n      Math.pow(targetPos.y - sourcePos.y, 2)\n    );\n\n    return {\n      success: true,\n      startPosition: sourcePos,\n      endPosition: targetPos,\n      distance,\n    };\n  }\n\n  /**\n   * Test panel resize by dragging\n   */\n  async testPanelResize(\n    resizeHandle: string | ElementLocator,\n    deltaX: number,\n    deltaY: number\n  ): Promise<{ success: boolean; beforeWidth: number; afterWidth: number }> {\n    // Get initial size\n    const beforeSize = await this.test.evaluate<{ width: number; height: number }>(`\n      (function() {\n        const handle = document.querySelector('${resizeHandle}');\n        const panel = handle?.parentElement;\n        return panel ? { \n          width: panel.offsetWidth, \n          height: panel.offsetHeight \n        } : { width: 0, height: 0 };\n      })()\n    `);\n\n    // Drag resize handle\n    await this.test.evaluate(`\n      (async function() {\n        const handle = document.querySelector('${resizeHandle}');\n        if (!handle) return;\n        \n        const rect = handle.getBoundingClientRect();\n        const startX = rect.x + rect.width/2;\n        const startY = rect.y + rect.height/2;\n        \n        // Simulate mouse events\n        handle.dispatchEvent(new MouseEvent('mousedown', { \n          clientX: startX, clientY: startY, bubbles: true \n        }));\n        \n        await new Promise(r => setTimeout(r, 50));\n        \n        document.dispatchEvent(new MouseEvent('mousemove', { \n          clientX: startX + ${deltaX}, \n          clientY: startY + ${deltaY}, \n          bubbles: true \n        }));\n        \n        await new Promise(r => setTimeout(r, 50));\n        \n        document.dispatchEvent(new MouseEvent('mouseup', { \n          clientX: startX + ${deltaX}, \n          clientY: startY + ${deltaY}, \n          bubbles: true \n        }));\n      })()\n    `);\n\n    await this.test.wait(300);\n\n    // Get after size\n    const afterSize = await this.test.evaluate<{ width: number; height: number }>(`\n      (function() {\n        const handle = document.querySelector('${resizeHandle}');\n        const panel = handle?.parentElement;\n        return panel ? { \n          width: panel.offsetWidth, \n          height: panel.offsetHeight \n        } : { width: 0, height: 0 };\n      })()\n    `);\n\n    return {\n      success: beforeSize.width !== afterSize.width || beforeSize.height !== afterSize.height,\n      beforeWidth: beforeSize.width,\n      afterWidth: afterSize.width,\n    };\n  }\n\n  // ===========================================================================\n  // Responsive Testing\n  // ===========================================================================\n\n  /**\n   * Test at different viewport sizes\n   */\n  async testResponsive(viewports: Array<{ width: number; height: number; name: string }>): Promise<ResponsiveResult[]> {\n    const results: ResponsiveResult[] = [];\n\n    for (const viewport of viewports) {\n      // Resize viewport (via evaluate or CDP)\n      await this.test.evaluate(`\n        window.resizeTo(${viewport.width}, ${viewport.height});\n      `);\n      await this.test.wait(500);\n\n      // Check for issues\n      const issues: string[] = [];\n      \n      // Check for horizontal overflow\n      const overflowElements = await this.test.evaluate<string[]>(`\n        Array.from(document.querySelectorAll('*')).filter(el => {\n          return el.scrollWidth > el.clientWidth;\n        }).map(el => el.tagName + (el.id ? '#' + el.id : '')).slice(0, 10);\n      `);\n\n      if (overflowElements.length > 0) {\n        issues.push(`Horizontal overflow detected in ${overflowElements.length} elements`);\n      }\n\n      // Check for hidden critical elements\n      const hiddenElements = await this.test.evaluate<string[]>(`\n        Array.from(document.querySelectorAll('[data-testid], button, a, input')).filter(el => {\n          const rect = el.getBoundingClientRect();\n          return rect.width === 0 || rect.height === 0 || \n                 rect.right < 0 || rect.bottom < 0;\n        }).map(el => el.tagName + (el.getAttribute('data-testid') || '')).slice(0, 10);\n      `);\n\n      results.push({\n        viewport: { width: viewport.width, height: viewport.height },\n        issues,\n        overflowElements,\n        hiddenElements,\n      });\n    }\n\n    return results;\n  }\n\n  // ===========================================================================\n  // Focus Management\n  // ===========================================================================\n\n  /**\n   * Check if focus is visible (focus indicator)\n   */\n  async checkFocusVisible(selector: string): Promise<boolean> {\n    await this.test.click(selector);\n    await this.test.wait(100);\n\n    return this.test.evaluate<boolean>(`\n      (function() {\n        const el = document.querySelector('${selector}');\n        if (!el) return false;\n        \n        const styles = getComputedStyle(el);\n        const focusStyles = getComputedStyle(el, ':focus');\n        \n        // Check for visible focus indicator\n        return styles.outlineWidth !== '0px' || \n               styles.boxShadow !== 'none' ||\n               el.classList.contains('focus-visible') ||\n               el.matches(':focus-visible');\n      })()\n    `);\n  }\n\n  /**\n   * Test focus order matches visual order\n   */\n  async testFocusOrder(expectedOrder: string[]): Promise<{\n    matches: boolean;\n    actualOrder: string[];\n  }> {\n    const actualOrder: string[] = [];\n\n    for (let i = 0; i < expectedOrder.length; i++) {\n      await this.test.press('Tab');\n      await this.test.wait(100);\n\n      const focused = await this.test.evaluate<string>(`\n        document.activeElement?.getAttribute('data-testid') || \n        document.activeElement?.id ||\n        document.activeElement?.tagName\n      `);\n      actualOrder.push(focused);\n    }\n\n    const matches = expectedOrder.every((expected, i) => \n      actualOrder[i]?.includes(expected)\n    );\n\n    return { matches, actualOrder };\n  }\n}\n\n/**\n * Common viewport sizes for responsive testing\n */\nexport const COMMON_VIEWPORTS = [\n  { width: 1920, height: 1080, name: 'Desktop HD' },\n  { width: 1440, height: 900, name: 'Desktop' },\n  { width: 1280, height: 720, name: 'Laptop' },\n  { width: 1024, height: 768, name: 'Tablet Landscape' },\n  { width: 768, height: 1024, name: 'Tablet Portrait' },\n  { width: 375, height: 667, name: 'Mobile' },\n];\n\n/**\n * Create interaction tester\n */\nexport function createInteractionTester(test: DesktopTestInstance): InteractionTester {\n  return new InteractionTester(test);\n}\n","/**\n * RefManager - Element Reference Management System\n * \n * Inspired by agent-browser's ref mechanism.\n * Provides stable element references (@e1, @e2, ...) for reliable test automation.\n */\n\nimport type { DesktopTest } from './desktop-test';\n\n/** Ref format: @e1, @e2, @e3, ... */\nexport type ElementRef = `@e${number}`;\n\n/** Element with ref information */\nexport interface RefElement {\n  /** Unique reference like @e1, @e2 */\n  ref: ElementRef;\n  /** Element role (button, textbox, link, etc.) */\n  role: string;\n  /** Accessible name */\n  name: string;\n  /** Element tag name */\n  tagName: string;\n  /** CSS selector for fallback */\n  selector: string;\n  /** XPath for fallback */\n  xpath: string;\n  /** Whether element is visible */\n  visible: boolean;\n  /** Whether element is enabled */\n  enabled: boolean;\n  /** Whether element is focusable */\n  focusable: boolean;\n  /** Bounding box */\n  bounds?: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n  };\n  /** Text content */\n  text?: string;\n  /** Value (for inputs) */\n  value?: string;\n  /** Placeholder text */\n  placeholder?: string;\n  /** Additional attributes */\n  attributes: Record<string, string>;\n  /** nth index for duplicate elements */\n  nthIndex?: number;\n}\n\n/** Snapshot result with refs */\nexport interface RefSnapshot {\n  /** Timestamp when snapshot was taken */\n  timestamp: number;\n  /** Page URL */\n  url: string;\n  /** Page title */\n  title: string;\n  /** All interactive elements with refs */\n  elements: RefElement[];\n  /** Raw accessibility tree (optional) */\n  rawTree?: unknown;\n  /** Snapshot ID for tracking */\n  snapshotId: string;\n}\n\n/** Snapshot options */\nexport interface SnapshotOptions {\n  /** Include only interactive elements (default: true) */\n  interactiveOnly?: boolean;\n  /** Include hidden elements (default: false) */\n  includeHidden?: boolean;\n  /** Maximum depth to traverse (default: unlimited) */\n  maxDepth?: number;\n  /** Include raw accessibility tree (default: false) */\n  includeRawTree?: boolean;\n  /** Compact mode - less details (default: false) */\n  compact?: boolean;\n}\n\n/** Ref resolution result */\nexport interface RefResolution {\n  /** The resolved element */\n  element: RefElement;\n  /** How the element was found */\n  method: 'ref' | 'selector' | 'xpath' | 'text';\n  /** Whether the ref is still valid */\n  valid: boolean;\n}\n\n/**\n * RefManager - Manages element references for stable test automation\n * \n * @example\n * ```typescript\n * const refManager = new RefManager(test);\n * \n * // Take snapshot and get refs\n * const snapshot = await refManager.snapshot();\n * console.log(snapshot.elements); // [{ref: '@e1', role: 'button', name: 'Submit'}, ...]\n * \n * // Use refs for operations\n * await refManager.click('@e1');\n * await refManager.fill('@e3', 'hello');\n * ```\n */\nexport class RefManager {\n  private test: DesktopTest;\n  private currentSnapshot: RefSnapshot | null = null;\n  private refMap: Map<ElementRef, RefElement> = new Map();\n  private snapshotCounter = 0;\n\n  constructor(test: DesktopTest) {\n    this.test = test;\n  }\n\n  /**\n   * Take a snapshot of the page and generate refs for interactive elements\n   */\n  async snapshot(options: SnapshotOptions = {}): Promise<RefSnapshot> {\n    const {\n      interactiveOnly = true,\n      includeHidden = false,\n      maxDepth,\n      includeRawTree = false,\n      compact = false\n    } = options;\n\n    // Get page info\n    const url = await this.test.getUrl();\n    const title = await this.test.getTitle();\n\n    // Get elements via accessibility tree or DOM\n    const elements = await this.collectElements({\n      interactiveOnly,\n      includeHidden,\n      maxDepth\n    });\n\n    // Generate refs for elements\n    const refElements = this.assignRefs(elements, compact);\n\n    // Create snapshot\n    const snapshot: RefSnapshot = {\n      timestamp: Date.now(),\n      url,\n      title,\n      elements: refElements,\n      snapshotId: `snapshot-${++this.snapshotCounter}`\n    };\n\n    if (includeRawTree) {\n      try {\n        const rawSnapshot = await this.test.snapshot();\n        snapshot.rawTree = rawSnapshot;\n      } catch {\n        // Ignore if raw snapshot fails\n      }\n    }\n\n    // Update current snapshot and ref map\n    this.currentSnapshot = snapshot;\n    this.refMap.clear();\n    for (const element of refElements) {\n      this.refMap.set(element.ref, element);\n    }\n\n    return snapshot;\n  }\n\n  /**\n   * Check if a string is a valid ref format\n   */\n  isRef(value: string): value is ElementRef {\n    return /^@e\\d+$/.test(value);\n  }\n\n  /**\n   * Parse ref to get the index\n   */\n  parseRef(ref: ElementRef): number {\n    const match = ref.match(/^@e(\\d+)$/);\n    if (!match) {\n      throw new Error(`Invalid ref format: ${ref}`);\n    }\n    return parseInt(match[1], 10);\n  }\n\n  /**\n   * Get element by ref\n   */\n  getElement(ref: ElementRef): RefElement | undefined {\n    return this.refMap.get(ref);\n  }\n\n  /**\n   * Resolve a ref or selector to an element\n   */\n  async resolve(refOrSelector: string): Promise<RefResolution | null> {\n    // If it's a ref, look up in current snapshot\n    if (this.isRef(refOrSelector)) {\n      const element = this.refMap.get(refOrSelector);\n      if (element) {\n        // Verify element still exists\n        const exists = await this.verifyElement(element);\n        return {\n          element,\n          method: 'ref',\n          valid: exists\n        };\n      }\n      return null;\n    }\n\n    // Otherwise, find by selector\n    const elements = await this.collectElements({ interactiveOnly: false, includeHidden: true });\n    const found = elements.find(e => \n      e.selector === refOrSelector ||\n      e.xpath === refOrSelector ||\n      e.text === refOrSelector ||\n      e.name === refOrSelector\n    );\n\n    if (found) {\n      const refElement = this.assignRefs([found], false)[0];\n      return {\n        element: refElement,\n        method: 'selector',\n        valid: true\n      };\n    }\n\n    return null;\n  }\n\n  /**\n   * Get the locator string for a ref (for use with Playwright/CDP)\n   */\n  async getLocator(ref: ElementRef): Promise<string> {\n    const element = this.refMap.get(ref);\n    if (!element) {\n      throw new Error(`Ref not found: ${ref}. Did you take a snapshot first?`);\n    }\n\n    // Prefer role-based locator\n    if (element.role && element.name) {\n      return `role=${element.role}[name=\"${element.name}\"]`;\n    }\n\n    // Fall back to test-id\n    if (element.attributes['data-testid']) {\n      return `[data-testid=\"${element.attributes['data-testid']}\"]`;\n    }\n\n    // Fall back to CSS selector\n    return element.selector;\n  }\n\n  /**\n   * Click an element by ref\n   */\n  async click(ref: ElementRef): Promise<void> {\n    const locator = await this.getLocator(ref);\n    await this.test.click(locator);\n  }\n\n  /**\n   * Double-click an element by ref\n   */\n  async dblclick(ref: ElementRef): Promise<void> {\n    const locator = await this.getLocator(ref);\n    await this.test.dblclick(locator);\n  }\n\n  /**\n   * Right-click an element by ref\n   */\n  async rightClick(ref: ElementRef): Promise<void> {\n    const locator = await this.getLocator(ref);\n    await this.test.rightClick(locator);\n  }\n\n  /**\n   * Fill an input by ref\n   */\n  async fill(ref: ElementRef, value: string): Promise<void> {\n    const locator = await this.getLocator(ref);\n    await this.test.fill(locator, value);\n  }\n\n  /**\n   * Type text into an element by ref\n   */\n  async type(ref: ElementRef, text: string): Promise<void> {\n    const locator = await this.getLocator(ref);\n    await this.test.type(locator, text);\n  }\n\n  /**\n   * Hover over an element by ref\n   */\n  async hover(ref: ElementRef): Promise<void> {\n    const locator = await this.getLocator(ref);\n    await this.test.hover(locator);\n  }\n\n  /**\n   * Get text from an element by ref\n   */\n  async getText(ref: ElementRef): Promise<string> {\n    const locator = await this.getLocator(ref);\n    return this.test.getText(locator);\n  }\n\n  /**\n   * Get value from an element by ref\n   */\n  async getValue(ref: ElementRef): Promise<string> {\n    const locator = await this.getLocator(ref);\n    return this.test.getValue(locator);\n  }\n\n  /**\n   * Check if element is visible by ref\n   */\n  async isVisible(ref: ElementRef): Promise<boolean> {\n    const locator = await this.getLocator(ref);\n    return this.test.isVisible(locator);\n  }\n\n  /**\n   * Invalidate current snapshot (call after page navigation or significant changes)\n   */\n  invalidate(): void {\n    this.currentSnapshot = null;\n    this.refMap.clear();\n  }\n\n  /**\n   * Get current snapshot\n   */\n  getCurrentSnapshot(): RefSnapshot | null {\n    return this.currentSnapshot;\n  }\n\n  /**\n   * Find elements by role\n   */\n  findByRole(role: string): RefElement[] {\n    return Array.from(this.refMap.values()).filter(e => e.role === role);\n  }\n\n  /**\n   * Find elements by name (partial match)\n   */\n  findByName(name: string): RefElement[] {\n    const lowerName = name.toLowerCase();\n    return Array.from(this.refMap.values()).filter(e => \n      e.name.toLowerCase().includes(lowerName)\n    );\n  }\n\n  /**\n   * Find elements by text (partial match)\n   */\n  findByText(text: string): RefElement[] {\n    const lowerText = text.toLowerCase();\n    return Array.from(this.refMap.values()).filter(e => \n      e.text?.toLowerCase().includes(lowerText)\n    );\n  }\n\n  /**\n   * Get all interactive elements (buttons, links, inputs, etc.)\n   */\n  getInteractive(): RefElement[] {\n    const interactiveRoles = new Set([\n      'button', 'link', 'textbox', 'checkbox', 'radio',\n      'combobox', 'listbox', 'option', 'menuitem', 'tab',\n      'slider', 'spinbutton', 'switch', 'searchbox'\n    ]);\n    return Array.from(this.refMap.values()).filter(e => \n      interactiveRoles.has(e.role) || e.focusable\n    );\n  }\n\n  /**\n   * Format snapshot as text (for AI/LLM consumption)\n   */\n  toText(options: { includeRefs?: boolean; maxElements?: number } = {}): string {\n    const { includeRefs = true, maxElements = 100 } = options;\n    \n    if (!this.currentSnapshot) {\n      return 'No snapshot available. Call snapshot() first.';\n    }\n\n    const lines: string[] = [\n      `Page: ${this.currentSnapshot.title}`,\n      `URL: ${this.currentSnapshot.url}`,\n      `Elements (${this.currentSnapshot.elements.length}):`,\n      ''\n    ];\n\n    const elements = this.currentSnapshot.elements.slice(0, maxElements);\n    for (const element of elements) {\n      const ref = includeRefs ? `${element.ref} ` : '';\n      const name = element.name ? ` \"${element.name}\"` : '';\n      const text = element.text && element.text !== element.name ? ` [${element.text.slice(0, 50)}]` : '';\n      lines.push(`  ${ref}${element.role}${name}${text}`);\n    }\n\n    if (this.currentSnapshot.elements.length > maxElements) {\n      lines.push(`  ... and ${this.currentSnapshot.elements.length - maxElements} more`);\n    }\n\n    return lines.join('\\n');\n  }\n\n  /**\n   * Format snapshot as JSON\n   */\n  toJSON(): string {\n    if (!this.currentSnapshot) {\n      return '{}';\n    }\n    return JSON.stringify(this.currentSnapshot, null, 2);\n  }\n\n  // Private methods\n\n  private async collectElements(options: {\n    interactiveOnly: boolean;\n    includeHidden: boolean;\n    maxDepth?: number;\n  }): Promise<Partial<RefElement>[]> {\n    const { interactiveOnly, includeHidden } = options;\n\n    // Use evaluate to collect elements from the page\n    const elements = await this.test.evaluate(`\n      (() => {\n        const interactiveRoles = new Set([\n          'button', 'link', 'textbox', 'checkbox', 'radio',\n          'combobox', 'listbox', 'option', 'menuitem', 'menuitemcheckbox',\n          'menuitemradio', 'tab', 'tabpanel', 'slider', 'spinbutton',\n          'switch', 'searchbox', 'treeitem', 'gridcell'\n        ]);\n        \n        const interactiveTags = new Set([\n          'A', 'BUTTON', 'INPUT', 'SELECT', 'TEXTAREA',\n          'DETAILS', 'SUMMARY'\n        ]);\n        \n        const elements = [];\n        const walker = document.createTreeWalker(\n          document.body,\n          NodeFilter.SHOW_ELEMENT,\n          null\n        );\n        \n        let node;\n        while (node = walker.nextNode()) {\n          const el = node;\n          const role = el.getAttribute('role') || el.tagName.toLowerCase();\n          const isInteractive = interactiveRoles.has(role) || \n                               interactiveTags.has(el.tagName) ||\n                               el.hasAttribute('onclick') ||\n                               el.hasAttribute('tabindex');\n          \n          if (${interactiveOnly} && !isInteractive) continue;\n          \n          const rect = el.getBoundingClientRect();\n          const isVisible = rect.width > 0 && rect.height > 0 &&\n                           getComputedStyle(el).visibility !== 'hidden' &&\n                           getComputedStyle(el).display !== 'none';\n          \n          if (!${includeHidden} && !isVisible) continue;\n          \n          const name = el.getAttribute('aria-label') ||\n                      el.getAttribute('title') ||\n                      el.getAttribute('alt') ||\n                      (el.tagName === 'INPUT' ? el.placeholder : '') ||\n                      '';\n          \n          elements.push({\n            role: role,\n            name: name,\n            tagName: el.tagName.toLowerCase(),\n            selector: generateSelector(el),\n            xpath: generateXPath(el),\n            visible: isVisible,\n            enabled: !el.disabled,\n            focusable: el.tabIndex >= 0 || isInteractive,\n            bounds: {\n              x: Math.round(rect.x),\n              y: Math.round(rect.y),\n              width: Math.round(rect.width),\n              height: Math.round(rect.height)\n            },\n            text: el.textContent?.trim().slice(0, 100) || '',\n            value: el.value || '',\n            placeholder: el.placeholder || '',\n            attributes: {\n              id: el.id || '',\n              class: el.className || '',\n              'data-testid': el.getAttribute('data-testid') || '',\n              href: el.getAttribute('href') || '',\n              type: el.getAttribute('type') || ''\n            }\n          });\n        }\n        \n        function generateSelector(el) {\n          if (el.id) return '#' + el.id;\n          if (el.getAttribute('data-testid')) \n            return '[data-testid=\"' + el.getAttribute('data-testid') + '\"]';\n          \n          let selector = el.tagName.toLowerCase();\n          if (el.className) {\n            const classes = el.className.split(' ').filter(c => c && !c.includes(':'));\n            if (classes.length > 0) {\n              selector += '.' + classes.slice(0, 2).join('.');\n            }\n          }\n          return selector;\n        }\n        \n        function generateXPath(el) {\n          const parts = [];\n          let current = el;\n          while (current && current.nodeType === Node.ELEMENT_NODE) {\n            let index = 1;\n            let sibling = current.previousSibling;\n            while (sibling) {\n              if (sibling.nodeType === Node.ELEMENT_NODE && \n                  sibling.tagName === current.tagName) {\n                index++;\n              }\n              sibling = sibling.previousSibling;\n            }\n            parts.unshift(current.tagName.toLowerCase() + '[' + index + ']');\n            current = current.parentNode;\n          }\n          return '/' + parts.join('/');\n        }\n        \n        return elements;\n      })()\n    `);\n\n    return elements as Partial<RefElement>[];\n  }\n\n  private assignRefs(elements: Partial<RefElement>[], compact: boolean): RefElement[] {\n    const result: RefElement[] = [];\n    const roleCount: Map<string, number> = new Map();\n\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      const role = element.role || 'generic';\n      \n      // Track nth index for duplicate roles\n      const count = roleCount.get(role) || 0;\n      roleCount.set(role, count + 1);\n\n      const refElement: RefElement = {\n        ref: `@e${i + 1}` as ElementRef,\n        role,\n        name: element.name || '',\n        tagName: element.tagName || 'div',\n        selector: element.selector || '',\n        xpath: element.xpath || '',\n        visible: element.visible ?? true,\n        enabled: element.enabled ?? true,\n        focusable: element.focusable ?? false,\n        attributes: element.attributes || {},\n        nthIndex: count > 0 ? count : undefined\n      };\n\n      if (!compact) {\n        refElement.bounds = element.bounds;\n        refElement.text = element.text;\n        refElement.value = element.value;\n        refElement.placeholder = element.placeholder;\n      }\n\n      result.push(refElement);\n    }\n\n    return result;\n  }\n\n  private async verifyElement(element: RefElement): Promise<boolean> {\n    try {\n      const exists = await this.test.isVisible(element.selector);\n      return exists;\n    } catch {\n      return false;\n    }\n  }\n}\n\nexport default RefManager;\n","/**\n * NetworkInterceptor - Network Request Interception and Mocking\n * \n * Inspired by agent-browser's network interception capabilities.\n * Provides request routing, mocking, and recording for testing edge cases.\n */\n\nimport type { DesktopTest } from './desktop-test';\n\n/** HTTP methods */\nexport type HttpMethod = 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH' | 'HEAD' | 'OPTIONS';\n\n/** Request info */\nexport interface RequestInfo {\n  /** Request ID */\n  id: string;\n  /** Request URL */\n  url: string;\n  /** HTTP method */\n  method: HttpMethod;\n  /** Request headers */\n  headers: Record<string, string>;\n  /** Request body (if any) */\n  body?: string | object;\n  /** Timestamp */\n  timestamp: number;\n  /** Resource type */\n  resourceType: 'document' | 'script' | 'stylesheet' | 'image' | 'font' | 'xhr' | 'fetch' | 'other';\n}\n\n/** Response info */\nexport interface ResponseInfo {\n  /** HTTP status code */\n  status: number;\n  /** Status text */\n  statusText: string;\n  /** Response headers */\n  headers: Record<string, string>;\n  /** Response body */\n  body?: string | object;\n  /** Response time in ms */\n  responseTime: number;\n}\n\n/** Recorded request with response */\nexport interface RecordedRequest extends RequestInfo {\n  /** Response info */\n  response?: ResponseInfo;\n  /** Whether request was mocked */\n  mocked: boolean;\n  /** Whether request was aborted */\n  aborted: boolean;\n}\n\n/** Route handler options */\nexport interface RouteOptions {\n  /** Mock response status (default: 200) */\n  status?: number;\n  /** Mock response body */\n  body?: string | object;\n  /** Mock response headers */\n  headers?: Record<string, string>;\n  /** Abort the request */\n  abort?: boolean;\n  /** Delay response in ms */\n  delay?: number;\n  /** Continue with original request (useful for modifying) */\n  continue?: boolean;\n  /** Modify request before continuing */\n  modifyRequest?: (request: RequestInfo) => RequestInfo;\n  /** Modify response before returning */\n  modifyResponse?: (response: ResponseInfo) => ResponseInfo;\n  /** Only match specific methods */\n  methods?: HttpMethod[];\n  /** Only match requests with specific headers */\n  matchHeaders?: Record<string, string | RegExp>;\n  /** Number of times to apply this route (default: unlimited) */\n  times?: number;\n}\n\n/** Route definition */\nexport interface RouteDefinition {\n  /** URL pattern (glob or regex) */\n  pattern: string | RegExp;\n  /** Route options */\n  options: RouteOptions;\n  /** Number of times matched */\n  matchCount: number;\n  /** Route ID */\n  id: string;\n  /** Whether route is active */\n  active: boolean;\n}\n\n/** Request filter options */\nexport interface RequestFilterOptions {\n  /** Filter by URL pattern */\n  url?: string | RegExp;\n  /** Filter by method */\n  method?: HttpMethod | HttpMethod[];\n  /** Filter by resource type */\n  resourceType?: RequestInfo['resourceType'] | RequestInfo['resourceType'][];\n  /** Only mocked requests */\n  mocked?: boolean;\n  /** Only aborted requests */\n  aborted?: boolean;\n  /** Time range - after timestamp */\n  after?: number;\n  /** Time range - before timestamp */\n  before?: number;\n  /** Limit number of results */\n  limit?: number;\n}\n\n/**\n * NetworkInterceptor - Intercept and mock network requests\n * \n * @example\n * ```typescript\n * const network = new NetworkInterceptor(test);\n * \n * // Mock API response\n * await network.route('/api/files', {\n *   body: { files: [], total: 0 }\n * });\n * \n * // Abort specific requests  \n * await network.route('/analytics/', { abort: true });\n * \n * // Get recorded requests\n * const requests = network.getRequests({ url: /api/ });\n * ```\n */\nexport class NetworkInterceptor {\n  private test: DesktopTest;\n  private routes: Map<string, RouteDefinition> = new Map();\n  private requests: RecordedRequest[] = [];\n  private recording = false;\n  private routeCounter = 0;\n  private interceptorSetup = false;\n\n  constructor(test: DesktopTest) {\n    this.test = test;\n  }\n\n  /**\n   * Add a route to intercept matching requests\n   */\n  async route(pattern: string | RegExp, options: RouteOptions = {}): Promise<string> {\n    const routeId = `route-${++this.routeCounter}`;\n    \n    const route: RouteDefinition = {\n      pattern,\n      options,\n      matchCount: 0,\n      id: routeId,\n      active: true\n    };\n\n    this.routes.set(routeId, route);\n\n    // Setup interceptor if not already done\n    if (!this.interceptorSetup) {\n      await this.setupInterceptor();\n    }\n\n    return routeId;\n  }\n\n  /**\n   * Remove a route by ID\n   */\n  removeRoute(routeId: string): boolean {\n    return this.routes.delete(routeId);\n  }\n\n  /**\n   * Remove all routes matching a pattern\n   */\n  removeRoutesByPattern(pattern: string | RegExp): number {\n    let count = 0;\n    const patternStr = pattern.toString();\n    \n    for (const [id, route] of this.routes) {\n      if (route.pattern.toString() === patternStr) {\n        this.routes.delete(id);\n        count++;\n      }\n    }\n    \n    return count;\n  }\n\n  /**\n   * Clear all routes\n   */\n  clearRoutes(): void {\n    this.routes.clear();\n  }\n\n  /**\n   * Start recording requests\n   */\n  startRecording(): void {\n    this.recording = true;\n    this.requests = [];\n  }\n\n  /**\n   * Stop recording requests\n   */\n  stopRecording(): RecordedRequest[] {\n    this.recording = false;\n    return [...this.requests];\n  }\n\n  /**\n   * Get recorded requests with optional filtering\n   */\n  getRequests(filter?: RequestFilterOptions): RecordedRequest[] {\n    let results = [...this.requests];\n\n    if (!filter) return results;\n\n    // Filter by URL\n    if (filter.url) {\n      const urlPattern = filter.url instanceof RegExp \n        ? filter.url \n        : new RegExp(filter.url.replace(/\\*/g, '.*'));\n      results = results.filter(r => urlPattern.test(r.url));\n    }\n\n    // Filter by method\n    if (filter.method) {\n      const methods = Array.isArray(filter.method) ? filter.method : [filter.method];\n      results = results.filter(r => methods.includes(r.method));\n    }\n\n    // Filter by resource type\n    if (filter.resourceType) {\n      const types = Array.isArray(filter.resourceType) ? filter.resourceType : [filter.resourceType];\n      results = results.filter(r => types.includes(r.resourceType));\n    }\n\n    // Filter by mocked status\n    if (filter.mocked !== undefined) {\n      results = results.filter(r => r.mocked === filter.mocked);\n    }\n\n    // Filter by aborted status\n    if (filter.aborted !== undefined) {\n      results = results.filter(r => r.aborted === filter.aborted);\n    }\n\n    // Filter by time range\n    if (filter.after !== undefined) {\n      results = results.filter(r => r.timestamp >= filter.after!);\n    }\n    if (filter.before !== undefined) {\n      results = results.filter(r => r.timestamp <= filter.before!);\n    }\n\n    // Limit results\n    if (filter.limit !== undefined) {\n      results = results.slice(0, filter.limit);\n    }\n\n    return results;\n  }\n\n  /**\n   * Clear recorded requests\n   */\n  clearRequests(): void {\n    this.requests = [];\n  }\n\n  /**\n   * Wait for a request matching the pattern\n   */\n  async waitForRequest(\n    pattern: string | RegExp, \n    options: { timeout?: number; method?: HttpMethod } = {}\n  ): Promise<RecordedRequest> {\n    const { timeout = 30000, method } = options;\n    const startTime = Date.now();\n    const urlPattern = pattern instanceof RegExp \n      ? pattern \n      : new RegExp(pattern.replace(/\\*/g, '.*'));\n\n    while (Date.now() - startTime < timeout) {\n      const match = this.requests.find(r => {\n        if (!urlPattern.test(r.url)) return false;\n        if (method && r.method !== method) return false;\n        return true;\n      });\n\n      if (match) return match;\n      \n      await new Promise(resolve => setTimeout(resolve, 100));\n    }\n\n    throw new Error(`Timeout waiting for request matching ${pattern}`);\n  }\n\n  /**\n   * Wait for a response matching the pattern\n   */\n  async waitForResponse(\n    pattern: string | RegExp,\n    options: { timeout?: number; status?: number } = {}\n  ): Promise<RecordedRequest> {\n    const { timeout = 30000, status } = options;\n    const startTime = Date.now();\n    const urlPattern = pattern instanceof RegExp \n      ? pattern \n      : new RegExp(pattern.replace(/\\*/g, '.*'));\n\n    while (Date.now() - startTime < timeout) {\n      const match = this.requests.find(r => {\n        if (!urlPattern.test(r.url)) return false;\n        if (!r.response) return false;\n        if (status !== undefined && r.response.status !== status) return false;\n        return true;\n      });\n\n      if (match) return match;\n      \n      await new Promise(resolve => setTimeout(resolve, 100));\n    }\n\n    throw new Error(`Timeout waiting for response matching ${pattern}`);\n  }\n\n  /**\n   * Mock a specific API endpoint with predefined responses\n   */\n  async mockApi(\n    endpoint: string,\n    responses: {\n      GET?: RouteOptions;\n      POST?: RouteOptions;\n      PUT?: RouteOptions;\n      DELETE?: RouteOptions;\n      PATCH?: RouteOptions;\n    }\n  ): Promise<string[]> {\n    const routeIds: string[] = [];\n\n    for (const [method, options] of Object.entries(responses)) {\n      const routeId = await this.route(endpoint, {\n        ...options,\n        methods: [method as HttpMethod]\n      });\n      routeIds.push(routeId);\n    }\n\n    return routeIds;\n  }\n\n  /**\n   * Simulate network conditions\n   */\n  async simulateNetworkConditions(conditions: {\n    offline?: boolean;\n    latency?: number;\n    downloadThroughput?: number;\n    uploadThroughput?: number;\n  }): Promise<void> {\n    const { offline = false, latency = 0, downloadThroughput: _downloadThroughput, uploadThroughput: _uploadThroughput } = conditions;\n    // Note: downloadThroughput and uploadThroughput are reserved for future use\n    void _downloadThroughput;\n    void _uploadThroughput;\n\n    await this.test.evaluate(`\n      (() => {\n        // Store original fetch\n        if (!window.__originalFetch) {\n          window.__originalFetch = window.fetch;\n        }\n        \n        // Override fetch with simulated conditions\n        window.fetch = async (...args) => {\n          if (${offline}) {\n            throw new TypeError('Failed to fetch');\n          }\n          \n          if (${latency} > 0) {\n            await new Promise(r => setTimeout(r, ${latency}));\n          }\n          \n          return window.__originalFetch(...args);\n        };\n      })()\n    `);\n  }\n\n  /**\n   * Reset network conditions to normal\n   */\n  async resetNetworkConditions(): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        if (window.__originalFetch) {\n          window.fetch = window.__originalFetch;\n          delete window.__originalFetch;\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Get all active routes\n   */\n  getRoutes(): RouteDefinition[] {\n    return Array.from(this.routes.values()).filter(r => r.active);\n  }\n\n  /**\n   * Get network statistics\n   */\n  getStats(): {\n    totalRequests: number;\n    mockedRequests: number;\n    abortedRequests: number;\n    failedRequests: number;\n    avgResponseTime: number;\n    byMethod: Record<HttpMethod, number>;\n    byResourceType: Record<string, number>;\n  } {\n    const totalRequests = this.requests.length;\n    const mockedRequests = this.requests.filter(r => r.mocked).length;\n    const abortedRequests = this.requests.filter(r => r.aborted).length;\n    const failedRequests = this.requests.filter(r => \n      r.response && r.response.status >= 400\n    ).length;\n\n    const responseTimes = this.requests\n      .filter(r => r.response?.responseTime)\n      .map(r => r.response!.responseTime);\n    const avgResponseTime = responseTimes.length > 0\n      ? responseTimes.reduce((a, b) => a + b, 0) / responseTimes.length\n      : 0;\n\n    const byMethod: Record<string, number> = {};\n    const byResourceType: Record<string, number> = {};\n\n    for (const request of this.requests) {\n      byMethod[request.method] = (byMethod[request.method] || 0) + 1;\n      byResourceType[request.resourceType] = (byResourceType[request.resourceType] || 0) + 1;\n    }\n\n    return {\n      totalRequests,\n      mockedRequests,\n      abortedRequests,\n      failedRequests,\n      avgResponseTime,\n      byMethod: byMethod as Record<HttpMethod, number>,\n      byResourceType\n    };\n  }\n\n  // Private methods\n\n  private async setupInterceptor(): Promise<void> {\n    // Inject request interceptor into page\n    await this.test.evaluate(`\n      (() => {\n        if (window.__networkInterceptorSetup) return;\n        window.__networkInterceptorSetup = true;\n        \n        // Store original fetch and XMLHttpRequest\n        const originalFetch = window.fetch;\n        const originalXHROpen = XMLHttpRequest.prototype.open;\n        const originalXHRSend = XMLHttpRequest.prototype.send;\n        \n        // Request queue for communication\n        window.__interceptedRequests = [];\n        window.__networkRoutes = [];\n        \n        // Override fetch\n        window.fetch = async function(input, init = {}) {\n          const url = typeof input === 'string' ? input : input.url;\n          const method = init.method || 'GET';\n          const headers = init.headers || {};\n          const body = init.body;\n          \n          const requestInfo = {\n            id: 'req-' + Date.now() + '-' + Math.random().toString(36).slice(2),\n            url,\n            method,\n            headers: Object.fromEntries(\n              headers instanceof Headers ? headers.entries() : Object.entries(headers)\n            ),\n            body,\n            timestamp: Date.now(),\n            resourceType: 'fetch'\n          };\n          \n          // Check for matching routes\n          const route = window.__networkRoutes.find(r => {\n            const pattern = r.pattern instanceof RegExp \n              ? r.pattern \n              : new RegExp(r.pattern.replace(/\\\\*\\\\*/g, '.*').replace(/\\\\*/g, '[^/]*'));\n            return pattern.test(url);\n          });\n          \n          if (route) {\n            route.matchCount++;\n            \n            if (route.options.abort) {\n              requestInfo.aborted = true;\n              window.__interceptedRequests.push(requestInfo);\n              throw new TypeError('Request aborted by NetworkInterceptor');\n            }\n            \n            if (route.options.delay) {\n              await new Promise(r => setTimeout(r, route.options.delay));\n            }\n            \n            if (route.options.body !== undefined || route.options.status !== undefined) {\n              const mockResponse = {\n                status: route.options.status || 200,\n                statusText: route.options.status === 200 ? 'OK' : 'Mocked',\n                headers: route.options.headers || { 'Content-Type': 'application/json' },\n                body: route.options.body\n              };\n              \n              requestInfo.response = mockResponse;\n              requestInfo.mocked = true;\n              window.__interceptedRequests.push(requestInfo);\n              \n              const bodyStr = typeof mockResponse.body === 'object' \n                ? JSON.stringify(mockResponse.body) \n                : mockResponse.body || '';\n              \n              return new Response(bodyStr, {\n                status: mockResponse.status,\n                statusText: mockResponse.statusText,\n                headers: mockResponse.headers\n              });\n            }\n          }\n          \n          // Make original request\n          const startTime = Date.now();\n          try {\n            const response = await originalFetch(input, init);\n            requestInfo.response = {\n              status: response.status,\n              statusText: response.statusText,\n              headers: Object.fromEntries(response.headers.entries()),\n              responseTime: Date.now() - startTime\n            };\n            requestInfo.mocked = false;\n            window.__interceptedRequests.push(requestInfo);\n            return response;\n          } catch (error) {\n            requestInfo.error = error.message;\n            window.__interceptedRequests.push(requestInfo);\n            throw error;\n          }\n        };\n        \n        // Override XMLHttpRequest\n        XMLHttpRequest.prototype.open = function(method, url, ...args) {\n          this.__interceptInfo = { method, url, timestamp: Date.now() };\n          return originalXHROpen.call(this, method, url, ...args);\n        };\n        \n        XMLHttpRequest.prototype.send = function(body) {\n          const info = this.__interceptInfo || {};\n          const requestInfo = {\n            id: 'xhr-' + Date.now() + '-' + Math.random().toString(36).slice(2),\n            url: info.url,\n            method: info.method || 'GET',\n            headers: {},\n            body,\n            timestamp: info.timestamp || Date.now(),\n            resourceType: 'xhr'\n          };\n          \n          this.addEventListener('load', () => {\n            requestInfo.response = {\n              status: this.status,\n              statusText: this.statusText,\n              headers: {},\n              responseTime: Date.now() - requestInfo.timestamp\n            };\n            window.__interceptedRequests.push(requestInfo);\n          });\n          \n          this.addEventListener('error', () => {\n            requestInfo.error = 'Network error';\n            window.__interceptedRequests.push(requestInfo);\n          });\n          \n          return originalXHRSend.call(this, body);\n        };\n      })()\n    `);\n\n    this.interceptorSetup = true;\n\n    // Start polling for intercepted requests\n    this.startRequestPolling();\n  }\n\n  private startRequestPolling(): void {\n    const pollInterval = setInterval(async () => {\n      if (!this.recording && this.routes.size === 0) {\n        clearInterval(pollInterval);\n        return;\n      }\n\n      try {\n        // Sync routes to page\n        const routesData = Array.from(this.routes.values()).map(r => ({\n          pattern: r.pattern.toString(),\n          options: r.options,\n          matchCount: r.matchCount\n        }));\n\n        await this.test.evaluate(`\n          window.__networkRoutes = ${JSON.stringify(routesData)}.map(r => ({\n            ...r,\n            pattern: r.pattern.startsWith('/') && r.pattern.endsWith('/') \n              ? new RegExp(r.pattern.slice(1, -1))\n              : r.pattern\n          }));\n        `);\n\n        // Get intercepted requests\n        const requests = await this.test.evaluate(`\n          (() => {\n            const reqs = window.__interceptedRequests || [];\n            window.__interceptedRequests = [];\n            return reqs;\n          })()\n        `) as RecordedRequest[];\n\n        if (requests && requests.length > 0) {\n          this.requests.push(...requests);\n        }\n      } catch {\n        // Ignore polling errors\n      }\n    }, 100);\n  }\n\n}\n\nexport default NetworkInterceptor;\n","/**\n * FlowTester - Flow Chart / Graph Testing Module\n * \n * Specialized testing for @xyflow/react (React Flow) and similar graph libraries.\n * Provides node, edge, and layout testing capabilities for FlowSight's execution flow view.\n */\n\nimport type { DesktopTest } from './desktop-test';\n\n/** Node position */\nexport interface Position {\n  x: number;\n  y: number;\n}\n\n/** Node dimensions */\nexport interface Dimensions {\n  width: number;\n  height: number;\n}\n\n/** Flow node information */\nexport interface FlowNode {\n  /** Node ID */\n  id: string;\n  /** Node type */\n  type: string;\n  /** Node label/title */\n  label: string;\n  /** Node position */\n  position: Position;\n  /** Node dimensions */\n  dimensions?: Dimensions;\n  /** Node data (custom properties) */\n  data: Record<string, unknown>;\n  /** Whether node is selected */\n  selected: boolean;\n  /** Whether node is draggable */\n  draggable: boolean;\n  /** Whether node is visible in viewport */\n  visible: boolean;\n  /** Parent node ID (for nested nodes) */\n  parentId?: string;\n  /** CSS classes */\n  className?: string;\n  /** Node style */\n  style?: Record<string, string>;\n}\n\n/** Flow edge/connection information */\nexport interface FlowEdge {\n  /** Edge ID */\n  id: string;\n  /** Source node ID */\n  source: string;\n  /** Target node ID */\n  target: string;\n  /** Source handle ID */\n  sourceHandle?: string;\n  /** Target handle ID */\n  targetHandle?: string;\n  /** Edge type */\n  type: string;\n  /** Edge label */\n  label?: string;\n  /** Whether edge is animated */\n  animated: boolean;\n  /** Whether edge is selected */\n  selected: boolean;\n  /** Edge data (custom properties) */\n  data: Record<string, unknown>;\n  /** Edge style */\n  style?: Record<string, string>;\n}\n\n/** Viewport information */\nexport interface Viewport {\n  /** X offset */\n  x: number;\n  /** Y offset */\n  y: number;\n  /** Zoom level */\n  zoom: number;\n}\n\n/** Layout type */\nexport type LayoutType = 'tree' | 'dagre' | 'force' | 'radial' | 'custom';\n\n/** Flow state snapshot */\nexport interface FlowSnapshot {\n  /** All nodes */\n  nodes: FlowNode[];\n  /** All edges */\n  edges: FlowEdge[];\n  /** Current viewport */\n  viewport: Viewport;\n  /** Timestamp */\n  timestamp: number;\n}\n\n/** Node filter options */\nexport interface NodeFilterOptions {\n  /** Filter by type */\n  type?: string | string[];\n  /** Filter by label (partial match) */\n  label?: string | RegExp;\n  /** Filter by data property */\n  data?: Record<string, unknown>;\n  /** Only selected nodes */\n  selected?: boolean;\n  /** Only visible nodes */\n  visible?: boolean;\n  /** Filter by parent */\n  parentId?: string;\n}\n\n/** Edge filter options */\nexport interface EdgeFilterOptions {\n  /** Filter by source node */\n  source?: string;\n  /** Filter by target node */\n  target?: string;\n  /** Filter by type */\n  type?: string;\n  /** Only animated edges */\n  animated?: boolean;\n  /** Only selected edges */\n  selected?: boolean;\n}\n\n/** Layout validation options */\nexport interface LayoutValidationOptions {\n  /** Expected layout type */\n  type?: LayoutType;\n  /** Minimum horizontal spacing */\n  minHorizontalSpacing?: number;\n  /** Minimum vertical spacing */\n  minVerticalSpacing?: number;\n  /** Check for overlapping nodes */\n  noOverlap?: boolean;\n  /** Check nodes are within bounds */\n  withinBounds?: { minX: number; maxX: number; minY: number; maxY: number };\n}\n\n/**\n * FlowTester - Test flow charts and graph visualizations\n * \n * @example\n * ```typescript\n * const flow = new FlowTester(test, '[data-testid=\"flow-view\"]');\n * \n * // Get all nodes\n * const nodes = await flow.getNodes();\n * \n * // Click a node\n * await flow.clickNode('probe');\n * \n * // Verify edge exists\n * await flow.assertEdgeExists('probe', 'usb_register_driver');\n * \n * // Test layout\n * await flow.assertLayout('tree');\n * ```\n */\nexport class FlowTester {\n  private test: DesktopTest;\n  private selector: string;\n  private _currentSnapshot: FlowSnapshot | null = null;\n\n  constructor(test: DesktopTest, selector: string = '[data-testid=\"flow-view\"]') {\n    this.test = test;\n    this.selector = selector;\n  }\n\n  /**\n   * Get the current snapshot (if available)\n   */\n  get currentSnapshot(): FlowSnapshot | null {\n    return this._currentSnapshot;\n  }\n\n  /**\n   * Take a snapshot of the current flow state\n   */\n  async snapshot(): Promise<FlowSnapshot> {\n    const data = await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return null;\n        \n        // Try to get React Flow store\n        let nodes = [];\n        let edges = [];\n        let viewport = { x: 0, y: 0, zoom: 1 };\n        \n        // Method 1: Access via React Flow's internal store\n        const reactFlowInstance = container.querySelector('.react-flow');\n        if (reactFlowInstance && reactFlowInstance.__reactFlow) {\n          const store = reactFlowInstance.__reactFlow;\n          nodes = store.getNodes?.() || [];\n          edges = store.getEdges?.() || [];\n          viewport = store.getViewport?.() || viewport;\n        }\n        \n        // Method 2: Parse from DOM\n        if (nodes.length === 0) {\n          const nodeElements = container.querySelectorAll('.react-flow__node');\n          nodeElements.forEach((el, idx) => {\n            const transform = el.style.transform || '';\n            const match = transform.match(/translate\\\\(([\\\\d.-]+)px,\\\\s*([\\\\d.-]+)px\\\\)/);\n            const x = match ? parseFloat(match[1]) : 0;\n            const y = match ? parseFloat(match[2]) : 0;\n            \n            nodes.push({\n              id: el.getAttribute('data-id') || 'node-' + idx,\n              type: el.getAttribute('data-type') || 'default',\n              label: el.textContent?.trim().slice(0, 100) || '',\n              position: { x, y },\n              dimensions: {\n                width: el.offsetWidth,\n                height: el.offsetHeight\n              },\n              data: {},\n              selected: el.classList.contains('selected'),\n              draggable: !el.classList.contains('nodrag'),\n              visible: el.offsetParent !== null,\n              className: el.className,\n              style: {}\n            });\n          });\n          \n          const edgeElements = container.querySelectorAll('.react-flow__edge');\n          edgeElements.forEach((el, idx) => {\n            edges.push({\n              id: el.getAttribute('data-id') || 'edge-' + idx,\n              source: el.getAttribute('data-source') || '',\n              target: el.getAttribute('data-target') || '',\n              type: el.getAttribute('data-type') || 'default',\n              label: el.querySelector('.react-flow__edge-text')?.textContent || '',\n              animated: el.classList.contains('animated'),\n              selected: el.classList.contains('selected'),\n              data: {},\n              style: {}\n            });\n          });\n          \n          // Get viewport from transform\n          const viewportEl = container.querySelector('.react-flow__viewport');\n          if (viewportEl) {\n            const transform = viewportEl.style.transform || '';\n            const translateMatch = transform.match(/translate\\\\(([\\\\d.-]+)px,\\\\s*([\\\\d.-]+)px\\\\)/);\n            const scaleMatch = transform.match(/scale\\\\(([\\\\d.]+)\\\\)/);\n            viewport = {\n              x: translateMatch ? parseFloat(translateMatch[1]) : 0,\n              y: translateMatch ? parseFloat(translateMatch[2]) : 0,\n              zoom: scaleMatch ? parseFloat(scaleMatch[1]) : 1\n            };\n          }\n        }\n        \n        return {\n          nodes,\n          edges,\n          viewport,\n          timestamp: Date.now()\n        };\n      })()\n    `) as FlowSnapshot | null;\n\n    if (!data) {\n      throw new Error(`Flow container not found: ${this.selector}`);\n    }\n\n    this._currentSnapshot = data;\n    return data;\n  }\n\n  /**\n   * Get all nodes\n   */\n  async getNodes(filter?: NodeFilterOptions): Promise<FlowNode[]> {\n    const snapshot = await this.snapshot();\n    let nodes = snapshot.nodes;\n\n    if (filter) {\n      nodes = this.filterNodes(nodes, filter);\n    }\n\n    return nodes;\n  }\n\n  /**\n   * Get a node by ID\n   */\n  async getNode(id: string): Promise<FlowNode | null> {\n    const nodes = await this.getNodes();\n    return nodes.find(n => n.id === id) || null;\n  }\n\n  /**\n   * Get all edges\n   */\n  async getEdges(filter?: EdgeFilterOptions): Promise<FlowEdge[]> {\n    const snapshot = await this.snapshot();\n    let edges = snapshot.edges;\n\n    if (filter) {\n      edges = this.filterEdges(edges, filter);\n    }\n\n    return edges;\n  }\n\n  /**\n   * Get an edge by ID or source-target pair\n   */\n  async getEdge(idOrSource: string, target?: string): Promise<FlowEdge | null> {\n    const edges = await this.getEdges();\n    \n    if (target !== undefined) {\n      return edges.find(e => e.source === idOrSource && e.target === target) || null;\n    }\n    \n    return edges.find(e => e.id === idOrSource) || null;\n  }\n\n  /**\n   * Get current viewport\n   */\n  async getViewport(): Promise<Viewport> {\n    const snapshot = await this.snapshot();\n    return snapshot.viewport;\n  }\n\n  /**\n   * Click on a node\n   */\n  async clickNode(nodeId: string): Promise<void> {\n    const node = await this.getNode(nodeId);\n    if (!node) {\n      throw new Error(`Node not found: ${nodeId}`);\n    }\n\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const nodeEl = container?.querySelector('[data-id=\"${nodeId}\"]');\n        if (nodeEl) {\n          nodeEl.click();\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Double-click on a node\n   */\n  async dblclickNode(nodeId: string): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const nodeEl = container?.querySelector('[data-id=\"${nodeId}\"]');\n        if (nodeEl) {\n          nodeEl.dispatchEvent(new MouseEvent('dblclick', { bubbles: true }));\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Hover over a node\n   */\n  async hoverNode(nodeId: string): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const nodeEl = container?.querySelector('[data-id=\"${nodeId}\"]');\n        if (nodeEl) {\n          nodeEl.dispatchEvent(new MouseEvent('mouseenter', { bubbles: true }));\n          nodeEl.dispatchEvent(new MouseEvent('mouseover', { bubbles: true }));\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Click on an edge\n   */\n  async clickEdge(edgeId: string): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const edgeEl = container?.querySelector('[data-id=\"${edgeId}\"]');\n        if (edgeEl) {\n          edgeEl.click();\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Select a node\n   */\n  async selectNode(nodeId: string): Promise<void> {\n    await this.clickNode(nodeId);\n  }\n\n  /**\n   * Select multiple nodes\n   */\n  async selectNodes(nodeIds: string[]): Promise<void> {\n    // Hold Ctrl/Cmd and click each node\n    for (let i = 0; i < nodeIds.length; i++) {\n      await this.test.evaluate(`\n        (() => {\n          const container = document.querySelector('${this.selector}');\n          const nodeEl = container?.querySelector('[data-id=\"${nodeIds[i]}\"]');\n          if (nodeEl) {\n            nodeEl.dispatchEvent(new MouseEvent('click', {\n              bubbles: true,\n              ctrlKey: ${i > 0},\n              metaKey: ${i > 0}\n            }));\n          }\n        })()\n      `);\n    }\n  }\n\n  /**\n   * Drag a node to a new position\n   */\n  async dragNode(nodeId: string, targetPosition: Position): Promise<void> {\n    const node = await this.getNode(nodeId);\n    if (!node) {\n      throw new Error(`Node not found: ${nodeId}`);\n    }\n\n    const deltaX = targetPosition.x - node.position.x;\n    const deltaY = targetPosition.y - node.position.y;\n\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const nodeEl = container?.querySelector('[data-id=\"${nodeId}\"]');\n        if (!nodeEl) return;\n        \n        const rect = nodeEl.getBoundingClientRect();\n        const startX = rect.left + rect.width / 2;\n        const startY = rect.top + rect.height / 2;\n        \n        nodeEl.dispatchEvent(new MouseEvent('mousedown', {\n          bubbles: true,\n          clientX: startX,\n          clientY: startY\n        }));\n        \n        document.dispatchEvent(new MouseEvent('mousemove', {\n          bubbles: true,\n          clientX: startX + ${deltaX},\n          clientY: startY + ${deltaY}\n        }));\n        \n        document.dispatchEvent(new MouseEvent('mouseup', {\n          bubbles: true,\n          clientX: startX + ${deltaX},\n          clientY: startY + ${deltaY}\n        }));\n      })()\n    `);\n  }\n\n  /**\n   * Zoom the viewport\n   */\n  async zoom(level: number): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        // Dispatch wheel event for zoom\n        container.dispatchEvent(new WheelEvent('wheel', {\n          bubbles: true,\n          deltaY: ${level > 1 ? -100 : 100} * Math.abs(${level} - 1),\n          ctrlKey: true\n        }));\n      })()\n    `);\n  }\n\n  /**\n   * Pan the viewport\n   */\n  async pan(deltaX: number, deltaY: number): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        const rect = container.getBoundingClientRect();\n        const centerX = rect.left + rect.width / 2;\n        const centerY = rect.top + rect.height / 2;\n        \n        container.dispatchEvent(new MouseEvent('mousedown', {\n          bubbles: true,\n          clientX: centerX,\n          clientY: centerY,\n          button: 1 // Middle button for pan\n        }));\n        \n        document.dispatchEvent(new MouseEvent('mousemove', {\n          bubbles: true,\n          clientX: centerX + ${deltaX},\n          clientY: centerY + ${deltaY}\n        }));\n        \n        document.dispatchEvent(new MouseEvent('mouseup', {\n          bubbles: true\n        }));\n      })()\n    `);\n  }\n\n  /**\n   * Fit all nodes in view\n   */\n  async fitView(): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        // Try to find and click fitView button if exists\n        const fitBtn = container.querySelector('[data-testid=\"fit-view-button\"]') ||\n                      container.querySelector('.react-flow__controls-fitview');\n        if (fitBtn) {\n          fitBtn.click();\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Assert a node exists\n   */\n  async assertNodeExists(nodeId: string, message?: string): Promise<void> {\n    const node = await this.getNode(nodeId);\n    if (!node) {\n      throw new Error(message || `Expected node \"${nodeId}\" to exist`);\n    }\n  }\n\n  /**\n   * Assert a node does not exist\n   */\n  async assertNodeNotExists(nodeId: string, message?: string): Promise<void> {\n    const node = await this.getNode(nodeId);\n    if (node) {\n      throw new Error(message || `Expected node \"${nodeId}\" to not exist`);\n    }\n  }\n\n  /**\n   * Assert an edge exists between two nodes\n   */\n  async assertEdgeExists(source: string, target: string, message?: string): Promise<void> {\n    const edge = await this.getEdge(source, target);\n    if (!edge) {\n      throw new Error(message || `Expected edge from \"${source}\" to \"${target}\" to exist`);\n    }\n  }\n\n  /**\n   * Assert an edge does not exist\n   */\n  async assertEdgeNotExists(source: string, target: string, message?: string): Promise<void> {\n    const edge = await this.getEdge(source, target);\n    if (edge) {\n      throw new Error(message || `Expected edge from \"${source}\" to \"${target}\" to not exist`);\n    }\n  }\n\n  /**\n   * Assert node count\n   */\n  async assertNodeCount(expected: number, message?: string): Promise<void> {\n    const nodes = await this.getNodes();\n    if (nodes.length !== expected) {\n      throw new Error(message || `Expected ${expected} nodes, got ${nodes.length}`);\n    }\n  }\n\n  /**\n   * Assert edge count\n   */\n  async assertEdgeCount(expected: number, message?: string): Promise<void> {\n    const edges = await this.getEdges();\n    if (edges.length !== expected) {\n      throw new Error(message || `Expected ${expected} edges, got ${edges.length}`);\n    }\n  }\n\n  /**\n   * Assert a node is selected\n   */\n  async assertNodeSelected(nodeId: string, message?: string): Promise<void> {\n    const node = await this.getNode(nodeId);\n    if (!node?.selected) {\n      throw new Error(message || `Expected node \"${nodeId}\" to be selected`);\n    }\n  }\n\n  /**\n   * Assert layout properties\n   */\n  async assertLayout(options: LayoutValidationOptions): Promise<void> {\n    const snapshot = await this.snapshot();\n    const nodes = snapshot.nodes;\n\n    // Check for overlapping nodes\n    if (options.noOverlap) {\n      for (let i = 0; i < nodes.length; i++) {\n        for (let j = i + 1; j < nodes.length; j++) {\n          if (this.nodesOverlap(nodes[i], nodes[j])) {\n            throw new Error(`Nodes \"${nodes[i].id}\" and \"${nodes[j].id}\" overlap`);\n          }\n        }\n      }\n    }\n\n    // Check minimum spacing\n    if (options.minHorizontalSpacing || options.minVerticalSpacing) {\n      for (let i = 0; i < nodes.length; i++) {\n        for (let j = i + 1; j < nodes.length; j++) {\n          const dx = Math.abs(nodes[i].position.x - nodes[j].position.x);\n          const dy = Math.abs(nodes[i].position.y - nodes[j].position.y);\n\n          if (options.minHorizontalSpacing && dx < options.minHorizontalSpacing && dy < 50) {\n            throw new Error(\n              `Nodes \"${nodes[i].id}\" and \"${nodes[j].id}\" have horizontal spacing ${dx}, expected >= ${options.minHorizontalSpacing}`\n            );\n          }\n\n          if (options.minVerticalSpacing && dy < options.minVerticalSpacing && dx < 50) {\n            throw new Error(\n              `Nodes \"${nodes[i].id}\" and \"${nodes[j].id}\" have vertical spacing ${dy}, expected >= ${options.minVerticalSpacing}`\n            );\n          }\n        }\n      }\n    }\n\n    // Check bounds\n    if (options.withinBounds) {\n      const { minX, maxX, minY, maxY } = options.withinBounds;\n      for (const node of nodes) {\n        if (node.position.x < minX || node.position.x > maxX ||\n            node.position.y < minY || node.position.y > maxY) {\n          throw new Error(\n            `Node \"${node.id}\" at (${node.position.x}, ${node.position.y}) is outside bounds`\n          );\n        }\n      }\n    }\n\n    // Check layout type (heuristic)\n    if (options.type) {\n      const detectedLayout = this.detectLayoutType(nodes);\n      if (detectedLayout !== options.type && options.type !== 'custom') {\n        throw new Error(`Expected layout type \"${options.type}\", detected \"${detectedLayout}\"`);\n      }\n    }\n  }\n\n  /**\n   * Get nodes connected to a given node\n   */\n  async getConnectedNodes(nodeId: string, direction: 'incoming' | 'outgoing' | 'both' = 'both'): Promise<FlowNode[]> {\n    const edges = await this.getEdges();\n    const nodes = await this.getNodes();\n    const nodeIds = new Set<string>();\n\n    for (const edge of edges) {\n      if (direction === 'outgoing' || direction === 'both') {\n        if (edge.source === nodeId) {\n          nodeIds.add(edge.target);\n        }\n      }\n      if (direction === 'incoming' || direction === 'both') {\n        if (edge.target === nodeId) {\n          nodeIds.add(edge.source);\n        }\n      }\n    }\n\n    return nodes.filter(n => nodeIds.has(n.id));\n  }\n\n  /**\n   * Get the path between two nodes\n   */\n  async getPath(sourceId: string, targetId: string): Promise<string[]> {\n    const edges = await this.getEdges();\n    \n    // BFS to find shortest path\n    const queue: string[][] = [[sourceId]];\n    const visited = new Set<string>([sourceId]);\n\n    while (queue.length > 0) {\n      const path = queue.shift()!;\n      const current = path[path.length - 1];\n\n      if (current === targetId) {\n        return path;\n      }\n\n      for (const edge of edges) {\n        if (edge.source === current && !visited.has(edge.target)) {\n          visited.add(edge.target);\n          queue.push([...path, edge.target]);\n        }\n      }\n    }\n\n    return []; // No path found\n  }\n\n  /**\n   * Assert a path exists between two nodes\n   */\n  async assertPathExists(sourceId: string, targetId: string, message?: string): Promise<void> {\n    const path = await this.getPath(sourceId, targetId);\n    if (path.length === 0) {\n      throw new Error(message || `Expected path from \"${sourceId}\" to \"${targetId}\"`);\n    }\n  }\n\n  // Private helper methods\n\n  private filterNodes(nodes: FlowNode[], filter: NodeFilterOptions): FlowNode[] {\n    return nodes.filter(node => {\n      if (filter.type) {\n        const types = Array.isArray(filter.type) ? filter.type : [filter.type];\n        if (!types.includes(node.type)) return false;\n      }\n\n      if (filter.label) {\n        if (filter.label instanceof RegExp) {\n          if (!filter.label.test(node.label)) return false;\n        } else {\n          if (!node.label.toLowerCase().includes(filter.label.toLowerCase())) return false;\n        }\n      }\n\n      if (filter.data) {\n        for (const [key, value] of Object.entries(filter.data)) {\n          if (node.data[key] !== value) return false;\n        }\n      }\n\n      if (filter.selected !== undefined && node.selected !== filter.selected) return false;\n      if (filter.visible !== undefined && node.visible !== filter.visible) return false;\n      if (filter.parentId !== undefined && node.parentId !== filter.parentId) return false;\n\n      return true;\n    });\n  }\n\n  private filterEdges(edges: FlowEdge[], filter: EdgeFilterOptions): FlowEdge[] {\n    return edges.filter(edge => {\n      if (filter.source && edge.source !== filter.source) return false;\n      if (filter.target && edge.target !== filter.target) return false;\n      if (filter.type && edge.type !== filter.type) return false;\n      if (filter.animated !== undefined && edge.animated !== filter.animated) return false;\n      if (filter.selected !== undefined && edge.selected !== filter.selected) return false;\n      return true;\n    });\n  }\n\n  private nodesOverlap(a: FlowNode, b: FlowNode): boolean {\n    if (!a.dimensions || !b.dimensions) return false;\n\n    const aRight = a.position.x + a.dimensions.width;\n    const aBottom = a.position.y + a.dimensions.height;\n    const bRight = b.position.x + b.dimensions.width;\n    const bBottom = b.position.y + b.dimensions.height;\n\n    return !(aRight < b.position.x ||\n             a.position.x > bRight ||\n             aBottom < b.position.y ||\n             a.position.y > bBottom);\n  }\n\n  private detectLayoutType(nodes: FlowNode[]): LayoutType {\n    if (nodes.length < 2) return 'custom';\n\n    // Check for tree layout (hierarchical Y positions)\n    const yPositions = [...new Set(nodes.map(n => Math.round(n.position.y / 50) * 50))];\n    if (yPositions.length > 1 && yPositions.length < nodes.length / 2) {\n      return 'tree';\n    }\n\n    // Check for dagre layout (similar to tree but may have more variation)\n    const sorted = [...nodes].sort((a, b) => a.position.y - b.position.y);\n    let isHierarchical = true;\n    for (let i = 1; i < sorted.length; i++) {\n      if (sorted[i].position.y < sorted[i - 1].position.y - 10) {\n        isHierarchical = false;\n        break;\n      }\n    }\n    if (isHierarchical) return 'dagre';\n\n    return 'custom';\n  }\n}\n\nexport default FlowTester;\n","/**\n * VirtualListTester - Virtual Scrolling / Virtualized List Testing\n * \n * Specialized testing for virtualized lists, trees, and tables.\n * Handles large datasets (2000+ lines) with virtual scrolling.\n */\n\nimport type { DesktopTest } from './desktop-test';\n\n/** Virtual list item */\nexport interface VirtualItem {\n  /** Item index */\n  index: number;\n  /** Item ID (if available) */\n  id?: string;\n  /** Item text content */\n  text: string;\n  /** Item data attributes */\n  data: Record<string, string>;\n  /** Bounding rect */\n  bounds: {\n    top: number;\n    left: number;\n    width: number;\n    height: number;\n  };\n  /** Whether item is visible in viewport */\n  visible: boolean;\n  /** Whether item is selected */\n  selected: boolean;\n  /** Item level (for trees) */\n  level?: number;\n  /** Whether item is expanded (for trees) */\n  expanded?: boolean;\n  /** Whether item has children (for trees) */\n  hasChildren?: boolean;\n}\n\n/** Virtual list state */\nexport interface VirtualListState {\n  /** Total item count */\n  totalCount: number;\n  /** Currently rendered item count */\n  renderedCount: number;\n  /** First visible index */\n  startIndex: number;\n  /** Last visible index */\n  endIndex: number;\n  /** Scroll position */\n  scrollTop: number;\n  /** Scroll height */\n  scrollHeight: number;\n  /** Client height */\n  clientHeight: number;\n  /** Average item height */\n  avgItemHeight: number;\n  /** Visible items */\n  visibleItems: VirtualItem[];\n}\n\n/** Scroll performance metrics */\nexport interface ScrollPerformance {\n  /** Frames per second during scroll */\n  fps: number;\n  /** Average frame time in ms */\n  avgFrameTime: number;\n  /** Max frame time (jank indicator) */\n  maxFrameTime: number;\n  /** Number of dropped frames */\n  droppedFrames: number;\n  /** Total scroll duration in ms */\n  duration: number;\n  /** Scroll distance in pixels */\n  distance: number;\n  /** Items rendered during scroll */\n  itemsRendered: number;\n}\n\n/** Scroll options */\nexport interface ScrollOptions {\n  /** Scroll behavior */\n  behavior?: 'auto' | 'smooth';\n  /** Block alignment */\n  block?: 'start' | 'center' | 'end' | 'nearest';\n  /** Timeout for scroll completion */\n  timeout?: number;\n}\n\n/**\n * VirtualListTester - Test virtualized lists and trees\n * \n * @example\n * ```typescript\n * const list = new VirtualListTester(test, '[data-testid=\"file-tree\"]');\n * \n * // Scroll to item\n * await list.scrollToItem('gpio-brcmstb.c');\n * \n * // Verify item is visible\n * await list.assertItemVisible('gpio-brcmstb.c');\n * \n * // Measure scroll performance\n * const metrics = await list.measureScrollPerformance();\n * assert.greaterThan(metrics.fps, 30);\n * ```\n */\nexport class VirtualListTester {\n  private test: DesktopTest;\n  private selector: string;\n\n  constructor(test: DesktopTest, selector: string) {\n    this.test = test;\n    this.selector = selector;\n  }\n\n  /**\n   * Get the current state of the virtual list\n   */\n  async getState(): Promise<VirtualListState> {\n    const state = await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return null;\n        \n        // Find the scrollable element\n        const scrollEl = container.querySelector('[data-virtualized]') ||\n                        container.querySelector('[style*=\"overflow\"]') ||\n                        container;\n        \n        // Get all rendered items\n        const itemSelector = '[data-index], [data-key], [role=\"treeitem\"], [role=\"row\"], [role=\"listitem\"]';\n        const items = Array.from(scrollEl.querySelectorAll(itemSelector));\n        \n        // Calculate indices\n        const indices = items.map(el => {\n          const idx = el.getAttribute('data-index');\n          return idx ? parseInt(idx, 10) : -1;\n        }).filter(i => i >= 0);\n        \n        const startIndex = indices.length > 0 ? Math.min(...indices) : 0;\n        const endIndex = indices.length > 0 ? Math.max(...indices) : 0;\n        \n        // Estimate total count\n        let totalCount = 0;\n        const totalAttr = scrollEl.getAttribute('data-total-count') ||\n                         container.getAttribute('data-total-count');\n        if (totalAttr) {\n          totalCount = parseInt(totalAttr, 10);\n        } else {\n          // Estimate from scroll height\n          const avgHeight = items.length > 0 \n            ? items.reduce((sum, el) => sum + el.getBoundingClientRect().height, 0) / items.length\n            : 30;\n          totalCount = Math.ceil(scrollEl.scrollHeight / avgHeight);\n        }\n        \n        // Get visible items\n        const containerRect = scrollEl.getBoundingClientRect();\n        const visibleItems = items.map((el, i) => {\n          const rect = el.getBoundingClientRect();\n          const isVisible = rect.top < containerRect.bottom && rect.bottom > containerRect.top;\n          \n          return {\n            index: indices[i] >= 0 ? indices[i] : i,\n            id: el.getAttribute('data-id') || el.getAttribute('data-key') || undefined,\n            text: el.textContent?.trim().slice(0, 200) || '',\n            data: {\n              ...Object.fromEntries(\n                Array.from(el.attributes)\n                  .filter(a => a.name.startsWith('data-'))\n                  .map(a => [a.name, a.value])\n              )\n            },\n            bounds: {\n              top: rect.top - containerRect.top,\n              left: rect.left - containerRect.left,\n              width: rect.width,\n              height: rect.height\n            },\n            visible: isVisible,\n            selected: el.classList.contains('selected') || el.getAttribute('aria-selected') === 'true',\n            level: el.getAttribute('aria-level') ? parseInt(el.getAttribute('aria-level'), 10) : undefined,\n            expanded: el.getAttribute('aria-expanded') === 'true',\n            hasChildren: el.querySelector('[role=\"group\"]') !== null || \n                        el.getAttribute('aria-expanded') !== null\n          };\n        });\n        \n        return {\n          totalCount,\n          renderedCount: items.length,\n          startIndex,\n          endIndex,\n          scrollTop: scrollEl.scrollTop,\n          scrollHeight: scrollEl.scrollHeight,\n          clientHeight: scrollEl.clientHeight,\n          avgItemHeight: items.length > 0 \n            ? items.reduce((sum, el) => sum + el.getBoundingClientRect().height, 0) / items.length\n            : 30,\n          visibleItems\n        };\n      })()\n    `) as VirtualListState | null;\n\n    if (!state) {\n      throw new Error(`Virtual list not found: ${this.selector}`);\n    }\n\n    return state;\n  }\n\n  /**\n   * Get currently visible items\n   */\n  async getVisibleItems(): Promise<VirtualItem[]> {\n    const state = await this.getState();\n    return state.visibleItems.filter(item => item.visible);\n  }\n\n  /**\n   * Get item by index\n   */\n  async getItemByIndex(index: number): Promise<VirtualItem | null> {\n    // First scroll to make item visible\n    await this.scrollToIndex(index);\n    \n    const state = await this.getState();\n    return state.visibleItems.find(item => item.index === index) || null;\n  }\n\n  /**\n   * Get item by text (partial match)\n   */\n  async getItemByText(text: string): Promise<VirtualItem | null> {\n    const state = await this.getState();\n    const lowerText = text.toLowerCase();\n    return state.visibleItems.find(item => \n      item.text.toLowerCase().includes(lowerText)\n    ) || null;\n  }\n\n  /**\n   * Scroll to a specific index\n   */\n  async scrollToIndex(index: number, options: ScrollOptions = {}): Promise<void> {\n    const { behavior = 'auto', timeout = 5000 } = options;\n\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        const scrollEl = container.querySelector('[data-virtualized]') ||\n                        container.querySelector('[style*=\"overflow\"]') ||\n                        container;\n        \n        // Estimate scroll position\n        const items = scrollEl.querySelectorAll('[data-index], [role=\"treeitem\"], [role=\"row\"]');\n        const avgHeight = items.length > 0 \n          ? Array.from(items).reduce((sum, el) => sum + el.getBoundingClientRect().height, 0) / items.length\n          : 30;\n        \n        const targetTop = ${index} * avgHeight;\n        scrollEl.scrollTo({\n          top: targetTop,\n          behavior: '${behavior}'\n        });\n      })()\n    `);\n\n    // Wait for scroll to complete\n    if (behavior === 'smooth') {\n      await new Promise(resolve => setTimeout(resolve, 500));\n    }\n\n    // Verify item is now in view\n    const startTime = Date.now();\n    while (Date.now() - startTime < timeout) {\n      const state = await this.getState();\n      if (index >= state.startIndex && index <= state.endIndex) {\n        return;\n      }\n      await new Promise(resolve => setTimeout(resolve, 100));\n    }\n  }\n\n  /**\n   * Scroll to an item by text\n   */\n  async scrollToItem(text: string, options: ScrollOptions = {}): Promise<void> {\n    const { timeout = 10000 } = options;\n    const startTime = Date.now();\n\n    // Incremental scroll through the list\n    while (Date.now() - startTime < timeout) {\n      // Check if item is already visible\n      const visibleItem = await this.getItemByText(text);\n      if (visibleItem) {\n        return;\n      }\n\n      // Scroll through the list incrementally\n      const state = await this.getState();\n      const nextIndex = Math.min(state.endIndex + 20, state.totalCount - 1);\n      \n      if (nextIndex <= state.endIndex) {\n        // Reached the end, item not found\n        throw new Error(`Item not found: \"${text}\"`);\n      }\n\n      await this.scrollToIndex(nextIndex);\n      await new Promise(resolve => setTimeout(resolve, 100));\n    }\n\n    throw new Error(`Timeout scrolling to item: \"${text}\"`);\n  }\n\n  /**\n   * Click an item by index\n   */\n  async clickItem(index: number): Promise<void> {\n    await this.scrollToIndex(index);\n    \n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        const item = container.querySelector('[data-index=\"${index}\"]') ||\n                    Array.from(container.querySelectorAll('[role=\"treeitem\"], [role=\"row\"]'))[${index}];\n        if (item) {\n          item.click();\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Click an item by text\n   */\n  async clickItemByText(text: string): Promise<void> {\n    await this.scrollToItem(text);\n    \n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        const items = container.querySelectorAll('[role=\"treeitem\"], [role=\"row\"], [role=\"listitem\"]');\n        for (const item of items) {\n          if (item.textContent?.toLowerCase().includes('${text.toLowerCase()}')) {\n            item.click();\n            break;\n          }\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Double-click an item by text\n   */\n  async dblclickItemByText(text: string): Promise<void> {\n    await this.scrollToItem(text);\n    \n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        const items = container.querySelectorAll('[role=\"treeitem\"], [role=\"row\"], [role=\"listitem\"]');\n        for (const item of items) {\n          if (item.textContent?.toLowerCase().includes('${text.toLowerCase()}')) {\n            item.dispatchEvent(new MouseEvent('dblclick', { bubbles: true }));\n            break;\n          }\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Expand a tree item\n   */\n  async expandItem(text: string): Promise<void> {\n    await this.scrollToItem(text);\n    \n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        const items = container.querySelectorAll('[role=\"treeitem\"]');\n        for (const item of items) {\n          if (item.textContent?.toLowerCase().includes('${text.toLowerCase()}')) {\n            if (item.getAttribute('aria-expanded') !== 'true') {\n              const expander = item.querySelector('[data-expand], .expand-icon, .chevron');\n              if (expander) {\n                expander.click();\n              } else {\n                item.click();\n              }\n            }\n            break;\n          }\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Collapse a tree item\n   */\n  async collapseItem(text: string): Promise<void> {\n    await this.scrollToItem(text);\n    \n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        const items = container.querySelectorAll('[role=\"treeitem\"]');\n        for (const item of items) {\n          if (item.textContent?.toLowerCase().includes('${text.toLowerCase()}')) {\n            if (item.getAttribute('aria-expanded') === 'true') {\n              const expander = item.querySelector('[data-expand], .expand-icon, .chevron');\n              if (expander) {\n                expander.click();\n              } else {\n                item.click();\n              }\n            }\n            break;\n          }\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Measure scroll performance\n   */\n  async measureScrollPerformance(options: {\n    scrollDistance?: number;\n    duration?: number;\n  } = {}): Promise<ScrollPerformance> {\n    const { scrollDistance = 5000, duration = 2000 } = options;\n\n    const result = await this.test.evaluate(`\n      (() => {\n        return new Promise((resolve) => {\n          const container = document.querySelector('${this.selector}');\n          if (!container) {\n            resolve(null);\n            return;\n          }\n          \n          const scrollEl = container.querySelector('[data-virtualized]') ||\n                          container.querySelector('[style*=\"overflow\"]') ||\n                          container;\n          \n          const frames = [];\n          let lastTime = performance.now();\n          let itemsRendered = 0;\n          let rafId;\n          \n          // Count initial items\n          const countItems = () => \n            scrollEl.querySelectorAll('[data-index], [role=\"treeitem\"], [role=\"row\"]').length;\n          \n          const initialItems = countItems();\n          \n          // Start measuring frames\n          const measureFrame = () => {\n            const now = performance.now();\n            frames.push(now - lastTime);\n            lastTime = now;\n            \n            const currentItems = countItems();\n            if (currentItems !== itemsRendered) {\n              itemsRendered = Math.max(itemsRendered, currentItems);\n            }\n            \n            rafId = requestAnimationFrame(measureFrame);\n          };\n          \n          rafId = requestAnimationFrame(measureFrame);\n          \n          // Scroll\n          const startScroll = performance.now();\n          const startTop = scrollEl.scrollTop;\n          \n          const scrollStep = () => {\n            const elapsed = performance.now() - startScroll;\n            const progress = Math.min(elapsed / ${duration}, 1);\n            scrollEl.scrollTop = startTop + (${scrollDistance} * progress);\n            \n            if (progress < 1) {\n              requestAnimationFrame(scrollStep);\n            } else {\n              // Stop measuring and calculate results\n              cancelAnimationFrame(rafId);\n              \n              const fps = frames.length / (${duration} / 1000);\n              const avgFrameTime = frames.reduce((a, b) => a + b, 0) / frames.length;\n              const maxFrameTime = Math.max(...frames);\n              const droppedFrames = frames.filter(f => f > 33.33).length; // >30fps threshold\n              \n              resolve({\n                fps: Math.round(fps),\n                avgFrameTime: Math.round(avgFrameTime * 100) / 100,\n                maxFrameTime: Math.round(maxFrameTime * 100) / 100,\n                droppedFrames,\n                duration: ${duration},\n                distance: ${scrollDistance},\n                itemsRendered\n              });\n            }\n          };\n          \n          requestAnimationFrame(scrollStep);\n        });\n      })()\n    `) as ScrollPerformance | null;\n\n    if (!result) {\n      throw new Error(`Virtual list not found: ${this.selector}`);\n    }\n\n    return result;\n  }\n\n  /**\n   * Assert item is visible\n   */\n  async assertItemVisible(text: string, message?: string): Promise<void> {\n    const item = await this.getItemByText(text);\n    if (!item || !item.visible) {\n      throw new Error(message || `Expected item \"${text}\" to be visible`);\n    }\n  }\n\n  /**\n   * Assert item count\n   */\n  async assertItemCount(expected: number, message?: string): Promise<void> {\n    const state = await this.getState();\n    if (state.totalCount !== expected) {\n      throw new Error(message || `Expected ${expected} items, got ${state.totalCount}`);\n    }\n  }\n\n  /**\n   * Assert minimum item count\n   */\n  async assertMinItemCount(min: number, message?: string): Promise<void> {\n    const state = await this.getState();\n    if (state.totalCount < min) {\n      throw new Error(message || `Expected at least ${min} items, got ${state.totalCount}`);\n    }\n  }\n\n  /**\n   * Assert item is selected\n   */\n  async assertItemSelected(text: string, message?: string): Promise<void> {\n    const item = await this.getItemByText(text);\n    if (!item?.selected) {\n      throw new Error(message || `Expected item \"${text}\" to be selected`);\n    }\n  }\n\n  /**\n   * Assert item is expanded (for trees)\n   */\n  async assertItemExpanded(text: string, message?: string): Promise<void> {\n    const item = await this.getItemByText(text);\n    if (!item?.expanded) {\n      throw new Error(message || `Expected item \"${text}\" to be expanded`);\n    }\n  }\n\n  /**\n   * Assert scroll performance meets threshold\n   */\n  async assertScrollPerformance(options: {\n    minFps?: number;\n    maxFrameTime?: number;\n    maxDroppedFrames?: number;\n  }): Promise<void> {\n    const metrics = await this.measureScrollPerformance();\n\n    if (options.minFps && metrics.fps < options.minFps) {\n      throw new Error(`Scroll FPS ${metrics.fps} is below minimum ${options.minFps}`);\n    }\n\n    if (options.maxFrameTime && metrics.maxFrameTime > options.maxFrameTime) {\n      throw new Error(`Max frame time ${metrics.maxFrameTime}ms exceeds ${options.maxFrameTime}ms`);\n    }\n\n    if (options.maxDroppedFrames && metrics.droppedFrames > options.maxDroppedFrames) {\n      throw new Error(`Dropped frames ${metrics.droppedFrames} exceeds ${options.maxDroppedFrames}`);\n    }\n  }\n\n  /**\n   * Scroll to top\n   */\n  async scrollToTop(): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        const scrollEl = container.querySelector('[data-virtualized]') ||\n                        container.querySelector('[style*=\"overflow\"]') ||\n                        container;\n        scrollEl.scrollTop = 0;\n      })()\n    `);\n  }\n\n  /**\n   * Scroll to bottom\n   */\n  async scrollToBottom(): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        const scrollEl = container.querySelector('[data-virtualized]') ||\n                        container.querySelector('[style*=\"overflow\"]') ||\n                        container;\n        scrollEl.scrollTop = scrollEl.scrollHeight;\n      })()\n    `);\n  }\n}\n\nexport default VirtualListTester;\n","/**\n * SessionManager - Multi-Session Parallel Testing\n * \n * Inspired by agent-browser's session management.\n * Enables running multiple test sessions in parallel with isolation.\n */\n\nimport type { DesktopTest } from './desktop-test';\n\n/** Session state */\nexport type SessionState = 'created' | 'active' | 'paused' | 'closed';\n\n/** Session info */\nexport interface SessionInfo {\n  /** Session ID */\n  id: string;\n  /** Session name */\n  name: string;\n  /** Session state */\n  state: SessionState;\n  /** Creation timestamp */\n  createdAt: number;\n  /** Last activity timestamp */\n  lastActivity: number;\n  /** Browser context ID */\n  contextId?: string;\n  /** Current URL */\n  url?: string;\n  /** Session metadata */\n  metadata: Record<string, unknown>;\n}\n\n/** Session options */\nexport interface SessionOptions {\n  /** Session name */\n  name?: string;\n  /** Initial URL */\n  url?: string;\n  /** Browser context options */\n  contextOptions?: {\n    /** Viewport size */\n    viewport?: { width: number; height: number };\n    /** User agent */\n    userAgent?: string;\n    /** Locale */\n    locale?: string;\n    /** Timezone */\n    timezone?: string;\n    /** Geolocation */\n    geolocation?: { latitude: number; longitude: number };\n    /** Permissions */\n    permissions?: string[];\n    /** Extra HTTP headers */\n    extraHTTPHeaders?: Record<string, string>;\n    /** Ignore HTTPS errors */\n    ignoreHTTPSErrors?: boolean;\n    /** Offline mode */\n    offline?: boolean;\n    /** Color scheme */\n    colorScheme?: 'light' | 'dark' | 'no-preference';\n  };\n  /** Session metadata */\n  metadata?: Record<string, unknown>;\n  /** Persist session state */\n  persist?: boolean;\n  /** Storage state file path */\n  storageStatePath?: string;\n}\n\n/** Session storage state */\nexport interface StorageState {\n  /** Cookies */\n  cookies: Array<{\n    name: string;\n    value: string;\n    domain: string;\n    path: string;\n    expires: number;\n    httpOnly: boolean;\n    secure: boolean;\n    sameSite: 'Strict' | 'Lax' | 'None';\n  }>;\n  /** Local storage */\n  localStorage: Array<{\n    origin: string;\n    data: Record<string, string>;\n  }>;\n  /** Session storage */\n  sessionStorage: Array<{\n    origin: string;\n    data: Record<string, string>;\n  }>;\n}\n\n/**\n * SessionManager - Manage multiple test sessions\n * \n * @example\n * ```typescript\n * const sessionManager = new SessionManager();\n * \n * // Create sessions\n * const session1 = await sessionManager.create('main');\n * const session2 = await sessionManager.create('secondary');\n * \n * // Run tests in parallel\n * await Promise.all([\n *   session1.test.navigate('/page1'),\n *   session2.test.navigate('/page2')\n * ]);\n * \n * // Switch active session\n * await sessionManager.switch('main');\n * \n * // List sessions\n * const sessions = sessionManager.list();\n * ```\n */\nexport class SessionManager {\n  private sessions: Map<string, Session> = new Map();\n  private activeSessionId: string | null = null;\n  private sessionCounter = 0;\n  private createTestFn: (options?: SessionOptions) => Promise<DesktopTest>;\n\n  constructor(createTestFn: (options?: SessionOptions) => Promise<DesktopTest>) {\n    this.createTestFn = createTestFn;\n  }\n\n  /**\n   * Create a new session\n   */\n  async create(nameOrOptions?: string | SessionOptions): Promise<Session> {\n    const options: SessionOptions = typeof nameOrOptions === 'string'\n      ? { name: nameOrOptions }\n      : nameOrOptions || {};\n\n    const id = `session-${++this.sessionCounter}`;\n    const name = options.name || id;\n\n    // Check for duplicate names\n    for (const session of this.sessions.values()) {\n      if (session.info.name === name) {\n        throw new Error(`Session with name \"${name}\" already exists`);\n      }\n    }\n\n    // Create test instance\n    const test = await this.createTestFn(options);\n\n    // Create session\n    const session = new Session({\n      id,\n      name,\n      test,\n      options,\n      onClose: () => this.handleSessionClose(id)\n    });\n\n    this.sessions.set(id, session);\n\n    // Set as active if first session\n    if (!this.activeSessionId) {\n      this.activeSessionId = id;\n    }\n\n    return session;\n  }\n\n  /**\n   * Get session by ID or name\n   */\n  get(idOrName: string): Session | undefined {\n    // Try by ID first\n    if (this.sessions.has(idOrName)) {\n      return this.sessions.get(idOrName);\n    }\n\n    // Try by name\n    for (const session of this.sessions.values()) {\n      if (session.info.name === idOrName) {\n        return session;\n      }\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Get the active session\n   */\n  getActive(): Session | undefined {\n    if (!this.activeSessionId) return undefined;\n    return this.sessions.get(this.activeSessionId);\n  }\n\n  /**\n   * Switch to a different session\n   */\n  async switch(idOrName: string): Promise<Session> {\n    const session = this.get(idOrName);\n    if (!session) {\n      throw new Error(`Session not found: ${idOrName}`);\n    }\n\n    if (session.info.state === 'closed') {\n      throw new Error(`Cannot switch to closed session: ${idOrName}`);\n    }\n\n    this.activeSessionId = session.info.id;\n    session.activate();\n\n    return session;\n  }\n\n  /**\n   * List all sessions\n   */\n  list(): SessionInfo[] {\n    return Array.from(this.sessions.values()).map(s => s.info);\n  }\n\n  /**\n   * Close a session\n   */\n  async close(idOrName: string): Promise<void> {\n    const session = this.get(idOrName);\n    if (!session) {\n      throw new Error(`Session not found: ${idOrName}`);\n    }\n\n    await session.close();\n  }\n\n  /**\n   * Close all sessions\n   */\n  async closeAll(): Promise<void> {\n    const closePromises = Array.from(this.sessions.values())\n      .filter(s => s.info.state !== 'closed')\n      .map(s => s.close());\n\n    await Promise.all(closePromises);\n  }\n\n  /**\n   * Run a function in parallel across multiple sessions\n   */\n  async parallel<T>(\n    fn: (session: Session) => Promise<T>,\n    options?: { filter?: (session: Session) => boolean }\n  ): Promise<Map<string, T>> {\n    let sessions = Array.from(this.sessions.values())\n      .filter(s => s.info.state === 'active');\n\n    if (options?.filter) {\n      sessions = sessions.filter(options.filter);\n    }\n\n    const results = new Map<string, T>();\n    const promises = sessions.map(async session => {\n      const result = await fn(session);\n      results.set(session.info.id, result);\n    });\n\n    await Promise.all(promises);\n    return results;\n  }\n\n  /**\n   * Run a function sequentially across sessions\n   */\n  async sequential<T>(\n    fn: (session: Session) => Promise<T>,\n    options?: { filter?: (session: Session) => boolean }\n  ): Promise<Map<string, T>> {\n    let sessions = Array.from(this.sessions.values())\n      .filter(s => s.info.state === 'active');\n\n    if (options?.filter) {\n      sessions = sessions.filter(options.filter);\n    }\n\n    const results = new Map<string, T>();\n    for (const session of sessions) {\n      const result = await fn(session);\n      results.set(session.info.id, result);\n    }\n\n    return results;\n  }\n\n  /**\n   * Get session count\n   */\n  get count(): number {\n    return this.sessions.size;\n  }\n\n  /**\n   * Get active session count\n   */\n  get activeCount(): number {\n    return Array.from(this.sessions.values())\n      .filter(s => s.info.state === 'active').length;\n  }\n\n  private handleSessionClose(id: string): void {\n    if (this.activeSessionId === id) {\n      // Find another active session\n      const activeSession = Array.from(this.sessions.values())\n        .find(s => s.info.state === 'active' && s.info.id !== id);\n      this.activeSessionId = activeSession?.info.id || null;\n    }\n  }\n}\n\n/**\n * Session - Individual test session\n */\nexport class Session {\n  private _info: SessionInfo;\n  private _test: DesktopTest;\n  private _options: SessionOptions;\n  private onClose: () => void;\n\n  constructor(config: {\n    id: string;\n    name: string;\n    test: DesktopTest;\n    options: SessionOptions;\n    onClose: () => void;\n  }) {\n    this._info = {\n      id: config.id,\n      name: config.name,\n      state: 'active',\n      createdAt: Date.now(),\n      lastActivity: Date.now(),\n      metadata: config.options.metadata || {}\n    };\n\n    this._test = config.test;\n    this._options = config.options;\n    this.onClose = config.onClose;\n  }\n\n  /**\n   * Get session info\n   */\n  get info(): SessionInfo {\n    return { ...this._info };\n  }\n\n  /**\n   * Get session options\n   */\n  get options(): SessionOptions {\n    return { ...this._options };\n  }\n\n  /**\n   * Get test instance\n   */\n  get test(): DesktopTest {\n    this.updateActivity();\n    return this._test;\n  }\n\n  /**\n   * Activate this session\n   */\n  activate(): void {\n    if (this._info.state === 'closed') {\n      throw new Error('Cannot activate closed session');\n    }\n    this._info.state = 'active';\n    this.updateActivity();\n  }\n\n  /**\n   * Pause this session\n   */\n  pause(): void {\n    if (this._info.state === 'closed') {\n      throw new Error('Cannot pause closed session');\n    }\n    this._info.state = 'paused';\n    this.updateActivity();\n  }\n\n  /**\n   * Close this session\n   */\n  async close(): Promise<void> {\n    if (this._info.state === 'closed') return;\n\n    try {\n      await this._test.disconnect();\n    } catch {\n      // Ignore disconnect errors\n    }\n\n    this._info.state = 'closed';\n    this.onClose();\n  }\n\n  /**\n   * Save session storage state\n   */\n  async saveState(filePath?: string): Promise<StorageState> {\n    // TODO: Save to file if filePath provided\n    void filePath;\n    \n    const state = await this._test.evaluate(`\n      (() => {\n        const cookies = document.cookie.split(';').map(c => {\n          const [name, value] = c.trim().split('=');\n          return { name, value, domain: location.hostname, path: '/', expires: -1, httpOnly: false, secure: location.protocol === 'https:', sameSite: 'Lax' };\n        });\n        \n        const localStorage = [{\n          origin: location.origin,\n          data: Object.fromEntries(Object.entries(window.localStorage))\n        }];\n        \n        const sessionStorage = [{\n          origin: location.origin,\n          data: Object.fromEntries(Object.entries(window.sessionStorage))\n        }];\n        \n        return { cookies, localStorage, sessionStorage };\n      })()\n    `) as StorageState;\n\n    // TODO: Save to file if filePath provided\n\n    return state;\n  }\n\n  /**\n   * Load session storage state\n   */\n  async loadState(state: StorageState): Promise<void> {\n    await this._test.evaluate(`\n      (() => {\n        // Restore localStorage\n        const localData = ${JSON.stringify(state.localStorage[0]?.data || {})};\n        for (const [key, value] of Object.entries(localData)) {\n          window.localStorage.setItem(key, value);\n        }\n        \n        // Restore sessionStorage\n        const sessionData = ${JSON.stringify(state.sessionStorage[0]?.data || {})};\n        for (const [key, value] of Object.entries(sessionData)) {\n          window.sessionStorage.setItem(key, value);\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Set session metadata\n   */\n  setMetadata(key: string, value: unknown): void {\n    this._info.metadata[key] = value;\n    this.updateActivity();\n  }\n\n  /**\n   * Get session metadata\n   */\n  getMetadata<T = unknown>(key: string): T | undefined {\n    return this._info.metadata[key] as T | undefined;\n  }\n\n  private updateActivity(): void {\n    this._info.lastActivity = Date.now();\n  }\n}\n\nexport default SessionManager;\n","/**\n * Visualizer - Test Execution Flow Visualization\n * \n * Inspired by UI-TARS Visualizer.\n * Generates visual reports of test execution for debugging and review.\n */\n\n/** Test step type */\nexport type StepType = 'action' | 'assertion' | 'navigation' | 'wait' | 'screenshot' | 'error' | 'info';\n\n/** Test step status */\nexport type StepStatus = 'pending' | 'running' | 'passed' | 'failed' | 'skipped';\n\n/** Test step */\nexport interface TestStep {\n  /** Step ID */\n  id: string;\n  /** Step type */\n  type: StepType;\n  /** Step description */\n  description: string;\n  /** Step status */\n  status: StepStatus;\n  /** Start timestamp */\n  startTime: number;\n  /** End timestamp */\n  endTime?: number;\n  /** Duration in ms */\n  duration?: number;\n  /** Screenshot path (if captured) */\n  screenshot?: string;\n  /** Screenshot base64 data */\n  screenshotData?: string;\n  /** Error message (if failed) */\n  error?: string;\n  /** Error stack trace */\n  stackTrace?: string;\n  /** Step metadata */\n  metadata?: Record<string, unknown>;\n  /** Parent step ID (for nested steps) */\n  parentId?: string;\n  /** Child step IDs */\n  childIds?: string[];\n}\n\n/** Test run info */\nexport interface TestRunInfo {\n  /** Test run ID */\n  id: string;\n  /** Test name */\n  name: string;\n  /** Test file */\n  file?: string;\n  /** Start timestamp */\n  startTime: number;\n  /** End timestamp */\n  endTime?: number;\n  /** Duration in ms */\n  duration?: number;\n  /** Test status */\n  status: 'running' | 'passed' | 'failed' | 'skipped';\n  /** All steps */\n  steps: TestStep[];\n  /** Environment info */\n  environment?: {\n    os: string;\n    browser: string;\n    viewport: { width: number; height: number };\n  };\n  /** Error count */\n  errorCount: number;\n  /** Warning count */\n  warningCount: number;\n}\n\n/** Visualizer options */\nexport interface VisualizerOptions {\n  /** Auto-capture screenshots on steps */\n  autoScreenshot?: boolean;\n  /** Screenshot on failure only */\n  screenshotOnFailure?: boolean;\n  /** Include stack traces */\n  includeStackTrace?: boolean;\n  /** Output directory */\n  outputDir?: string;\n  /** Report filename */\n  reportFilename?: string;\n}\n\n/**\n * Visualizer - Create visual test execution reports\n * \n * @example\n * ```typescript\n * const visualizer = new Visualizer({ outputDir: './reports' });\n * \n * visualizer.startRun('Login Test');\n * \n * const step1 = visualizer.startStep('action', 'Click login button');\n * await test.click('#login');\n * visualizer.endStep(step1, 'passed');\n * \n * visualizer.endRun();\n * await visualizer.generateReport('./reports/login-test.html');\n * ```\n */\nexport class Visualizer {\n  private options: VisualizerOptions;\n  private currentRun: TestRunInfo | null = null;\n  private runs: TestRunInfo[] = [];\n  private stepCounter = 0;\n\n  constructor(options: VisualizerOptions = {}) {\n    this.options = {\n      autoScreenshot: false,\n      screenshotOnFailure: true,\n      includeStackTrace: true,\n      outputDir: './reports',\n      reportFilename: 'test-report',\n      ...options\n    };\n  }\n\n  /**\n   * Start a new test run\n   */\n  startRun(name: string, file?: string): TestRunInfo {\n    this.currentRun = {\n      id: `run-${Date.now()}`,\n      name,\n      file,\n      startTime: Date.now(),\n      status: 'running',\n      steps: [],\n      errorCount: 0,\n      warningCount: 0\n    };\n\n    this.runs.push(this.currentRun);\n    return this.currentRun;\n  }\n\n  /**\n   * End the current test run\n   */\n  endRun(status?: 'passed' | 'failed' | 'skipped'): TestRunInfo | null {\n    if (!this.currentRun) return null;\n\n    this.currentRun.endTime = Date.now();\n    this.currentRun.duration = this.currentRun.endTime - this.currentRun.startTime;\n\n    // Determine status from steps if not provided\n    if (!status) {\n      const hasFailure = this.currentRun.steps.some(s => s.status === 'failed');\n      status = hasFailure ? 'failed' : 'passed';\n    }\n\n    this.currentRun.status = status;\n\n    const run = this.currentRun;\n    this.currentRun = null;\n    return run;\n  }\n\n  /**\n   * Start a new step\n   */\n  startStep(type: StepType, description: string, metadata?: Record<string, unknown>): string {\n    if (!this.currentRun) {\n      throw new Error('No active test run. Call startRun() first.');\n    }\n\n    const step: TestStep = {\n      id: `step-${++this.stepCounter}`,\n      type,\n      description,\n      status: 'running',\n      startTime: Date.now(),\n      metadata\n    };\n\n    this.currentRun.steps.push(step);\n    return step.id;\n  }\n\n  /**\n   * End a step\n   */\n  endStep(\n    stepId: string,\n    status: StepStatus,\n    options?: { error?: string; screenshot?: string; screenshotData?: string }\n  ): void {\n    if (!this.currentRun) return;\n\n    const step = this.currentRun.steps.find(s => s.id === stepId);\n    if (!step) return;\n\n    step.endTime = Date.now();\n    step.duration = step.endTime - step.startTime;\n    step.status = status;\n\n    if (options?.error) {\n      step.error = options.error;\n      if (this.options.includeStackTrace) {\n        step.stackTrace = new Error().stack;\n      }\n      this.currentRun.errorCount++;\n    }\n\n    if (options?.screenshot) {\n      step.screenshot = options.screenshot;\n    }\n\n    if (options?.screenshotData) {\n      step.screenshotData = options.screenshotData;\n    }\n  }\n\n  /**\n   * Add a step that already completed\n   */\n  addStep(step: Partial<TestStep>): void {\n    if (!this.currentRun) return;\n\n    const fullStep: TestStep = {\n      id: step.id || `step-${++this.stepCounter}`,\n      type: step.type || 'info',\n      description: step.description || '',\n      status: step.status || 'passed',\n      startTime: step.startTime || Date.now(),\n      endTime: step.endTime || Date.now(),\n      duration: step.duration,\n      screenshot: step.screenshot,\n      screenshotData: step.screenshotData,\n      error: step.error,\n      stackTrace: step.stackTrace,\n      metadata: step.metadata\n    };\n\n    if (!fullStep.duration && fullStep.endTime && fullStep.startTime) {\n      fullStep.duration = fullStep.endTime - fullStep.startTime;\n    }\n\n    if (fullStep.status === 'failed') {\n      this.currentRun.errorCount++;\n    }\n\n    this.currentRun.steps.push(fullStep);\n  }\n\n  /**\n   * Add a screenshot to the current run\n   */\n  addScreenshot(screenshotData: string, description?: string): void {\n    this.addStep({\n      type: 'screenshot',\n      description: description || 'Screenshot',\n      status: 'passed',\n      screenshotData\n    });\n  }\n\n  /**\n   * Add an info message\n   */\n  addInfo(message: string, metadata?: Record<string, unknown>): void {\n    this.addStep({\n      type: 'info',\n      description: message,\n      status: 'passed',\n      metadata\n    });\n  }\n\n  /**\n   * Add an error\n   */\n  addError(error: Error | string, description?: string): void {\n    const errorMessage = error instanceof Error ? error.message : error;\n    const stackTrace = error instanceof Error ? error.stack : undefined;\n\n    this.addStep({\n      type: 'error',\n      description: description || errorMessage,\n      status: 'failed',\n      error: errorMessage,\n      stackTrace\n    });\n  }\n\n  /**\n   * Get current run\n   */\n  getCurrentRun(): TestRunInfo | null {\n    return this.currentRun;\n  }\n\n  /**\n   * Get all runs\n   */\n  getAllRuns(): TestRunInfo[] {\n    return [...this.runs];\n  }\n\n  /**\n   * Generate HTML report\n   */\n  async generateReport(outputPath?: string): Promise<string> {\n    const _path = outputPath || `${this.options.outputDir}/${this.options.reportFilename}.html`;\n    // TODO: Write to file in a real implementation\n    void _path;\n    \n    const html = this.generateHTML();\n    return html;\n  }\n\n  /**\n   * Export to YAML format\n   */\n  exportYAML(): string {\n    const runs = this.runs.map(run => ({\n      name: run.name,\n      file: run.file,\n      status: run.status,\n      duration: `${run.duration}ms`,\n      startTime: new Date(run.startTime).toISOString(),\n      endTime: run.endTime ? new Date(run.endTime).toISOString() : null,\n      steps: run.steps.map(step => ({\n        type: step.type,\n        description: step.description,\n        status: step.status,\n        duration: step.duration ? `${step.duration}ms` : null,\n        error: step.error || null\n      }))\n    }));\n\n    // Simple YAML serialization\n    return this.toYAML(runs);\n  }\n\n  /**\n   * Export to JSON format\n   */\n  exportJSON(): string {\n    return JSON.stringify(this.runs, null, 2);\n  }\n\n  /**\n   * Clear all runs\n   */\n  clear(): void {\n    this.runs = [];\n    this.currentRun = null;\n    this.stepCounter = 0;\n  }\n\n  // Private methods\n\n  private generateHTML(): string {\n    const totalTests = this.runs.length;\n    const passedTests = this.runs.filter(r => r.status === 'passed').length;\n    const failedTests = this.runs.filter(r => r.status === 'failed').length;\n    const totalDuration = this.runs.reduce((sum, r) => sum + (r.duration || 0), 0);\n\n    return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>DeskPilot Test Report</title>\n  <style>\n    :root {\n      --bg-primary: #0c1222;\n      --bg-secondary: #151e32;\n      --bg-tertiary: #1e293b;\n      --text-primary: #f1f5f9;\n      --text-secondary: #94a3b8;\n      --accent-blue: #3b82f6;\n      --accent-green: #22c55e;\n      --accent-red: #ef4444;\n      --accent-yellow: #f59e0b;\n      --border: #334155;\n    }\n    \n    * { box-sizing: border-box; margin: 0; padding: 0; }\n    \n    body {\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      background: var(--bg-primary);\n      color: var(--text-primary);\n      line-height: 1.6;\n      padding: 20px;\n    }\n    \n    .container { max-width: 1200px; margin: 0 auto; }\n    \n    .header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      margin-bottom: 30px;\n      padding-bottom: 20px;\n      border-bottom: 1px solid var(--border);\n    }\n    \n    .header h1 {\n      font-size: 24px;\n      display: flex;\n      align-items: center;\n      gap: 12px;\n    }\n    \n    .logo {\n      width: 40px;\n      height: 40px;\n    }\n    \n    .summary {\n      display: grid;\n      grid-template-columns: repeat(4, 1fr);\n      gap: 16px;\n      margin-bottom: 30px;\n    }\n    \n    .summary-card {\n      background: var(--bg-secondary);\n      border-radius: 12px;\n      padding: 20px;\n      text-align: center;\n    }\n    \n    .summary-card .value {\n      font-size: 32px;\n      font-weight: bold;\n      margin-bottom: 4px;\n    }\n    \n    .summary-card .label {\n      color: var(--text-secondary);\n      font-size: 14px;\n    }\n    \n    .summary-card.passed .value { color: var(--accent-green); }\n    .summary-card.failed .value { color: var(--accent-red); }\n    \n    .test-run {\n      background: var(--bg-secondary);\n      border-radius: 12px;\n      margin-bottom: 16px;\n      overflow: hidden;\n    }\n    \n    .test-run-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 16px 20px;\n      cursor: pointer;\n      border-bottom: 1px solid var(--border);\n    }\n    \n    .test-run-header:hover {\n      background: var(--bg-tertiary);\n    }\n    \n    .test-name {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n    }\n    \n    .status-badge {\n      padding: 4px 12px;\n      border-radius: 20px;\n      font-size: 12px;\n      font-weight: 500;\n    }\n    \n    .status-badge.passed {\n      background: rgba(34, 197, 94, 0.2);\n      color: var(--accent-green);\n    }\n    \n    .status-badge.failed {\n      background: rgba(239, 68, 68, 0.2);\n      color: var(--accent-red);\n    }\n    \n    .test-run-body {\n      padding: 16px 20px;\n    }\n    \n    .step {\n      display: flex;\n      align-items: flex-start;\n      gap: 12px;\n      padding: 12px 0;\n      border-bottom: 1px solid var(--border);\n    }\n    \n    .step:last-child { border-bottom: none; }\n    \n    .step-icon {\n      width: 24px;\n      height: 24px;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 12px;\n      flex-shrink: 0;\n    }\n    \n    .step-icon.action { background: var(--accent-blue); }\n    .step-icon.assertion { background: var(--accent-green); }\n    .step-icon.navigation { background: var(--accent-yellow); }\n    .step-icon.error { background: var(--accent-red); }\n    .step-icon.screenshot { background: #8b5cf6; }\n    .step-icon.info { background: var(--text-secondary); }\n    \n    .step-content { flex: 1; }\n    \n    .step-description {\n      margin-bottom: 4px;\n    }\n    \n    .step-meta {\n      font-size: 12px;\n      color: var(--text-secondary);\n    }\n    \n    .step-error {\n      background: rgba(239, 68, 68, 0.1);\n      border: 1px solid var(--accent-red);\n      border-radius: 8px;\n      padding: 12px;\n      margin-top: 8px;\n      font-family: monospace;\n      font-size: 13px;\n      white-space: pre-wrap;\n    }\n    \n    .step-screenshot {\n      max-width: 400px;\n      border-radius: 8px;\n      margin-top: 8px;\n      border: 1px solid var(--border);\n    }\n    \n    .duration {\n      color: var(--text-secondary);\n      font-size: 14px;\n    }\n    \n    .timeline {\n      display: flex;\n      height: 4px;\n      background: var(--bg-tertiary);\n      border-radius: 2px;\n      margin: 20px 0;\n      overflow: hidden;\n    }\n    \n    .timeline-segment {\n      height: 100%;\n    }\n    \n    .timeline-segment.passed { background: var(--accent-green); }\n    .timeline-segment.failed { background: var(--accent-red); }\n    .timeline-segment.running { background: var(--accent-blue); }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>\n        <svg class=\"logo\" viewBox=\"0 0 120 120\" xmlns=\"http://www.w3.org/2000/svg\">\n          <defs>\n            <linearGradient id=\"g\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n              <stop offset=\"0%\" stop-color=\"#3b82f6\"/>\n              <stop offset=\"100%\" stop-color=\"#8b5cf6\"/>\n            </linearGradient>\n          </defs>\n          <circle cx=\"60\" cy=\"60\" r=\"54\" fill=\"#0c1222\"/>\n          <circle cx=\"60\" cy=\"60\" r=\"50\" fill=\"none\" stroke=\"url(#g)\" stroke-width=\"2\"/>\n          <g fill=\"#ffffff\">\n            <polygon points=\"30,65 90,50 55,60 60,75\"/>\n            <polygon points=\"30,65 55,60 50,50\" fill-opacity=\"0.7\"/>\n          </g>\n          <circle cx=\"25\" cy=\"68\" r=\"3\" fill=\"#22d3ee\"/>\n        </svg>\n        DeskPilot Test Report\n      </h1>\n      <div class=\"duration\">Generated: ${new Date().toLocaleString()}</div>\n    </div>\n    \n    <div class=\"summary\">\n      <div class=\"summary-card\">\n        <div class=\"value\">${totalTests}</div>\n        <div class=\"label\">Total Tests</div>\n      </div>\n      <div class=\"summary-card passed\">\n        <div class=\"value\">${passedTests}</div>\n        <div class=\"label\">Passed</div>\n      </div>\n      <div class=\"summary-card failed\">\n        <div class=\"value\">${failedTests}</div>\n        <div class=\"label\">Failed</div>\n      </div>\n      <div class=\"summary-card\">\n        <div class=\"value\">${this.formatDuration(totalDuration)}</div>\n        <div class=\"label\">Duration</div>\n      </div>\n    </div>\n    \n    ${this.runs.map(run => this.renderTestRun(run)).join('')}\n  </div>\n  \n  <script>\n    document.querySelectorAll('.test-run-header').forEach(header => {\n      header.addEventListener('click', () => {\n        const body = header.nextElementSibling;\n        body.style.display = body.style.display === 'none' ? 'block' : 'none';\n      });\n    });\n  </script>\n</body>\n</html>`;\n  }\n\n  private renderTestRun(run: TestRunInfo): string {\n    const stepIcons: Record<StepType, string> = {\n      action: '',\n      assertion: '',\n      navigation: '',\n      wait: '',\n      screenshot: '',\n      error: '',\n      info: ''\n    };\n\n    return `\n    <div class=\"test-run\">\n      <div class=\"test-run-header\">\n        <div class=\"test-name\">\n          <span class=\"status-badge ${run.status}\">${run.status.toUpperCase()}</span>\n          <span>${run.name}</span>\n        </div>\n        <div class=\"duration\">${this.formatDuration(run.duration || 0)}</div>\n      </div>\n      <div class=\"test-run-body\">\n        <div class=\"timeline\">\n          ${run.steps.map(step => `\n            <div class=\"timeline-segment ${step.status}\" \n                 style=\"width: ${((step.duration || 1) / (run.duration || 1)) * 100}%\"></div>\n          `).join('')}\n        </div>\n        ${run.steps.map(step => `\n          <div class=\"step\">\n            <div class=\"step-icon ${step.type}\">${stepIcons[step.type] || ''}</div>\n            <div class=\"step-content\">\n              <div class=\"step-description\">${step.description}</div>\n              <div class=\"step-meta\">\n                ${step.duration ? `${step.duration}ms` : ''} \n                ${step.status !== 'passed' ? ` ${step.status}` : ''}\n              </div>\n              ${step.error ? `<div class=\"step-error\">${step.error}</div>` : ''}\n              ${step.screenshotData ? `<img class=\"step-screenshot\" src=\"${step.screenshotData}\" alt=\"Screenshot\">` : ''}\n            </div>\n          </div>\n        `).join('')}\n      </div>\n    </div>`;\n  }\n\n  private formatDuration(ms: number): string {\n    if (ms < 1000) return `${ms}ms`;\n    if (ms < 60000) return `${(ms / 1000).toFixed(1)}s`;\n    return `${Math.floor(ms / 60000)}m ${Math.floor((ms % 60000) / 1000)}s`;\n  }\n\n  private toYAML(obj: unknown, indent = 0): string {\n    const spaces = '  '.repeat(indent);\n    \n    if (Array.isArray(obj)) {\n      return obj.map(item => `${spaces}- ${this.toYAML(item, indent + 1).trim()}`).join('\\n');\n    }\n    \n    if (typeof obj === 'object' && obj !== null) {\n      return Object.entries(obj)\n        .filter(([, v]) => v !== null && v !== undefined)\n        .map(([k, v]) => {\n          if (typeof v === 'object') {\n            return `${spaces}${k}:\\n${this.toYAML(v, indent + 1)}`;\n          }\n          return `${spaces}${k}: ${v}`;\n        })\n        .join('\\n');\n    }\n    \n    return String(obj);\n  }\n}\n\nexport default Visualizer;\n","/**\n * MonacoTester - Monaco Editor Testing Module\n * \n * Specialized testing for Monaco Editor integration.\n * Supports syntax highlighting, code navigation, completions, and more.\n */\n\nimport type { DesktopTest } from './desktop-test';\n\n/** Cursor position */\nexport interface CursorPosition {\n  lineNumber: number;\n  column: number;\n}\n\n/** Selection range */\nexport interface SelectionRange {\n  startLineNumber: number;\n  startColumn: number;\n  endLineNumber: number;\n  endColumn: number;\n}\n\n/** Token info */\nexport interface TokenInfo {\n  /** Token text */\n  text: string;\n  /** Token type/scope */\n  type: string;\n  /** Start column */\n  startColumn: number;\n  /** End column */\n  endColumn: number;\n  /** Foreground color */\n  foreground?: string;\n  /** Font style (bold, italic) */\n  fontStyle?: string;\n}\n\n/** Completion item */\nexport interface CompletionItem {\n  /** Label */\n  label: string;\n  /** Kind (function, variable, etc.) */\n  kind: string;\n  /** Detail */\n  detail?: string;\n  /** Documentation */\n  documentation?: string;\n  /** Insert text */\n  insertText?: string;\n}\n\n/** Diagnostic (error/warning) */\nexport interface Diagnostic {\n  /** Severity (error, warning, info, hint) */\n  severity: 'error' | 'warning' | 'info' | 'hint';\n  /** Message */\n  message: string;\n  /** Start line */\n  startLineNumber: number;\n  /** Start column */\n  startColumn: number;\n  /** End line */\n  endLineNumber: number;\n  /** End column */\n  endColumn: number;\n  /** Source */\n  source?: string;\n  /** Code */\n  code?: string;\n}\n\n/** Editor state */\nexport interface EditorState {\n  /** Current content */\n  content: string;\n  /** Line count */\n  lineCount: number;\n  /** Current cursor position */\n  cursor: CursorPosition;\n  /** Current selection */\n  selection: SelectionRange | null;\n  /** Language ID */\n  language: string;\n  /** Is read-only */\n  readOnly: boolean;\n  /** Has focus */\n  hasFocus: boolean;\n  /** Visible line range */\n  visibleRange: { startLine: number; endLine: number };\n}\n\n/**\n * MonacoTester - Test Monaco Editor functionality\n * \n * @example\n * ```typescript\n * const editor = new MonacoTester(test, '[data-testid=\"code-editor\"]');\n * \n * // Set content\n * await editor.setValue('int main() { return 0; }');\n * \n * // Navigate\n * await editor.goToLine(10);\n * \n * // Test syntax highlighting\n * const tokens = await editor.getTokensAtLine(1);\n * await editor.assertTokenType(1, 'int', 'keyword');\n * \n * // Test code completion\n * await editor.triggerCompletion();\n * await editor.selectCompletion('printf');\n * ```\n */\nexport class MonacoTester {\n  private test: DesktopTest;\n  private selector: string;\n\n  constructor(test: DesktopTest, selector: string = '[data-testid=\"code-editor\"]') {\n    this.test = test;\n    this.selector = selector;\n  }\n\n  /**\n   * Get the current editor state\n   */\n  async getState(): Promise<EditorState> {\n    const state = await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return null;\n        \n        // Find Monaco editor instance\n        const editorElement = container.querySelector('.monaco-editor');\n        if (!editorElement) return null;\n        \n        // Access Monaco API\n        const editor = editorElement.__monacoEditor || \n                      window.monaco?.editor?.getEditors?.()?.find(e => \n                        container.contains(e.getDomNode())\n                      );\n        \n        if (!editor) return null;\n        \n        const model = editor.getModel();\n        const position = editor.getPosition();\n        const selection = editor.getSelection();\n        const visibleRanges = editor.getVisibleRanges();\n        \n        return {\n          content: model?.getValue() || '',\n          lineCount: model?.getLineCount() || 0,\n          cursor: position ? {\n            lineNumber: position.lineNumber,\n            column: position.column\n          } : { lineNumber: 1, column: 1 },\n          selection: selection && !selection.isEmpty() ? {\n            startLineNumber: selection.startLineNumber,\n            startColumn: selection.startColumn,\n            endLineNumber: selection.endLineNumber,\n            endColumn: selection.endColumn\n          } : null,\n          language: model?.getLanguageId() || 'plaintext',\n          readOnly: editor.getOption?.(monaco.editor.EditorOption.readOnly) || false,\n          hasFocus: editor.hasTextFocus(),\n          visibleRange: visibleRanges?.[0] ? {\n            startLine: visibleRanges[0].startLineNumber,\n            endLine: visibleRanges[0].endLineNumber\n          } : { startLine: 1, endLine: 1 }\n        };\n      })()\n    `) as EditorState | null;\n\n    if (!state) {\n      throw new Error(`Monaco editor not found: ${this.selector}`);\n    }\n\n    return state;\n  }\n\n  /**\n   * Get editor content\n   */\n  async getValue(): Promise<string> {\n    const state = await this.getState();\n    return state.content;\n  }\n\n  /**\n   * Set editor content\n   */\n  async setValue(content: string): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const editorElement = container?.querySelector('.monaco-editor');\n        const editor = editorElement?.__monacoEditor || \n                      window.monaco?.editor?.getEditors?.()?.find(e => \n                        container.contains(e.getDomNode())\n                      );\n        if (editor) {\n          editor.setValue(${JSON.stringify(content)});\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Insert text at current position\n   */\n  async insertText(text: string): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const editorElement = container?.querySelector('.monaco-editor');\n        const editor = editorElement?.__monacoEditor || \n                      window.monaco?.editor?.getEditors?.()?.find(e => \n                        container.contains(e.getDomNode())\n                      );\n        if (editor) {\n          editor.trigger('test', 'type', { text: ${JSON.stringify(text)} });\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Get line content\n   */\n  async getLineContent(lineNumber: number): Promise<string> {\n    const content = await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const editorElement = container?.querySelector('.monaco-editor');\n        const editor = editorElement?.__monacoEditor || \n                      window.monaco?.editor?.getEditors?.()?.find(e => \n                        container.contains(e.getDomNode())\n                      );\n        return editor?.getModel()?.getLineContent(${lineNumber}) || '';\n      })()\n    `) as string;\n\n    return content;\n  }\n\n  /**\n   * Go to a specific line\n   */\n  async goToLine(lineNumber: number, column: number = 1): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const editorElement = container?.querySelector('.monaco-editor');\n        const editor = editorElement?.__monacoEditor || \n                      window.monaco?.editor?.getEditors?.()?.find(e => \n                        container.contains(e.getDomNode())\n                      );\n        if (editor) {\n          editor.setPosition({ lineNumber: ${lineNumber}, column: ${column} });\n          editor.revealLineInCenter(${lineNumber});\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Set cursor position\n   */\n  async setCursor(lineNumber: number, column: number): Promise<void> {\n    await this.goToLine(lineNumber, column);\n  }\n\n  /**\n   * Get cursor position\n   */\n  async getCursor(): Promise<CursorPosition> {\n    const state = await this.getState();\n    return state.cursor;\n  }\n\n  /**\n   * Select text range\n   */\n  async select(range: SelectionRange): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const editorElement = container?.querySelector('.monaco-editor');\n        const editor = editorElement?.__monacoEditor || \n                      window.monaco?.editor?.getEditors?.()?.find(e => \n                        container.contains(e.getDomNode())\n                      );\n        if (editor) {\n          editor.setSelection({\n            startLineNumber: ${range.startLineNumber},\n            startColumn: ${range.startColumn},\n            endLineNumber: ${range.endLineNumber},\n            endColumn: ${range.endColumn}\n          });\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Select all\n   */\n  async selectAll(): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const editorElement = container?.querySelector('.monaco-editor');\n        const editor = editorElement?.__monacoEditor || \n                      window.monaco?.editor?.getEditors?.()?.find(e => \n                        container.contains(e.getDomNode())\n                      );\n        if (editor) {\n          const model = editor.getModel();\n          editor.setSelection({\n            startLineNumber: 1,\n            startColumn: 1,\n            endLineNumber: model.getLineCount(),\n            endColumn: model.getLineMaxColumn(model.getLineCount())\n          });\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Get tokens at a specific line\n   */\n  async getTokensAtLine(lineNumber: number): Promise<TokenInfo[]> {\n    const tokens = await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const editorElement = container?.querySelector('.monaco-editor');\n        const editor = editorElement?.__monacoEditor || \n                      window.monaco?.editor?.getEditors?.()?.find(e => \n                        container.contains(e.getDomNode())\n                      );\n        if (!editor) return [];\n        \n        const model = editor.getModel();\n        if (!model) return [];\n        \n        const lineContent = model.getLineContent(${lineNumber});\n        const tokenizationResult = monaco.editor.tokenize(lineContent, model.getLanguageId());\n        \n        if (!tokenizationResult || !tokenizationResult[0]) return [];\n        \n        const tokens = tokenizationResult[0];\n        const result = [];\n        \n        for (let i = 0; i < tokens.length; i++) {\n          const startOffset = tokens[i].offset;\n          const endOffset = tokens[i + 1]?.offset || lineContent.length;\n          \n          result.push({\n            text: lineContent.substring(startOffset, endOffset),\n            type: tokens[i].type,\n            startColumn: startOffset + 1,\n            endColumn: endOffset + 1\n          });\n        }\n        \n        return result;\n      })()\n    `) as TokenInfo[];\n\n    return tokens;\n  }\n\n  /**\n   * Trigger code completion\n   */\n  async triggerCompletion(): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const editorElement = container?.querySelector('.monaco-editor');\n        const editor = editorElement?.__monacoEditor || \n                      window.monaco?.editor?.getEditors?.()?.find(e => \n                        container.contains(e.getDomNode())\n                      );\n        if (editor) {\n          editor.trigger('test', 'editor.action.triggerSuggest', {});\n        }\n      })()\n    `);\n\n    // Wait for suggestions to appear\n    await new Promise(resolve => setTimeout(resolve, 500));\n  }\n\n  /**\n   * Get completion suggestions\n   */\n  async getCompletions(): Promise<CompletionItem[]> {\n    const completions = await this.test.evaluate(`\n      (() => {\n        const suggestWidget = document.querySelector('.monaco-editor .suggest-widget');\n        if (!suggestWidget || suggestWidget.style.display === 'none') return [];\n        \n        const items = suggestWidget.querySelectorAll('.monaco-list-row');\n        return Array.from(items).map(item => ({\n          label: item.querySelector('.label-name')?.textContent || '',\n          kind: item.querySelector('.icon')?.className?.match(/\\\\bmethod\\\\b|\\\\bfunction\\\\b|\\\\bvariable\\\\b|\\\\bclass\\\\b/)?.[0] || 'unknown',\n          detail: item.querySelector('.details-label')?.textContent || ''\n        }));\n      })()\n    `) as CompletionItem[];\n\n    return completions;\n  }\n\n  /**\n   * Select a completion item\n   */\n  async selectCompletion(label: string): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const suggestWidget = document.querySelector('.monaco-editor .suggest-widget');\n        if (!suggestWidget) return;\n        \n        const items = suggestWidget.querySelectorAll('.monaco-list-row');\n        for (const item of items) {\n          if (item.textContent?.includes('${label}')) {\n            item.click();\n            return;\n          }\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Go to definition\n   */\n  async goToDefinition(): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const editorElement = container?.querySelector('.monaco-editor');\n        const editor = editorElement?.__monacoEditor || \n                      window.monaco?.editor?.getEditors?.()?.find(e => \n                        container.contains(e.getDomNode())\n                      );\n        if (editor) {\n          editor.trigger('test', 'editor.action.revealDefinition', {});\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Find all references\n   */\n  async findReferences(): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const editorElement = container?.querySelector('.monaco-editor');\n        const editor = editorElement?.__monacoEditor || \n                      window.monaco?.editor?.getEditors?.()?.find(e => \n                        container.contains(e.getDomNode())\n                      );\n        if (editor) {\n          editor.trigger('test', 'editor.action.goToReferences', {});\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Get diagnostics (errors, warnings)\n   */\n  async getDiagnostics(): Promise<Diagnostic[]> {\n    const diagnostics = await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const editorElement = container?.querySelector('.monaco-editor');\n        const editor = editorElement?.__monacoEditor || \n                      window.monaco?.editor?.getEditors?.()?.find(e => \n                        container.contains(e.getDomNode())\n                      );\n        if (!editor) return [];\n        \n        const model = editor.getModel();\n        if (!model) return [];\n        \n        const markers = monaco.editor.getModelMarkers({ resource: model.uri });\n        return markers.map(m => ({\n          severity: ['hint', 'info', 'warning', 'error'][m.severity - 1] || 'info',\n          message: m.message,\n          startLineNumber: m.startLineNumber,\n          startColumn: m.startColumn,\n          endLineNumber: m.endLineNumber,\n          endColumn: m.endColumn,\n          source: m.source,\n          code: m.code?.toString()\n        }));\n      })()\n    `) as Diagnostic[];\n\n    return diagnostics;\n  }\n\n  /**\n   * Focus the editor\n   */\n  async focus(): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const editorElement = container?.querySelector('.monaco-editor');\n        const editor = editorElement?.__monacoEditor || \n                      window.monaco?.editor?.getEditors?.()?.find(e => \n                        container.contains(e.getDomNode())\n                      );\n        if (editor) {\n          editor.focus();\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Execute an editor action\n   */\n  async executeAction(actionId: string): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const editorElement = container?.querySelector('.monaco-editor');\n        const editor = editorElement?.__monacoEditor || \n                      window.monaco?.editor?.getEditors?.()?.find(e => \n                        container.contains(e.getDomNode())\n                      );\n        if (editor) {\n          editor.trigger('test', '${actionId}', {});\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Undo\n   */\n  async undo(): Promise<void> {\n    await this.executeAction('undo');\n  }\n\n  /**\n   * Redo\n   */\n  async redo(): Promise<void> {\n    await this.executeAction('redo');\n  }\n\n  /**\n   * Format document\n   */\n  async format(): Promise<void> {\n    await this.executeAction('editor.action.formatDocument');\n  }\n\n  /**\n   * Toggle comment\n   */\n  async toggleComment(): Promise<void> {\n    await this.executeAction('editor.action.commentLine');\n  }\n\n  /**\n   * Assert content equals\n   */\n  async assertContent(expected: string, message?: string): Promise<void> {\n    const content = await this.getValue();\n    if (content !== expected) {\n      throw new Error(message || `Expected content to equal:\\n${expected}\\n\\nActual:\\n${content}`);\n    }\n  }\n\n  /**\n   * Assert content contains\n   */\n  async assertContains(text: string, message?: string): Promise<void> {\n    const content = await this.getValue();\n    if (!content.includes(text)) {\n      throw new Error(message || `Expected content to contain: ${text}`);\n    }\n  }\n\n  /**\n   * Assert token type at position\n   */\n  async assertTokenType(lineNumber: number, tokenText: string, expectedType: string, message?: string): Promise<void> {\n    const tokens = await this.getTokensAtLine(lineNumber);\n    const token = tokens.find(t => t.text.trim() === tokenText);\n    \n    if (!token) {\n      throw new Error(message || `Token \"${tokenText}\" not found at line ${lineNumber}`);\n    }\n    \n    if (!token.type.includes(expectedType)) {\n      throw new Error(message || `Expected token \"${tokenText}\" to be type \"${expectedType}\", got \"${token.type}\"`);\n    }\n  }\n\n  /**\n   * Assert no errors\n   */\n  async assertNoErrors(message?: string): Promise<void> {\n    const diagnostics = await this.getDiagnostics();\n    const errors = diagnostics.filter(d => d.severity === 'error');\n    \n    if (errors.length > 0) {\n      const errorMessages = errors.map(e => `  Line ${e.startLineNumber}: ${e.message}`).join('\\n');\n      throw new Error(message || `Expected no errors, found ${errors.length}:\\n${errorMessages}`);\n    }\n  }\n\n  /**\n   * Assert cursor position\n   */\n  async assertCursor(lineNumber: number, column: number, message?: string): Promise<void> {\n    const cursor = await this.getCursor();\n    if (cursor.lineNumber !== lineNumber || cursor.column !== column) {\n      throw new Error(message || `Expected cursor at (${lineNumber}, ${column}), got (${cursor.lineNumber}, ${cursor.column})`);\n    }\n  }\n}\n\nexport default MonacoTester;\n","/**\n * TauriDialogTester - Tauri Native Dialog Testing\n * \n * Test native file dialogs, message boxes, and system notifications\n * in Tauri applications.\n */\n\nimport type { DesktopTest } from './desktop-test';\n\n/** Dialog type */\nexport type DialogType = 'open' | 'save' | 'message' | 'confirm' | 'directory';\n\n/** File filter */\nexport interface FileFilter {\n  /** Filter name */\n  name: string;\n  /** Extensions (e.g., ['txt', 'md']) */\n  extensions: string[];\n}\n\n/** Dialog options */\nexport interface DialogOptions {\n  /** Dialog title */\n  title?: string;\n  /** Default path */\n  defaultPath?: string;\n  /** File filters */\n  filters?: FileFilter[];\n  /** Allow multiple selection */\n  multiple?: boolean;\n  /** Allow directory selection */\n  directory?: boolean;\n}\n\n/** Dialog result */\nexport interface DialogResult {\n  /** Whether dialog was cancelled */\n  cancelled: boolean;\n  /** Selected file path(s) */\n  filePaths?: string[];\n  /** For message dialogs, the button clicked */\n  response?: number;\n}\n\n/** Mock dialog configuration */\nexport interface MockDialogConfig {\n  /** Mock file paths to return */\n  filePaths?: string[];\n  /** Mock cancellation */\n  cancelled?: boolean;\n  /** Mock button response */\n  response?: number;\n  /** Delay before returning (ms) */\n  delay?: number;\n}\n\n/** Dialog invocation record */\nexport interface DialogInvocation {\n  /** Dialog type */\n  type: DialogType;\n  /** Options passed */\n  options: DialogOptions;\n  /** Result returned */\n  result: DialogResult;\n  /** Timestamp */\n  timestamp: number;\n}\n\n/**\n * TauriDialogTester - Test Tauri native dialogs\n * \n * @example\n * ```typescript\n * const dialog = new TauriDialogTester(test);\n * \n * // Mock file open dialog\n * await dialog.mockOpen({ filePaths: ['/path/to/file.c'] });\n * \n * // Trigger open dialog\n * await test.click('[data-testid=\"open-file\"]');\n * \n * // Verify dialog was called\n * const invocations = dialog.getInvocations();\n * assert.equal(invocations.length, 1);\n * ```\n */\nexport class TauriDialogTester {\n  private test: DesktopTest;\n  private mocks: Map<DialogType, MockDialogConfig> = new Map();\n  private _invocations: DialogInvocation[] = [];\n  private setupDone = false;\n\n  constructor(test: DesktopTest) {\n    this.test = test;\n  }\n\n  /**\n   * Get cached invocations (call getInvocations() for fresh data)\n   */\n  get cachedInvocations(): DialogInvocation[] {\n    return [...this._invocations];\n  }\n\n  /**\n   * Setup dialog interception\n   */\n  async setup(): Promise<void> {\n    if (this.setupDone) return;\n\n    await this.test.evaluate(`\n      (() => {\n        if (window.__tauriDialogMock) return;\n        window.__tauriDialogMock = {\n          mocks: {},\n          invocations: []\n        };\n        \n        // Store original Tauri dialog functions\n        const originalDialog = window.__TAURI__?.dialog || {};\n        \n        // Create mock dialog object\n        const mockDialog = {\n          open: async (options = {}) => {\n            const mock = window.__tauriDialogMock.mocks.open;\n            const result = mock ? {\n              cancelled: mock.cancelled || false,\n              filePaths: mock.filePaths || null\n            } : await originalDialog.open?.(options);\n            \n            window.__tauriDialogMock.invocations.push({\n              type: 'open',\n              options,\n              result,\n              timestamp: Date.now()\n            });\n            \n            if (mock?.delay) await new Promise(r => setTimeout(r, mock.delay));\n            \n            return mock?.cancelled ? null : (mock?.filePaths || result?.filePaths);\n          },\n          \n          save: async (options = {}) => {\n            const mock = window.__tauriDialogMock.mocks.save;\n            const result = mock ? {\n              cancelled: mock.cancelled || false,\n              filePaths: mock.filePaths || null\n            } : await originalDialog.save?.(options);\n            \n            window.__tauriDialogMock.invocations.push({\n              type: 'save',\n              options,\n              result,\n              timestamp: Date.now()\n            });\n            \n            if (mock?.delay) await new Promise(r => setTimeout(r, mock.delay));\n            \n            return mock?.cancelled ? null : (mock?.filePaths?.[0] || result?.filePaths?.[0]);\n          },\n          \n          message: async (message, options = {}) => {\n            const mock = window.__tauriDialogMock.mocks.message;\n            \n            window.__tauriDialogMock.invocations.push({\n              type: 'message',\n              options: { message, ...options },\n              result: { cancelled: false, response: mock?.response || 0 },\n              timestamp: Date.now()\n            });\n            \n            if (mock?.delay) await new Promise(r => setTimeout(r, mock.delay));\n            \n            return mock?.response || 0;\n          },\n          \n          ask: async (message, options = {}) => {\n            const mock = window.__tauriDialogMock.mocks.confirm;\n            const result = mock?.response !== undefined ? mock.response === 1 : true;\n            \n            window.__tauriDialogMock.invocations.push({\n              type: 'confirm',\n              options: { message, ...options },\n              result: { cancelled: false, response: result ? 1 : 0 },\n              timestamp: Date.now()\n            });\n            \n            if (mock?.delay) await new Promise(r => setTimeout(r, mock.delay));\n            \n            return result;\n          },\n          \n          confirm: async (message, options = {}) => {\n            return mockDialog.ask(message, options);\n          }\n        };\n        \n        // Override Tauri dialog\n        if (window.__TAURI__) {\n          window.__TAURI__.dialog = mockDialog;\n        }\n        \n        // Also handle @tauri-apps/api style imports\n        window.__tauriDialogMock.mockDialog = mockDialog;\n      })()\n    `);\n\n    this.setupDone = true;\n  }\n\n  /**\n   * Mock the file open dialog\n   */\n  async mockOpen(config: MockDialogConfig): Promise<void> {\n    await this.setup();\n    this.mocks.set('open', config);\n    \n    await this.test.evaluate(`\n      window.__tauriDialogMock.mocks.open = ${JSON.stringify(config)};\n    `);\n  }\n\n  /**\n   * Mock the file save dialog\n   */\n  async mockSave(config: MockDialogConfig): Promise<void> {\n    await this.setup();\n    this.mocks.set('save', config);\n    \n    await this.test.evaluate(`\n      window.__tauriDialogMock.mocks.save = ${JSON.stringify(config)};\n    `);\n  }\n\n  /**\n   * Mock the message dialog\n   */\n  async mockMessage(config: MockDialogConfig): Promise<void> {\n    await this.setup();\n    this.mocks.set('message', config);\n    \n    await this.test.evaluate(`\n      window.__tauriDialogMock.mocks.message = ${JSON.stringify(config)};\n    `);\n  }\n\n  /**\n   * Mock the confirm dialog\n   */\n  async mockConfirm(config: MockDialogConfig): Promise<void> {\n    await this.setup();\n    this.mocks.set('confirm', config);\n    \n    await this.test.evaluate(`\n      window.__tauriDialogMock.mocks.confirm = ${JSON.stringify(config)};\n    `);\n  }\n\n  /**\n   * Mock the directory picker\n   */\n  async mockDirectory(config: MockDialogConfig): Promise<void> {\n    await this.mockOpen({ ...config, directory: true } as MockDialogConfig & { directory: boolean });\n  }\n\n  /**\n   * Clear all mocks\n   */\n  async clearMocks(): Promise<void> {\n    this.mocks.clear();\n    \n    await this.test.evaluate(`\n      if (window.__tauriDialogMock) {\n        window.__tauriDialogMock.mocks = {};\n      }\n    `);\n  }\n\n  /**\n   * Get all dialog invocations\n   */\n  async getInvocations(): Promise<DialogInvocation[]> {\n    const invocations = await this.test.evaluate(`\n      window.__tauriDialogMock?.invocations || []\n    `) as DialogInvocation[];\n\n    this._invocations = invocations;\n    return invocations;\n  }\n\n  /**\n   * Get invocations by type\n   */\n  async getInvocationsByType(type: DialogType): Promise<DialogInvocation[]> {\n    const all = await this.getInvocations();\n    return all.filter(i => i.type === type);\n  }\n\n  /**\n   * Clear invocation history\n   */\n  async clearInvocations(): Promise<void> {\n    this._invocations = [];\n    \n    await this.test.evaluate(`\n      if (window.__tauriDialogMock) {\n        window.__tauriDialogMock.invocations = [];\n      }\n    `);\n  }\n\n  /**\n   * Wait for a dialog to be opened\n   */\n  async waitForDialog(type: DialogType, timeout = 5000): Promise<DialogInvocation> {\n    const startTime = Date.now();\n    const initialCount = (await this.getInvocations()).filter(i => i.type === type).length;\n\n    while (Date.now() - startTime < timeout) {\n      const invocations = await this.getInvocationsByType(type);\n      if (invocations.length > initialCount) {\n        return invocations[invocations.length - 1];\n      }\n      await new Promise(resolve => setTimeout(resolve, 100));\n    }\n\n    throw new Error(`Timeout waiting for ${type} dialog`);\n  }\n\n  /**\n   * Expect an open dialog to be called\n   */\n  async expectOpen(): Promise<DialogInvocation> {\n    return this.waitForDialog('open');\n  }\n\n  /**\n   * Expect a save dialog to be called\n   */\n  async expectSave(): Promise<DialogInvocation> {\n    return this.waitForDialog('save');\n  }\n\n  /**\n   * Expect a confirm dialog to be called\n   */\n  async expectConfirm(): Promise<DialogInvocation> {\n    return this.waitForDialog('confirm');\n  }\n\n  /**\n   * Expect a directory picker to be called\n   */\n  async expectDirectory(): Promise<DialogInvocation> {\n    return this.waitForDialog('directory');\n  }\n\n  /**\n   * Assert that a dialog was called\n   */\n  async assertDialogCalled(type: DialogType, message?: string): Promise<void> {\n    const invocations = await this.getInvocationsByType(type);\n    if (invocations.length === 0) {\n      throw new Error(message || `Expected ${type} dialog to be called`);\n    }\n  }\n\n  /**\n   * Assert that a dialog was called with specific options\n   */\n  async assertDialogCalledWith(\n    type: DialogType, \n    expectedOptions: Partial<DialogOptions>,\n    message?: string\n  ): Promise<void> {\n    const invocations = await this.getInvocationsByType(type);\n    \n    const match = invocations.find(inv => {\n      for (const [key, value] of Object.entries(expectedOptions)) {\n        if (JSON.stringify(inv.options[key as keyof DialogOptions]) !== JSON.stringify(value)) {\n          return false;\n        }\n      }\n      return true;\n    });\n\n    if (!match) {\n      throw new Error(message || `Expected ${type} dialog to be called with ${JSON.stringify(expectedOptions)}`);\n    }\n  }\n\n  /**\n   * Assert dialog count\n   */\n  async assertDialogCount(type: DialogType, expected: number, message?: string): Promise<void> {\n    const invocations = await this.getInvocationsByType(type);\n    if (invocations.length !== expected) {\n      throw new Error(message || `Expected ${expected} ${type} dialogs, got ${invocations.length}`);\n    }\n  }\n\n  /**\n   * Simulate selecting files in open dialog (for manual testing)\n   */\n  async selectFiles(filePaths: string[]): Promise<void> {\n    await this.mockOpen({ filePaths });\n  }\n\n  /**\n   * Simulate cancelling a dialog (for manual testing)\n   */\n  async cancel(): Promise<void> {\n    // Set all mocks to cancelled\n    await this.mockOpen({ cancelled: true });\n    await this.mockSave({ cancelled: true });\n  }\n}\n\nexport default TauriDialogTester;\n","/**\n * Benchmark - Performance Testing Module\n * \n * Measure and assert performance metrics including timing,\n * memory usage, and resource consumption.\n */\n\nimport type { DesktopTest } from './desktop-test';\n\n/** Timing measurement */\nexport interface TimingMeasurement {\n  /** Measurement name */\n  name: string;\n  /** Start timestamp */\n  startTime: number;\n  /** End timestamp */\n  endTime: number;\n  /** Duration in milliseconds */\n  duration: number;\n  /** Additional metadata */\n  metadata?: Record<string, unknown>;\n}\n\n/** Memory measurement */\nexport interface MemoryMeasurement {\n  /** Used JS heap size */\n  usedJSHeapSize: number;\n  /** Total JS heap size */\n  totalJSHeapSize: number;\n  /** JS heap size limit */\n  jsHeapSizeLimit: number;\n  /** Timestamp */\n  timestamp: number;\n}\n\n/** Performance entry */\nexport interface PerformanceEntry {\n  /** Entry name */\n  name: string;\n  /** Entry type */\n  entryType: string;\n  /** Start time */\n  startTime: number;\n  /** Duration */\n  duration: number;\n}\n\n/** Resource timing */\nexport interface ResourceTiming extends PerformanceEntry {\n  /** Initiator type */\n  initiatorType: string;\n  /** Transfer size */\n  transferSize: number;\n  /** Encoded body size */\n  encodedBodySize: number;\n  /** Decoded body size */\n  decodedBodySize: number;\n}\n\n/** Performance report */\nexport interface PerformanceReport {\n  /** Test name */\n  testName: string;\n  /** All timing measurements */\n  timings: TimingMeasurement[];\n  /** Memory snapshots */\n  memory: MemoryMeasurement[];\n  /** Resource timings */\n  resources: ResourceTiming[];\n  /** Long tasks (>50ms) */\n  longTasks: PerformanceEntry[];\n  /** Summary statistics */\n  summary: {\n    totalDuration: number;\n    avgTiming: number;\n    maxTiming: number;\n    minTiming: number;\n    peakMemory: number;\n    avgMemory: number;\n    resourceCount: number;\n    totalTransferSize: number;\n  };\n}\n\n/** Threshold configuration */\nexport interface ThresholdConfig {\n  /** Maximum duration in ms */\n  maxDuration?: number;\n  /** Maximum memory in bytes */\n  maxMemory?: number;\n  /** Maximum resource count */\n  maxResourceCount?: number;\n  /** Maximum transfer size in bytes */\n  maxTransferSize?: number;\n}\n\n/**\n * Benchmark - Performance testing and measurement\n * \n * @example\n * ```typescript\n * const benchmark = new Benchmark(test, 'Index Project Test');\n * \n * // Measure operation\n * await benchmark.measure('open-dialog', async () => {\n *   await test.click('[data-testid=\"open-project\"]');\n * });\n * \n * await benchmark.measure('index-files', async () => {\n *   await test.waitFor('[data-testid=\"index-complete\"]');\n * });\n * \n * // Assert performance\n * benchmark.assertDuration('index-files', { maxDuration: 5000 });\n * \n * // Generate report\n * const report = benchmark.generateReport();\n * ```\n */\nexport class Benchmark {\n  private test: DesktopTest;\n  private testName: string;\n  private timings: TimingMeasurement[] = [];\n  private memorySnapshots: MemoryMeasurement[] = [];\n  private activeMeasurements: Map<string, number> = new Map();\n\n  constructor(test: DesktopTest, testName: string = 'Benchmark') {\n    this.test = test;\n    this.testName = testName;\n  }\n\n  /**\n   * Measure the duration of an operation\n   */\n  async measure<T>(name: string, fn: () => Promise<T>): Promise<T> {\n    const startTime = performance.now();\n    this.activeMeasurements.set(name, startTime);\n\n    try {\n      const result = await fn();\n      const endTime = performance.now();\n      \n      this.timings.push({\n        name,\n        startTime,\n        endTime,\n        duration: endTime - startTime\n      });\n\n      this.activeMeasurements.delete(name);\n      return result;\n    } catch (error) {\n      this.activeMeasurements.delete(name);\n      throw error;\n    }\n  }\n\n  /**\n   * Start a named timing measurement\n   */\n  startTiming(name: string): void {\n    this.activeMeasurements.set(name, performance.now());\n  }\n\n  /**\n   * End a named timing measurement\n   */\n  endTiming(name: string, metadata?: Record<string, unknown>): TimingMeasurement {\n    const startTime = this.activeMeasurements.get(name);\n    if (startTime === undefined) {\n      throw new Error(`No active measurement found: ${name}`);\n    }\n\n    const endTime = performance.now();\n    const measurement: TimingMeasurement = {\n      name,\n      startTime,\n      endTime,\n      duration: endTime - startTime,\n      metadata\n    };\n\n    this.timings.push(measurement);\n    this.activeMeasurements.delete(name);\n\n    return measurement;\n  }\n\n  /**\n   * Get timing by name\n   */\n  getTiming(name: string): TimingMeasurement | undefined {\n    return this.timings.find(t => t.name === name);\n  }\n\n  /**\n   * Get all timings\n   */\n  getTimings(): TimingMeasurement[] {\n    return [...this.timings];\n  }\n\n  /**\n   * Measure memory usage\n   */\n  async measureMemory(): Promise<MemoryMeasurement> {\n    const memory = await this.test.evaluate(`\n      (() => {\n        if (performance.memory) {\n          return {\n            usedJSHeapSize: performance.memory.usedJSHeapSize,\n            totalJSHeapSize: performance.memory.totalJSHeapSize,\n            jsHeapSizeLimit: performance.memory.jsHeapSizeLimit,\n            timestamp: Date.now()\n          };\n        }\n        return null;\n      })()\n    `) as MemoryMeasurement | null;\n\n    if (!memory) {\n      // Fallback for non-Chrome browsers\n      const fallback: MemoryMeasurement = {\n        usedJSHeapSize: 0,\n        totalJSHeapSize: 0,\n        jsHeapSizeLimit: 0,\n        timestamp: Date.now()\n      };\n      this.memorySnapshots.push(fallback);\n      return fallback;\n    }\n\n    this.memorySnapshots.push(memory);\n    return memory;\n  }\n\n  /**\n   * Get memory snapshots\n   */\n  getMemorySnapshots(): MemoryMeasurement[] {\n    return [...this.memorySnapshots];\n  }\n\n  /**\n   * Get performance entries from the browser\n   */\n  async getPerformanceEntries(type?: string): Promise<PerformanceEntry[]> {\n    const entries = await this.test.evaluate(`\n      (() => {\n        const entries = ${type ? `performance.getEntriesByType('${type}')` : 'performance.getEntries()'};\n        return entries.map(e => ({\n          name: e.name,\n          entryType: e.entryType,\n          startTime: e.startTime,\n          duration: e.duration,\n          initiatorType: e.initiatorType,\n          transferSize: e.transferSize,\n          encodedBodySize: e.encodedBodySize,\n          decodedBodySize: e.decodedBodySize\n        }));\n      })()\n    `) as PerformanceEntry[];\n\n    return entries;\n  }\n\n  /**\n   * Get resource timing entries\n   */\n  async getResourceTimings(): Promise<ResourceTiming[]> {\n    return this.getPerformanceEntries('resource') as Promise<ResourceTiming[]>;\n  }\n\n  /**\n   * Get long tasks (>50ms)\n   */\n  async getLongTasks(): Promise<PerformanceEntry[]> {\n    return this.getPerformanceEntries('longtask');\n  }\n\n  /**\n   * Clear all measurements\n   */\n  clear(): void {\n    this.timings = [];\n    this.memorySnapshots = [];\n    this.activeMeasurements.clear();\n  }\n\n  /**\n   * Clear browser performance entries\n   */\n  async clearBrowserEntries(): Promise<void> {\n    await this.test.evaluate(`performance.clearResourceTimings()`);\n  }\n\n  /**\n   * Assert duration is within threshold\n   */\n  assertDuration(name: string, thresholds: ThresholdConfig): void {\n    const timing = this.getTiming(name);\n    if (!timing) {\n      throw new Error(`Timing measurement not found: ${name}`);\n    }\n\n    if (thresholds.maxDuration !== undefined && timing.duration > thresholds.maxDuration) {\n      throw new Error(\n        `${name}: Duration ${timing.duration.toFixed(2)}ms exceeds maximum ${thresholds.maxDuration}ms`\n      );\n    }\n  }\n\n  /**\n   * Assert memory is within threshold\n   */\n  assertMemory(thresholds: ThresholdConfig): void {\n    const peakMemory = Math.max(...this.memorySnapshots.map(m => m.usedJSHeapSize));\n    \n    if (thresholds.maxMemory !== undefined && peakMemory > thresholds.maxMemory) {\n      throw new Error(\n        `Peak memory ${this.formatBytes(peakMemory)} exceeds maximum ${this.formatBytes(thresholds.maxMemory)}`\n      );\n    }\n  }\n\n  /**\n   * Assert all thresholds\n   */\n  async assertThresholds(thresholds: ThresholdConfig): Promise<void> {\n    // Check duration (use total if not specific)\n    if (thresholds.maxDuration !== undefined) {\n      const totalDuration = this.timings.reduce((sum, t) => sum + t.duration, 0);\n      if (totalDuration > thresholds.maxDuration) {\n        throw new Error(\n          `Total duration ${totalDuration.toFixed(2)}ms exceeds maximum ${thresholds.maxDuration}ms`\n        );\n      }\n    }\n\n    // Check memory\n    if (thresholds.maxMemory !== undefined) {\n      this.assertMemory(thresholds);\n    }\n\n    // Check resources\n    if (thresholds.maxResourceCount !== undefined || thresholds.maxTransferSize !== undefined) {\n      const resources = await this.getResourceTimings();\n      \n      if (thresholds.maxResourceCount !== undefined && resources.length > thresholds.maxResourceCount) {\n        throw new Error(\n          `Resource count ${resources.length} exceeds maximum ${thresholds.maxResourceCount}`\n        );\n      }\n\n      if (thresholds.maxTransferSize !== undefined) {\n        const totalSize = resources.reduce((sum, r) => sum + (r.transferSize || 0), 0);\n        if (totalSize > thresholds.maxTransferSize) {\n          throw new Error(\n            `Total transfer size ${this.formatBytes(totalSize)} exceeds maximum ${this.formatBytes(thresholds.maxTransferSize)}`\n          );\n        }\n      }\n    }\n  }\n\n  /**\n   * Generate performance report\n   */\n  async generateReport(): Promise<PerformanceReport> {\n    const resources = await this.getResourceTimings();\n    const longTasks = await this.getLongTasks();\n    \n    const durations = this.timings.map(t => t.duration);\n    const memoryValues = this.memorySnapshots.map(m => m.usedJSHeapSize);\n\n    return {\n      testName: this.testName,\n      timings: this.timings,\n      memory: this.memorySnapshots,\n      resources,\n      longTasks,\n      summary: {\n        totalDuration: durations.reduce((a, b) => a + b, 0),\n        avgTiming: durations.length > 0 ? durations.reduce((a, b) => a + b, 0) / durations.length : 0,\n        maxTiming: durations.length > 0 ? Math.max(...durations) : 0,\n        minTiming: durations.length > 0 ? Math.min(...durations) : 0,\n        peakMemory: memoryValues.length > 0 ? Math.max(...memoryValues) : 0,\n        avgMemory: memoryValues.length > 0 ? memoryValues.reduce((a, b) => a + b, 0) / memoryValues.length : 0,\n        resourceCount: resources.length,\n        totalTransferSize: resources.reduce((sum, r) => sum + (r.transferSize || 0), 0)\n      }\n    };\n  }\n\n  /**\n   * Export report as JSON\n   */\n  async exportJSON(): Promise<string> {\n    const report = await this.generateReport();\n    return JSON.stringify(report, null, 2);\n  }\n\n  /**\n   * Compare with baseline\n   */\n  async compareWithBaseline(baseline: PerformanceReport, tolerance = 0.1): Promise<{\n    passed: boolean;\n    differences: Array<{\n      metric: string;\n      baseline: number;\n      current: number;\n      diff: number;\n      diffPercent: number;\n    }>;\n  }> {\n    const current = await this.generateReport();\n    const differences: Array<{\n      metric: string;\n      baseline: number;\n      current: number;\n      diff: number;\n      diffPercent: number;\n    }> = [];\n\n    // Compare timings by name\n    for (const timing of current.timings) {\n      const baselineTiming = baseline.timings.find(t => t.name === timing.name);\n      if (baselineTiming) {\n        const diff = timing.duration - baselineTiming.duration;\n        const diffPercent = diff / baselineTiming.duration;\n        \n        differences.push({\n          metric: `timing:${timing.name}`,\n          baseline: baselineTiming.duration,\n          current: timing.duration,\n          diff,\n          diffPercent\n        });\n      }\n    }\n\n    // Compare summary metrics\n    const summaryMetrics: Array<[string, number, number]> = [\n      ['totalDuration', baseline.summary.totalDuration, current.summary.totalDuration],\n      ['peakMemory', baseline.summary.peakMemory, current.summary.peakMemory],\n      ['resourceCount', baseline.summary.resourceCount, current.summary.resourceCount],\n      ['totalTransferSize', baseline.summary.totalTransferSize, current.summary.totalTransferSize]\n    ];\n\n    for (const [metric, baseValue, currentValue] of summaryMetrics) {\n      if (baseValue > 0) {\n        const diff = currentValue - baseValue;\n        const diffPercent = diff / baseValue;\n        \n        differences.push({\n          metric,\n          baseline: baseValue,\n          current: currentValue,\n          diff,\n          diffPercent\n        });\n      }\n    }\n\n    // Check if any metric exceeds tolerance\n    const passed = differences.every(d => Math.abs(d.diffPercent) <= tolerance);\n\n    return { passed, differences };\n  }\n\n  // Private helpers\n\n  private formatBytes(bytes: number): string {\n    if (bytes < 1024) return `${bytes}B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)}KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(1)}MB`;\n  }\n}\n\nexport default Benchmark;\n","/**\n * StreamServer - Real-time Test Execution Preview\n * \n * Inspired by agent-browser's streaming capabilities.\n * Provides WebSocket-based real-time preview of test execution.\n */\n\nimport type { DesktopTest } from './desktop-test';\n\n/** Stream frame */\nexport interface StreamFrame {\n  /** Frame type */\n  type: 'screenshot' | 'dom' | 'event';\n  /** Frame data (base64 for screenshots) */\n  data: string;\n  /** Frame timestamp */\n  timestamp: number;\n  /** Frame dimensions */\n  dimensions?: { width: number; height: number };\n  /** Frame metadata */\n  metadata?: Record<string, unknown>;\n}\n\n/** Stream options */\nexport interface StreamOptions {\n  /** WebSocket port */\n  port?: number;\n  /** Frame rate (fps) */\n  frameRate?: number;\n  /** Image quality (1-100) */\n  quality?: number;\n  /** Image format */\n  format?: 'jpeg' | 'png';\n  /** Include cursor position */\n  includeCursor?: boolean;\n  /** Include DOM highlights */\n  includeHighlights?: boolean;\n}\n\n/** Input event from client */\nexport interface InputEvent {\n  /** Event type */\n  type: 'click' | 'move' | 'scroll' | 'keydown' | 'keyup' | 'type';\n  /** X coordinate */\n  x?: number;\n  /** Y coordinate */\n  y?: number;\n  /** Key pressed */\n  key?: string;\n  /** Text to type */\n  text?: string;\n  /** Scroll delta */\n  deltaX?: number;\n  deltaY?: number;\n  /** Modifier keys */\n  modifiers?: {\n    ctrl?: boolean;\n    shift?: boolean;\n    alt?: boolean;\n    meta?: boolean;\n  };\n}\n\n/** Stream statistics */\nexport interface StreamStats {\n  /** Total frames sent */\n  framesSent: number;\n  /** Total bytes sent */\n  bytesSent: number;\n  /** Average frame time (ms) */\n  avgFrameTime: number;\n  /** Connected clients */\n  clientCount: number;\n  /** Stream uptime (ms) */\n  uptime: number;\n  /** Current frame rate */\n  currentFps: number;\n}\n\n/** Client info */\nexport interface ClientInfo {\n  /** Client ID */\n  id: string;\n  /** Connection timestamp */\n  connectedAt: number;\n  /** Last activity timestamp */\n  lastActivity: number;\n  /** Client address */\n  address: string;\n}\n\n/**\n * StreamServer - Real-time test execution streaming\n * \n * @example\n * ```typescript\n * const stream = new StreamServer(test);\n * \n * // Start streaming\n * await stream.start({ port: 9223, frameRate: 30 });\n * \n * // Client can connect to ws://localhost:9223\n * // and receive real-time test execution frames\n * \n * // Stop streaming\n * await stream.stop();\n * ```\n */\nexport class StreamServer {\n  private test: DesktopTest;\n  private options: Required<StreamOptions>;\n  private running = false;\n  private startTime = 0;\n  private frameCount = 0;\n  private bytesSent = 0;\n  private clients: Map<string, ClientInfo> = new Map();\n  private frameInterval: NodeJS.Timeout | null = null;\n  private frameTimes: number[] = [];\n  private onFrameCallback?: (frame: StreamFrame) => void;\n  private onInputCallback?: (event: InputEvent) => void;\n\n  constructor(test: DesktopTest) {\n    this.test = test;\n    this.options = {\n      port: 9223,\n      frameRate: 30,\n      quality: 80,\n      format: 'jpeg',\n      includeCursor: true,\n      includeHighlights: true\n    };\n  }\n\n  /**\n   * Start the stream server\n   */\n  async start(options: StreamOptions = {}): Promise<void> {\n    if (this.running) {\n      throw new Error('Stream server is already running');\n    }\n\n    this.options = { ...this.options, ...options };\n    this.running = true;\n    this.startTime = Date.now();\n    this.frameCount = 0;\n    this.bytesSent = 0;\n    this.frameTimes = [];\n\n    // Start frame capture loop\n    const frameInterval = 1000 / this.options.frameRate;\n    this.frameInterval = setInterval(() => this.captureAndSendFrame(), frameInterval);\n\n    // Note: In a real implementation, this would start a WebSocket server\n    // For now, we simulate the server behavior\n    console.log(`Stream server started on port ${this.options.port}`);\n    console.log(`Connect to ws://localhost:${this.options.port} to view the stream`);\n  }\n\n  /**\n   * Stop the stream server\n   */\n  async stop(): Promise<void> {\n    if (!this.running) return;\n\n    this.running = false;\n    \n    if (this.frameInterval) {\n      clearInterval(this.frameInterval);\n      this.frameInterval = null;\n    }\n\n    // Disconnect all clients\n    this.clients.clear();\n\n    console.log('Stream server stopped');\n  }\n\n  /**\n   * Check if server is running\n   */\n  isRunning(): boolean {\n    return this.running;\n  }\n\n  /**\n   * Get stream statistics\n   */\n  getStats(): StreamStats {\n    const avgFrameTime = this.frameTimes.length > 0\n      ? this.frameTimes.reduce((a, b) => a + b, 0) / this.frameTimes.length\n      : 0;\n\n    const recentFrameTimes = this.frameTimes.slice(-30);\n    const currentFps = recentFrameTimes.length > 0\n      ? 1000 / (recentFrameTimes.reduce((a, b) => a + b, 0) / recentFrameTimes.length)\n      : 0;\n\n    return {\n      framesSent: this.frameCount,\n      bytesSent: this.bytesSent,\n      avgFrameTime,\n      clientCount: this.clients.size,\n      uptime: this.running ? Date.now() - this.startTime : 0,\n      currentFps\n    };\n  }\n\n  /**\n   * Get connected clients\n   */\n  getClients(): ClientInfo[] {\n    return Array.from(this.clients.values());\n  }\n\n  /**\n   * Set frame rate\n   */\n  setFrameRate(fps: number): void {\n    this.options.frameRate = fps;\n    \n    // Restart frame capture with new rate\n    if (this.running && this.frameInterval) {\n      clearInterval(this.frameInterval);\n      const frameInterval = 1000 / fps;\n      this.frameInterval = setInterval(() => this.captureAndSendFrame(), frameInterval);\n    }\n  }\n\n  /**\n   * Set image quality\n   */\n  setQuality(quality: number): void {\n    this.options.quality = Math.max(1, Math.min(100, quality));\n  }\n\n  /**\n   * Set image format\n   */\n  setFormat(format: 'jpeg' | 'png'): void {\n    this.options.format = format;\n  }\n\n  /**\n   * Register frame callback (for testing/debugging)\n   */\n  onFrame(callback: (frame: StreamFrame) => void): void {\n    this.onFrameCallback = callback;\n  }\n\n  /**\n   * Register input callback (for testing/debugging)\n   */\n  onInput(callback: (event: InputEvent) => void): void {\n    this.onInputCallback = callback;\n  }\n\n  /**\n   * Simulate client connection (for testing)\n   */\n  simulateClientConnect(clientId: string, address: string = '127.0.0.1'): void {\n    this.clients.set(clientId, {\n      id: clientId,\n      connectedAt: Date.now(),\n      lastActivity: Date.now(),\n      address\n    });\n  }\n\n  /**\n   * Simulate client disconnect (for testing)\n   */\n  simulateClientDisconnect(clientId: string): void {\n    this.clients.delete(clientId);\n  }\n\n  /**\n   * Simulate input event from client (for testing)\n   */\n  async handleInputEvent(event: InputEvent): Promise<void> {\n    if (this.onInputCallback) {\n      this.onInputCallback(event);\n    }\n\n    // Execute the input action\n    switch (event.type) {\n      case 'click':\n        if (event.x !== undefined && event.y !== undefined) {\n          await this.test.evaluate(`\n            document.elementFromPoint(${event.x}, ${event.y})?.click();\n          `);\n        }\n        break;\n      \n      case 'type':\n        if (event.text) {\n          await this.test.evaluate(`\n            const active = document.activeElement;\n            if (active && (active.tagName === 'INPUT' || active.tagName === 'TEXTAREA')) {\n              active.value += ${JSON.stringify(event.text)};\n              active.dispatchEvent(new Event('input', { bubbles: true }));\n            }\n          `);\n        }\n        break;\n      \n      case 'scroll':\n        if (event.deltaX !== undefined || event.deltaY !== undefined) {\n          await this.test.evaluate(`\n            window.scrollBy(${event.deltaX || 0}, ${event.deltaY || 0});\n          `);\n        }\n        break;\n      \n      case 'keydown':\n        if (event.key) {\n          await this.test.press(event.key);\n        }\n        break;\n    }\n  }\n\n  /**\n   * Capture current frame\n   */\n  async captureFrame(): Promise<StreamFrame> {\n    // Take screenshot (path parameter not used, will return base64)\n    const screenshot = await this.test.screenshot();\n\n    // Get viewport dimensions\n    const dimensions = await this.test.evaluate(`\n      ({ width: window.innerWidth, height: window.innerHeight })\n    `) as { width: number; height: number };\n\n    // Get cursor position if enabled\n    let metadata: Record<string, unknown> = {};\n    if (this.options.includeCursor) {\n      const cursor = await this.test.evaluate(`\n        window.__lastMousePosition || { x: 0, y: 0 }\n      `) as { x: number; y: number };\n      metadata.cursor = cursor;\n    }\n\n    return {\n      type: 'screenshot',\n      data: screenshot,\n      timestamp: Date.now(),\n      dimensions,\n      metadata\n    };\n  }\n\n  // Private methods\n\n  private async captureAndSendFrame(): Promise<void> {\n    if (!this.running || this.clients.size === 0) return;\n\n    const frameStart = performance.now();\n\n    try {\n      const frame = await this.captureFrame();\n      \n      // Send to all clients\n      this.broadcastFrame(frame);\n      \n      this.frameCount++;\n      this.bytesSent += frame.data.length;\n\n      const frameTime = performance.now() - frameStart;\n      this.frameTimes.push(frameTime);\n      \n      // Keep only last 100 frame times\n      if (this.frameTimes.length > 100) {\n        this.frameTimes.shift();\n      }\n    } catch (error) {\n      console.error('Error capturing frame:', error);\n    }\n  }\n\n  private broadcastFrame(frame: StreamFrame): void {\n    // Update last activity for all clients\n    for (const client of this.clients.values()) {\n      client.lastActivity = Date.now();\n    }\n\n    // Call frame callback if registered\n    if (this.onFrameCallback) {\n      this.onFrameCallback(frame);\n    }\n\n    // Note: In a real WebSocket implementation, this would send to all connected clients\n  }\n}\n\nexport default StreamServer;\n","/**\n * TimelineTester - Timeline/Gantt Chart Testing Module\n * \n * Specialized testing for timeline components and async event visualization.\n * Useful for testing FlowSight's async execution timeline feature.\n */\n\nimport type { DesktopTest } from './desktop-test';\n\n/** Timeline event */\nexport interface TimelineEvent {\n  /** Event ID */\n  id: string;\n  /** Event name/label */\n  name: string;\n  /** Event type/category */\n  type: string;\n  /** Start time (ms from timeline start) */\n  startTime: number;\n  /** End time (ms from timeline start) */\n  endTime?: number;\n  /** Duration (ms) */\n  duration?: number;\n  /** Event color */\n  color?: string;\n  /** Whether event is selected */\n  selected: boolean;\n  /** Event lane/row */\n  lane?: number;\n  /** Event data */\n  data?: Record<string, unknown>;\n  /** Parent event ID (for hierarchical events) */\n  parentId?: string;\n  /** Child event IDs */\n  childIds?: string[];\n}\n\n/** Timeline state */\nexport interface TimelineState {\n  /** All events */\n  events: TimelineEvent[];\n  /** Visible time range */\n  visibleRange: {\n    start: number;\n    end: number;\n  };\n  /** Total time range */\n  totalRange: {\n    start: number;\n    end: number;\n  };\n  /** Current zoom level */\n  zoom: number;\n  /** Current scroll position */\n  scrollPosition: number;\n  /** Number of lanes */\n  laneCount: number;\n  /** Selected event IDs */\n  selectedIds: string[];\n  /** Playhead position (if playing) */\n  playheadPosition?: number;\n  /** Is timeline playing */\n  isPlaying: boolean;\n}\n\n/** Timeline filter options */\nexport interface TimelineFilterOptions {\n  /** Filter by type */\n  type?: string | string[];\n  /** Filter by name (partial match) */\n  name?: string | RegExp;\n  /** Filter by time range */\n  timeRange?: { start?: number; end?: number };\n  /** Filter by lane */\n  lane?: number;\n  /** Only selected events */\n  selected?: boolean;\n  /** Only events with duration */\n  withDuration?: boolean;\n}\n\n/**\n * TimelineTester - Test timeline and async visualization components\n * \n * @example\n * ```typescript\n * const timeline = new TimelineTester(test, '[data-testid=\"async-timeline\"]');\n * \n * // Get events\n * const events = await timeline.getEvents();\n * \n * // Click an event\n * await timeline.clickEvent('workqueue');\n * \n * // Verify event order\n * await timeline.assertEventOrder(['irq', 'workqueue', 'callback']);\n * \n * // Zoom to range\n * await timeline.zoomToRange(100, 500);\n * ```\n */\nexport class TimelineTester {\n  private test: DesktopTest;\n  private selector: string;\n\n  constructor(test: DesktopTest, selector: string = '[data-testid=\"timeline\"]') {\n    this.test = test;\n    this.selector = selector;\n  }\n\n  /**\n   * Get the current timeline state\n   */\n  async getState(): Promise<TimelineState> {\n    const state = await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return null;\n        \n        // Try to access timeline data from various sources\n        const timelineData = container.__timelineData || \n                           container.dataset.timeline ? JSON.parse(container.dataset.timeline) : null;\n        \n        // Parse events from DOM if no data attribute\n        let events = [];\n        const eventElements = container.querySelectorAll('[data-event-id], .timeline-event, .event-bar');\n        \n        eventElements.forEach(el => {\n          const rect = el.getBoundingClientRect();\n          const containerRect = container.getBoundingClientRect();\n          \n          events.push({\n            id: el.getAttribute('data-event-id') || el.id || '',\n            name: el.getAttribute('data-event-name') || el.textContent?.trim() || '',\n            type: el.getAttribute('data-event-type') || el.className.match(/type-(\\\\w+)/)?.[1] || 'default',\n            startTime: parseFloat(el.getAttribute('data-start-time') || '0'),\n            endTime: el.getAttribute('data-end-time') ? parseFloat(el.getAttribute('data-end-time')) : undefined,\n            duration: el.getAttribute('data-duration') ? parseFloat(el.getAttribute('data-duration')) : undefined,\n            color: getComputedStyle(el).backgroundColor,\n            selected: el.classList.contains('selected') || el.getAttribute('aria-selected') === 'true',\n            lane: parseInt(el.getAttribute('data-lane') || '0', 10),\n            data: el.dataset.eventData ? JSON.parse(el.dataset.eventData) : {},\n            parentId: el.getAttribute('data-parent-id'),\n            childIds: el.getAttribute('data-child-ids')?.split(',').filter(Boolean)\n          });\n        });\n        \n        // Get visible and total range\n        const visibleRange = {\n          start: parseFloat(container.getAttribute('data-visible-start') || '0'),\n          end: parseFloat(container.getAttribute('data-visible-end') || '1000')\n        };\n        \n        const totalRange = {\n          start: parseFloat(container.getAttribute('data-total-start') || '0'),\n          end: parseFloat(container.getAttribute('data-total-end') || '1000')\n        };\n        \n        // Count lanes\n        const lanes = new Set(events.map(e => e.lane));\n        \n        // Get selected IDs\n        const selectedIds = events.filter(e => e.selected).map(e => e.id);\n        \n        // Get playhead position if exists\n        const playhead = container.querySelector('.playhead, .time-indicator');\n        const playheadPosition = playhead \n          ? parseFloat(playhead.getAttribute('data-position') || playhead.style.left)\n          : undefined;\n        \n        return {\n          events,\n          visibleRange,\n          totalRange,\n          zoom: parseFloat(container.getAttribute('data-zoom') || '1'),\n          scrollPosition: container.scrollLeft || 0,\n          laneCount: lanes.size,\n          selectedIds,\n          playheadPosition,\n          isPlaying: container.classList.contains('playing')\n        };\n      })()\n    `) as TimelineState | null;\n\n    if (!state) {\n      throw new Error(`Timeline not found: ${this.selector}`);\n    }\n\n    return state;\n  }\n\n  /**\n   * Get all events\n   */\n  async getEvents(filter?: TimelineFilterOptions): Promise<TimelineEvent[]> {\n    const state = await this.getState();\n    let events = state.events;\n\n    if (filter) {\n      events = this.filterEvents(events, filter);\n    }\n\n    return events;\n  }\n\n  /**\n   * Get event by ID\n   */\n  async getEvent(id: string): Promise<TimelineEvent | null> {\n    const events = await this.getEvents();\n    return events.find(e => e.id === id) || null;\n  }\n\n  /**\n   * Get events by name (partial match)\n   */\n  async getEventsByName(name: string): Promise<TimelineEvent[]> {\n    return this.getEvents({ name });\n  }\n\n  /**\n   * Get events by type\n   */\n  async getEventsByType(type: string): Promise<TimelineEvent[]> {\n    return this.getEvents({ type });\n  }\n\n  /**\n   * Click on an event\n   */\n  async clickEvent(idOrName: string): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        // Find by ID first\n        let event = container.querySelector('[data-event-id=\"${idOrName}\"]');\n        \n        // Find by name if not found\n        if (!event) {\n          const events = container.querySelectorAll('[data-event-id], .timeline-event');\n          for (const el of events) {\n            if (el.textContent?.toLowerCase().includes('${idOrName.toLowerCase()}')) {\n              event = el;\n              break;\n            }\n          }\n        }\n        \n        if (event) {\n          event.click();\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Double-click on an event\n   */\n  async dblclickEvent(idOrName: string): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        let event = container.querySelector('[data-event-id=\"${idOrName}\"]');\n        \n        if (!event) {\n          const events = container.querySelectorAll('[data-event-id], .timeline-event');\n          for (const el of events) {\n            if (el.textContent?.toLowerCase().includes('${idOrName.toLowerCase()}')) {\n              event = el;\n              break;\n            }\n          }\n        }\n        \n        if (event) {\n          event.dispatchEvent(new MouseEvent('dblclick', { bubbles: true }));\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Hover over an event\n   */\n  async hoverEvent(idOrName: string): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        let event = container.querySelector('[data-event-id=\"${idOrName}\"]');\n        \n        if (!event) {\n          const events = container.querySelectorAll('[data-event-id], .timeline-event');\n          for (const el of events) {\n            if (el.textContent?.toLowerCase().includes('${idOrName.toLowerCase()}')) {\n              event = el;\n              break;\n            }\n          }\n        }\n        \n        if (event) {\n          event.dispatchEvent(new MouseEvent('mouseenter', { bubbles: true }));\n          event.dispatchEvent(new MouseEvent('mouseover', { bubbles: true }));\n        }\n      })()\n    `);\n  }\n\n  /**\n   * Zoom to a specific range\n   */\n  async zoomToRange(start: number, end: number): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        // Dispatch custom zoom event\n        container.dispatchEvent(new CustomEvent('timeline-zoom', {\n          detail: { start: ${start}, end: ${end} },\n          bubbles: true\n        }));\n        \n        // Also try setting attributes directly\n        container.setAttribute('data-visible-start', '${start}');\n        container.setAttribute('data-visible-end', '${end}');\n      })()\n    `);\n  }\n\n  /**\n   * Zoom in\n   */\n  async zoomIn(): Promise<void> {\n    const state = await this.getState();\n    const range = state.visibleRange.end - state.visibleRange.start;\n    const center = (state.visibleRange.start + state.visibleRange.end) / 2;\n    const newRange = range * 0.5;\n    \n    await this.zoomToRange(center - newRange / 2, center + newRange / 2);\n  }\n\n  /**\n   * Zoom out\n   */\n  async zoomOut(): Promise<void> {\n    const state = await this.getState();\n    const range = state.visibleRange.end - state.visibleRange.start;\n    const center = (state.visibleRange.start + state.visibleRange.end) / 2;\n    const newRange = range * 2;\n    \n    await this.zoomToRange(\n      Math.max(state.totalRange.start, center - newRange / 2),\n      Math.min(state.totalRange.end, center + newRange / 2)\n    );\n  }\n\n  /**\n   * Fit all events in view\n   */\n  async fitAll(): Promise<void> {\n    const state = await this.getState();\n    await this.zoomToRange(state.totalRange.start, state.totalRange.end);\n  }\n\n  /**\n   * Scroll to a specific time position\n   */\n  async scrollToTime(time: number): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        if (!container) return;\n        \n        container.dispatchEvent(new CustomEvent('timeline-scroll', {\n          detail: { time: ${time} },\n          bubbles: true\n        }));\n      })()\n    `);\n  }\n\n  /**\n   * Play timeline (if supported)\n   */\n  async play(): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const playBtn = container?.querySelector('[data-action=\"play\"], .play-button');\n        if (playBtn) playBtn.click();\n      })()\n    `);\n  }\n\n  /**\n   * Pause timeline\n   */\n  async pause(): Promise<void> {\n    await this.test.evaluate(`\n      (() => {\n        const container = document.querySelector('${this.selector}');\n        const pauseBtn = container?.querySelector('[data-action=\"pause\"], .pause-button');\n        if (pauseBtn) pauseBtn.click();\n      })()\n    `);\n  }\n\n  /**\n   * Assert event exists\n   */\n  async assertEventExists(idOrName: string, message?: string): Promise<void> {\n    const events = await this.getEvents();\n    const found = events.find(e => \n      e.id === idOrName || \n      e.name.toLowerCase().includes(idOrName.toLowerCase())\n    );\n    \n    if (!found) {\n      throw new Error(message || `Expected event \"${idOrName}\" to exist`);\n    }\n  }\n\n  /**\n   * Assert event order\n   */\n  async assertEventOrder(expectedOrder: string[], message?: string): Promise<void> {\n    const events = await this.getEvents();\n    \n    // Sort events by start time\n    const sortedEvents = [...events].sort((a, b) => a.startTime - b.startTime);\n    \n    // Find matching events in order\n    let orderIndex = 0;\n    for (const event of sortedEvents) {\n      if (orderIndex < expectedOrder.length) {\n        const expectedName = expectedOrder[orderIndex].toLowerCase();\n        if (event.id.toLowerCase() === expectedName || \n            event.name.toLowerCase().includes(expectedName)) {\n          orderIndex++;\n        }\n      }\n    }\n\n    if (orderIndex !== expectedOrder.length) {\n      const actualOrder = sortedEvents.map(e => e.name || e.id).join(' -> ');\n      throw new Error(\n        message || \n        `Expected event order: ${expectedOrder.join(' -> ')}\\nActual order: ${actualOrder}`\n      );\n    }\n  }\n\n  /**\n   * Assert concurrent events\n   */\n  async assertConcurrentEvents(eventNames: string[], message?: string): Promise<void> {\n    const events = await this.getEvents();\n    \n    // Find events by name\n    const matchedEvents = eventNames.map(name => {\n      const found = events.find(e => \n        e.id.toLowerCase() === name.toLowerCase() || \n        e.name.toLowerCase().includes(name.toLowerCase())\n      );\n      if (!found) {\n        throw new Error(`Event \"${name}\" not found`);\n      }\n      return found;\n    });\n\n    // Check for time overlap\n    for (let i = 0; i < matchedEvents.length; i++) {\n      for (let j = i + 1; j < matchedEvents.length; j++) {\n        const a = matchedEvents[i];\n        const b = matchedEvents[j];\n        const aEnd = a.endTime || (a.startTime + (a.duration || 0));\n        const bEnd = b.endTime || (b.startTime + (b.duration || 0));\n        \n        const overlaps = a.startTime < bEnd && aEnd > b.startTime;\n        if (!overlaps) {\n          throw new Error(\n            message || \n            `Events \"${a.name}\" and \"${b.name}\" are not concurrent`\n          );\n        }\n      }\n    }\n  }\n\n  /**\n   * Assert time range\n   */\n  async assertTimeRange(expectedStart: number, expectedEnd: number, message?: string): Promise<void> {\n    const state = await this.getState();\n    \n    if (state.totalRange.start !== expectedStart || state.totalRange.end !== expectedEnd) {\n      throw new Error(\n        message || \n        `Expected time range [${expectedStart}, ${expectedEnd}], got [${state.totalRange.start}, ${state.totalRange.end}]`\n      );\n    }\n  }\n\n  /**\n   * Assert event count\n   */\n  async assertEventCount(expected: number, message?: string): Promise<void> {\n    const events = await this.getEvents();\n    if (events.length !== expected) {\n      throw new Error(message || `Expected ${expected} events, got ${events.length}`);\n    }\n  }\n\n  /**\n   * Assert event is selected\n   */\n  async assertEventSelected(idOrName: string, message?: string): Promise<void> {\n    const events = await this.getEvents({ selected: true });\n    const found = events.find(e => \n      e.id === idOrName || \n      e.name.toLowerCase().includes(idOrName.toLowerCase())\n    );\n    \n    if (!found) {\n      throw new Error(message || `Expected event \"${idOrName}\" to be selected`);\n    }\n  }\n\n  // Private methods\n\n  private filterEvents(events: TimelineEvent[], filter: TimelineFilterOptions): TimelineEvent[] {\n    return events.filter(event => {\n      if (filter.type) {\n        const types = Array.isArray(filter.type) ? filter.type : [filter.type];\n        if (!types.includes(event.type)) return false;\n      }\n\n      if (filter.name) {\n        if (filter.name instanceof RegExp) {\n          if (!filter.name.test(event.name)) return false;\n        } else {\n          if (!event.name.toLowerCase().includes(filter.name.toLowerCase())) return false;\n        }\n      }\n\n      if (filter.timeRange) {\n        const eventEnd = event.endTime || (event.startTime + (event.duration || 0));\n        if (filter.timeRange.start !== undefined && eventEnd < filter.timeRange.start) return false;\n        if (filter.timeRange.end !== undefined && event.startTime > filter.timeRange.end) return false;\n      }\n\n      if (filter.lane !== undefined && event.lane !== filter.lane) return false;\n      if (filter.selected !== undefined && event.selected !== filter.selected) return false;\n      if (filter.withDuration && !event.duration) return false;\n\n      return true;\n    });\n  }\n}\n\nexport default TimelineTester;\n","/**\n * ScreenRecorder - Comprehensive Screenshot and Video Recording Module\n * \n * Inspired by agent-browser's screenshot and recording capabilities.\n * Provides full-featured screenshot capture and video recording for test automation.\n */\n\nimport type { DesktopTest } from './desktop-test';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\n/** Screenshot format */\nexport type ScreenshotFormat = 'png' | 'jpeg' | 'webp';\n\n/** Screenshot options */\nexport interface ScreenshotOptions {\n  /** Output path (if not provided, returns base64) */\n  path?: string;\n  /** Image format */\n  format?: ScreenshotFormat;\n  /** JPEG/WebP quality (1-100) */\n  quality?: number;\n  /** Capture full page (scroll to capture all) */\n  fullPage?: boolean;\n  /** Clip region */\n  clip?: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n  };\n  /** Element selector to screenshot */\n  selector?: string;\n  /** Scale factor (for HiDPI) */\n  scale?: number;\n  /** Omit background (transparent PNG) */\n  omitBackground?: boolean;\n  /** Add timestamp to filename */\n  timestamp?: boolean;\n  /** Custom filename prefix */\n  prefix?: string;\n}\n\n/** Screenshot result */\nexport interface ScreenshotResult {\n  /** Base64 encoded image data */\n  data: string;\n  /** File path (if saved) */\n  path?: string;\n  /** Image format */\n  format: ScreenshotFormat;\n  /** Image dimensions */\n  dimensions: {\n    width: number;\n    height: number;\n  };\n  /** Timestamp */\n  timestamp: number;\n  /** File size in bytes */\n  size: number;\n}\n\n/** Recording options */\nexport interface RecordingOptions {\n  /** Output path */\n  path: string;\n  /** Video format */\n  format?: 'webm' | 'mp4';\n  /** Frame rate (fps) */\n  frameRate?: number;\n  /** Video quality (crf: 0-51, lower is better) */\n  quality?: number;\n  /** Video codec */\n  codec?: 'vp8' | 'vp9' | 'h264';\n  /** Video resolution */\n  resolution?: {\n    width: number;\n    height: number;\n  };\n  /** Include audio */\n  audio?: boolean;\n  /** Include cursor */\n  cursor?: boolean;\n}\n\n/** Recording state */\nexport interface RecordingState {\n  /** Is currently recording */\n  isRecording: boolean;\n  /** Recording start time */\n  startTime?: number;\n  /** Recording duration (ms) */\n  duration?: number;\n  /** Output path */\n  path?: string;\n  /** Frame count */\n  frameCount?: number;\n  /** Estimated file size */\n  estimatedSize?: number;\n}\n\n/** Recording result */\nexport interface RecordingResult {\n  /** Output file path */\n  path: string;\n  /** Duration in milliseconds */\n  duration: number;\n  /** File size in bytes */\n  size: number;\n  /** Frame count */\n  frameCount: number;\n  /** Format */\n  format: string;\n  /** Resolution */\n  resolution: { width: number; height: number };\n}\n\n/** Screenshot history entry */\nexport interface ScreenshotHistoryEntry {\n  /** Entry ID */\n  id: string;\n  /** File path */\n  path: string;\n  /** Base64 data (if kept in memory) */\n  data?: string;\n  /** Timestamp */\n  timestamp: number;\n  /** Description/label */\n  description?: string;\n  /** Dimensions */\n  dimensions: { width: number; height: number };\n  /** File size */\n  size: number;\n}\n\n/** Comparison result */\nexport interface ScreenshotComparison {\n  /** Are screenshots identical */\n  identical: boolean;\n  /** Difference percentage (0-100) */\n  diffPercent: number;\n  /** Diff image path */\n  diffImagePath?: string;\n  /** Diff image base64 */\n  diffImageData?: string;\n  /** Number of different pixels */\n  diffPixels: number;\n  /** Total pixels */\n  totalPixels: number;\n  /** Regions that differ */\n  diffRegions: Array<{\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n  }>;\n}\n\n/**\n * ScreenRecorder - Full-featured screenshot and video recording\n * \n * @example\n * ```typescript\n * const recorder = new ScreenRecorder(test, { outputDir: './screenshots' });\n * \n * // Take screenshot\n * const result = await recorder.screenshot({ path: 'test.png' });\n * \n * // Take element screenshot\n * await recorder.screenshotElement('#header', 'header.png');\n * \n * // Full page screenshot\n * await recorder.screenshotFullPage('fullpage.png');\n * \n * // Start video recording\n * await recorder.startRecording({ path: './videos/test.webm' });\n * // ... perform test actions ...\n * const video = await recorder.stopRecording();\n * \n * // Compare screenshots\n * const diff = await recorder.compare('before.png', 'after.png');\n * ```\n */\nexport class ScreenRecorder {\n  private test: DesktopTest;\n  private options: {\n    outputDir: string;\n    defaultFormat: ScreenshotFormat;\n    defaultQuality: number;\n    keepHistory: boolean;\n    maxHistorySize: number;\n  };\n  private history: ScreenshotHistoryEntry[] = [];\n  private recordingState: RecordingState = { isRecording: false };\n  private recordingFrames: string[] = [];\n  private recordingInterval: NodeJS.Timeout | null = null;\n  private screenshotCounter = 0;\n\n  constructor(test: DesktopTest, options: {\n    outputDir?: string;\n    defaultFormat?: ScreenshotFormat;\n    defaultQuality?: number;\n    keepHistory?: boolean;\n    maxHistorySize?: number;\n  } = {}) {\n    this.test = test;\n    this.options = {\n      outputDir: options.outputDir || './screenshots',\n      defaultFormat: options.defaultFormat || 'png',\n      defaultQuality: options.defaultQuality || 90,\n      keepHistory: options.keepHistory ?? true,\n      maxHistorySize: options.maxHistorySize || 100\n    };\n\n    // Ensure output directory exists\n    this.ensureDir(this.options.outputDir);\n  }\n\n  /**\n   * Take a screenshot\n   */\n  async screenshot(options: ScreenshotOptions = {}): Promise<ScreenshotResult> {\n    const format = options.format || this.options.defaultFormat;\n    // Quality is used when encoding (reserved for future implementation)\n    const _quality = options.quality || this.options.defaultQuality;\n    void _quality;\n\n    // Take screenshot based on options\n    let screenshotData: string;\n    \n    if (options.selector) {\n      // Element screenshot\n      screenshotData = await this.captureElement(options.selector);\n    } else if (options.fullPage) {\n      // Full page screenshot\n      screenshotData = await this.captureFullPage();\n    } else if (options.clip) {\n      // Clipped region screenshot\n      screenshotData = await this.captureRegion(options.clip);\n    } else {\n      // Viewport screenshot\n      screenshotData = await this.captureViewport();\n    }\n\n    // Get dimensions\n    const dimensions = await this.getImageDimensions(screenshotData);\n\n    // Calculate size\n    const size = Buffer.from(screenshotData, 'base64').length;\n\n    // Generate path if needed\n    let filePath: string | undefined;\n    if (options.path) {\n      filePath = this.resolvePath(options.path, options);\n      this.ensureDir(path.dirname(filePath));\n      \n      // Save to file\n      const buffer = Buffer.from(screenshotData, 'base64');\n      fs.writeFileSync(filePath, buffer);\n    }\n\n    const result: ScreenshotResult = {\n      data: screenshotData,\n      path: filePath,\n      format,\n      dimensions,\n      timestamp: Date.now(),\n      size\n    };\n\n    // Add to history\n    if (this.options.keepHistory) {\n      this.addToHistory({\n        id: `screenshot-${++this.screenshotCounter}`,\n        path: filePath || '',\n        data: filePath ? undefined : screenshotData, // Only keep data if not saved to file\n        timestamp: result.timestamp,\n        dimensions,\n        size\n      });\n    }\n\n    return result;\n  }\n\n  /**\n   * Take a screenshot of a specific element\n   */\n  async screenshotElement(selector: string, pathOrOptions?: string | ScreenshotOptions): Promise<ScreenshotResult> {\n    const options: ScreenshotOptions = typeof pathOrOptions === 'string' \n      ? { path: pathOrOptions, selector }\n      : { ...pathOrOptions, selector };\n    \n    return this.screenshot(options);\n  }\n\n  /**\n   * Take a full page screenshot (scrolling to capture all content)\n   */\n  async screenshotFullPage(pathOrOptions?: string | ScreenshotOptions): Promise<ScreenshotResult> {\n    const options: ScreenshotOptions = typeof pathOrOptions === 'string'\n      ? { path: pathOrOptions, fullPage: true }\n      : { ...pathOrOptions, fullPage: true };\n    \n    return this.screenshot(options);\n  }\n\n  /**\n   * Take a screenshot of a specific region\n   */\n  async screenshotRegion(\n    clip: { x: number; y: number; width: number; height: number },\n    pathOrOptions?: string | ScreenshotOptions\n  ): Promise<ScreenshotResult> {\n    const options: ScreenshotOptions = typeof pathOrOptions === 'string'\n      ? { path: pathOrOptions, clip }\n      : { ...pathOrOptions, clip };\n    \n    return this.screenshot(options);\n  }\n\n  /**\n   * Take multiple screenshots in sequence\n   */\n  async screenshotSequence(\n    count: number,\n    intervalMs: number,\n    options: ScreenshotOptions & { namePattern?: string } = {}\n  ): Promise<ScreenshotResult[]> {\n    const results: ScreenshotResult[] = [];\n    const pattern = options.namePattern || 'sequence-{n}';\n\n    for (let i = 0; i < count; i++) {\n      const filename = pattern.replace('{n}', String(i + 1).padStart(3, '0'));\n      const result = await this.screenshot({\n        ...options,\n        path: options.path ? path.join(path.dirname(options.path), filename + '.png') : undefined\n      });\n      results.push(result);\n\n      if (i < count - 1) {\n        await new Promise(resolve => setTimeout(resolve, intervalMs));\n      }\n    }\n\n    return results;\n  }\n\n  /**\n   * Start video recording\n   */\n  async startRecording(options: RecordingOptions): Promise<void> {\n    if (this.recordingState.isRecording) {\n      throw new Error('Recording already in progress. Call stopRecording() first.');\n    }\n\n    const {\n      path: outputPath,\n      frameRate = 30,\n    } = options;\n\n    this.ensureDir(path.dirname(outputPath));\n\n    this.recordingState = {\n      isRecording: true,\n      startTime: Date.now(),\n      path: outputPath,\n      frameCount: 0\n    };\n    this.recordingFrames = [];\n\n    // Start capturing frames\n    const intervalMs = 1000 / frameRate;\n    this.recordingInterval = setInterval(async () => {\n      if (!this.recordingState.isRecording) return;\n\n      try {\n        const frame = await this.captureViewport();\n        this.recordingFrames.push(frame);\n        this.recordingState.frameCount = this.recordingFrames.length;\n        this.recordingState.duration = Date.now() - (this.recordingState.startTime || 0);\n      } catch {\n        // Ignore capture errors during recording\n      }\n    }, intervalMs);\n  }\n\n  /**\n   * Stop video recording and save\n   */\n  async stopRecording(): Promise<RecordingResult> {\n    if (!this.recordingState.isRecording) {\n      throw new Error('No recording in progress');\n    }\n\n    // Stop frame capture\n    if (this.recordingInterval) {\n      clearInterval(this.recordingInterval);\n      this.recordingInterval = null;\n    }\n\n    const duration = Date.now() - (this.recordingState.startTime || 0);\n    const frameCount = this.recordingFrames.length;\n    const outputPath = this.recordingState.path || './recording.webm';\n\n    // In a real implementation, this would encode frames to video\n    // For now, we save frames as individual images and create a manifest\n    const framesDir = outputPath.replace(/\\.\\w+$/, '-frames');\n    this.ensureDir(framesDir);\n\n    let totalSize = 0;\n    const frameData: Array<{ index: number; path: string; timestamp: number }> = [];\n\n    for (let i = 0; i < this.recordingFrames.length; i++) {\n      const framePath = path.join(framesDir, `frame-${String(i).padStart(5, '0')}.png`);\n      const buffer = Buffer.from(this.recordingFrames[i], 'base64');\n      fs.writeFileSync(framePath, buffer);\n      totalSize += buffer.length;\n      frameData.push({\n        index: i,\n        path: framePath,\n        timestamp: (this.recordingState.startTime || 0) + (i * (1000 / 30))\n      });\n    }\n\n    // Save manifest\n    const manifest = {\n      outputPath,\n      duration,\n      frameCount,\n      frameRate: 30,\n      frames: frameData,\n      startTime: this.recordingState.startTime,\n      endTime: Date.now()\n    };\n    fs.writeFileSync(outputPath.replace(/\\.\\w+$/, '.json'), JSON.stringify(manifest, null, 2));\n\n    // Get resolution from first frame\n    let resolution = { width: 0, height: 0 };\n    if (this.recordingFrames.length > 0) {\n      resolution = await this.getImageDimensions(this.recordingFrames[0]);\n    }\n\n    // Reset state\n    this.recordingState = { isRecording: false };\n    this.recordingFrames = [];\n\n    return {\n      path: outputPath,\n      duration,\n      size: totalSize,\n      frameCount,\n      format: 'webm',\n      resolution\n    };\n  }\n\n  /**\n   * Get current recording state\n   */\n  getRecordingState(): RecordingState {\n    if (this.recordingState.isRecording) {\n      return {\n        ...this.recordingState,\n        duration: Date.now() - (this.recordingState.startTime || 0),\n        frameCount: this.recordingFrames.length,\n        estimatedSize: this.recordingFrames.reduce((sum, f) => sum + Buffer.from(f, 'base64').length, 0)\n      };\n    }\n    return this.recordingState;\n  }\n\n  /**\n   * Pause recording (if in progress)\n   */\n  pauseRecording(): void {\n    if (this.recordingInterval) {\n      clearInterval(this.recordingInterval);\n      this.recordingInterval = null;\n    }\n  }\n\n  /**\n   * Resume recording (if paused)\n   */\n  resumeRecording(frameRate = 30): void {\n    if (this.recordingState.isRecording && !this.recordingInterval) {\n      const intervalMs = 1000 / frameRate;\n      this.recordingInterval = setInterval(async () => {\n        if (!this.recordingState.isRecording) return;\n        try {\n          const frame = await this.captureViewport();\n          this.recordingFrames.push(frame);\n        } catch {\n          // Ignore\n        }\n      }, intervalMs);\n    }\n  }\n\n  /**\n   * Compare two screenshots\n   */\n  async compare(\n    image1: string | ScreenshotResult,\n    image2: string | ScreenshotResult,\n    options: { threshold?: number; outputDiff?: string } = {}\n  ): Promise<ScreenshotComparison> {\n    const { threshold = 0.1, outputDiff } = options;\n\n    // Get base64 data for both images\n    const data1 = typeof image1 === 'string' \n      ? (image1.startsWith('data:') || image1.length > 500 \n          ? image1 \n          : fs.readFileSync(image1).toString('base64'))\n      : image1.data;\n\n    const data2 = typeof image2 === 'string'\n      ? (image2.startsWith('data:') || image2.length > 500\n          ? image2\n          : fs.readFileSync(image2).toString('base64'))\n      : image2.data;\n\n    // Use the page to compare images\n    const result = await this.test.evaluate(`\n      (() => {\n        return new Promise((resolve) => {\n          const img1 = new Image();\n          const img2 = new Image();\n          let loaded = 0;\n          \n          const onLoad = () => {\n            loaded++;\n            if (loaded < 2) return;\n            \n            // Create canvases\n            const canvas1 = document.createElement('canvas');\n            const canvas2 = document.createElement('canvas');\n            const canvasDiff = document.createElement('canvas');\n            \n            canvas1.width = img1.width;\n            canvas1.height = img1.height;\n            canvas2.width = img2.width;\n            canvas2.height = img2.height;\n            canvasDiff.width = Math.max(img1.width, img2.width);\n            canvasDiff.height = Math.max(img1.height, img2.height);\n            \n            const ctx1 = canvas1.getContext('2d');\n            const ctx2 = canvas2.getContext('2d');\n            const ctxDiff = canvasDiff.getContext('2d');\n            \n            ctx1.drawImage(img1, 0, 0);\n            ctx2.drawImage(img2, 0, 0);\n            \n            const pixels1 = ctx1.getImageData(0, 0, canvas1.width, canvas1.height);\n            const pixels2 = ctx2.getImageData(0, 0, canvas2.width, canvas2.height);\n            const diffData = ctxDiff.createImageData(canvasDiff.width, canvasDiff.height);\n            \n            let diffPixels = 0;\n            const totalPixels = Math.max(pixels1.data.length, pixels2.data.length) / 4;\n            const diffRegions = [];\n            \n            for (let i = 0; i < diffData.data.length; i += 4) {\n              const idx = i / 4;\n              const x = idx % canvasDiff.width;\n              const y = Math.floor(idx / canvasDiff.width);\n              \n              const r1 = pixels1.data[i] || 0;\n              const g1 = pixels1.data[i + 1] || 0;\n              const b1 = pixels1.data[i + 2] || 0;\n              \n              const r2 = pixels2.data[i] || 0;\n              const g2 = pixels2.data[i + 1] || 0;\n              const b2 = pixels2.data[i + 2] || 0;\n              \n              const diff = Math.abs(r1 - r2) + Math.abs(g1 - g2) + Math.abs(b1 - b2);\n              \n              if (diff > ${threshold * 255 * 3}) {\n                diffPixels++;\n                diffData.data[i] = 255;\n                diffData.data[i + 1] = 0;\n                diffData.data[i + 2] = 0;\n                diffData.data[i + 3] = 255;\n              } else {\n                diffData.data[i] = (r1 + r2) / 2;\n                diffData.data[i + 1] = (g1 + g2) / 2;\n                diffData.data[i + 2] = (b1 + b2) / 2;\n                diffData.data[i + 3] = 128;\n              }\n            }\n            \n            ctxDiff.putImageData(diffData, 0, 0);\n            \n            resolve({\n              identical: diffPixels === 0,\n              diffPercent: (diffPixels / totalPixels) * 100,\n              diffPixels,\n              totalPixels,\n              diffImageData: canvasDiff.toDataURL('image/png').split(',')[1],\n              diffRegions: []\n            });\n          };\n          \n          img1.onload = onLoad;\n          img2.onload = onLoad;\n          img1.src = 'data:image/png;base64,${data1}';\n          img2.src = 'data:image/png;base64,${data2}';\n        });\n      })()\n    `) as ScreenshotComparison;\n\n    // Save diff image if requested\n    if (outputDiff && result.diffImageData) {\n      const diffBuffer = Buffer.from(result.diffImageData, 'base64');\n      fs.writeFileSync(outputDiff, diffBuffer);\n      result.diffImagePath = outputDiff;\n    }\n\n    return result;\n  }\n\n  /**\n   * Get screenshot history\n   */\n  getHistory(): ScreenshotHistoryEntry[] {\n    return [...this.history];\n  }\n\n  /**\n   * Clear screenshot history\n   */\n  clearHistory(): void {\n    this.history = [];\n  }\n\n  /**\n   * Get a screenshot from history by ID\n   */\n  getFromHistory(id: string): ScreenshotHistoryEntry | undefined {\n    return this.history.find(h => h.id === id);\n  }\n\n  /**\n   * Delete screenshots from history and optionally from disk\n   */\n  deleteFromHistory(id: string, deleteFile = false): boolean {\n    const index = this.history.findIndex(h => h.id === id);\n    if (index === -1) return false;\n\n    const entry = this.history[index];\n    if (deleteFile && entry.path && fs.existsSync(entry.path)) {\n      fs.unlinkSync(entry.path);\n    }\n\n    this.history.splice(index, 1);\n    return true;\n  }\n\n  /**\n   * Create a GIF from recent screenshots\n   */\n  async createGif(\n    screenshots: Array<string | ScreenshotResult>,\n    options: { path: string; delay?: number; loop?: boolean }\n  ): Promise<{ path: string; size: number }> {\n    // Note: In a real implementation, this would use a GIF encoder\n    // For now, we save a manifest with the frame data\n    const frames = screenshots.map((s, i) => ({\n      index: i,\n      data: typeof s === 'string' ? s : s.data\n    }));\n\n    const manifest = {\n      type: 'gif',\n      frames,\n      delay: options.delay || 100,\n      loop: options.loop ?? true\n    };\n\n    fs.writeFileSync(options.path + '.json', JSON.stringify(manifest, null, 2));\n\n    return {\n      path: options.path,\n      size: JSON.stringify(manifest).length\n    };\n  }\n\n  /**\n   * Annotate a screenshot\n   */\n  async annotate(\n    screenshot: string | ScreenshotResult,\n    annotations: Array<{\n      type: 'rectangle' | 'circle' | 'arrow' | 'text';\n      x: number;\n      y: number;\n      width?: number;\n      height?: number;\n      radius?: number;\n      text?: string;\n      color?: string;\n      endX?: number;\n      endY?: number;\n    }>,\n    outputPath?: string\n  ): Promise<ScreenshotResult> {\n    const data = typeof screenshot === 'string' ? screenshot : screenshot.data;\n\n    // Use the page to annotate\n    const annotatedData = await this.test.evaluate(`\n      (() => {\n        return new Promise((resolve) => {\n          const img = new Image();\n          img.onload = () => {\n            const canvas = document.createElement('canvas');\n            canvas.width = img.width;\n            canvas.height = img.height;\n            const ctx = canvas.getContext('2d');\n            ctx.drawImage(img, 0, 0);\n            \n            const annotations = ${JSON.stringify(annotations)};\n            \n            for (const ann of annotations) {\n              ctx.strokeStyle = ann.color || '#ff0000';\n              ctx.fillStyle = ann.color || '#ff0000';\n              ctx.lineWidth = 2;\n              ctx.font = '16px sans-serif';\n              \n              switch (ann.type) {\n                case 'rectangle':\n                  ctx.strokeRect(ann.x, ann.y, ann.width || 100, ann.height || 50);\n                  break;\n                case 'circle':\n                  ctx.beginPath();\n                  ctx.arc(ann.x, ann.y, ann.radius || 25, 0, Math.PI * 2);\n                  ctx.stroke();\n                  break;\n                case 'arrow':\n                  ctx.beginPath();\n                  ctx.moveTo(ann.x, ann.y);\n                  ctx.lineTo(ann.endX || ann.x + 50, ann.endY || ann.y + 50);\n                  ctx.stroke();\n                  // Arrow head\n                  const angle = Math.atan2((ann.endY || ann.y) - ann.y, (ann.endX || ann.x) - ann.x);\n                  ctx.beginPath();\n                  ctx.moveTo(ann.endX || ann.x + 50, ann.endY || ann.y + 50);\n                  ctx.lineTo(\n                    (ann.endX || ann.x + 50) - 10 * Math.cos(angle - Math.PI / 6),\n                    (ann.endY || ann.y + 50) - 10 * Math.sin(angle - Math.PI / 6)\n                  );\n                  ctx.moveTo(ann.endX || ann.x + 50, ann.endY || ann.y + 50);\n                  ctx.lineTo(\n                    (ann.endX || ann.x + 50) - 10 * Math.cos(angle + Math.PI / 6),\n                    (ann.endY || ann.y + 50) - 10 * Math.sin(angle + Math.PI / 6)\n                  );\n                  ctx.stroke();\n                  break;\n                case 'text':\n                  ctx.fillText(ann.text || '', ann.x, ann.y);\n                  break;\n              }\n            }\n            \n            resolve(canvas.toDataURL('image/png').split(',')[1]);\n          };\n          img.src = 'data:image/png;base64,${data}';\n        });\n      })()\n    `) as string;\n\n    const dimensions = await this.getImageDimensions(annotatedData);\n    const size = Buffer.from(annotatedData, 'base64').length;\n\n    if (outputPath) {\n      const buffer = Buffer.from(annotatedData, 'base64');\n      fs.writeFileSync(outputPath, buffer);\n    }\n\n    return {\n      data: annotatedData,\n      path: outputPath,\n      format: 'png',\n      dimensions,\n      timestamp: Date.now(),\n      size\n    };\n  }\n\n  // Private methods\n\n  private async captureViewport(): Promise<string> {\n    return this.test.screenshot();\n  }\n\n  private async captureFullPage(): Promise<string> {\n    // Scroll through the page and stitch screenshots\n    // For simplicity, return viewport screenshot\n    // In a real implementation, this would scroll and stitch\n    return this.test.screenshot();\n  }\n\n  private async captureElement(selector: string): Promise<string> {\n    // Get element bounds\n    const bounds = await this.test.evaluate(`\n      (() => {\n        const el = document.querySelector('${selector}');\n        if (!el) return null;\n        const rect = el.getBoundingClientRect();\n        return {\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height\n        };\n      })()\n    `) as { x: number; y: number; width: number; height: number } | null;\n\n    if (!bounds) {\n      throw new Error(`Element not found: ${selector}`);\n    }\n\n    // For simplicity, return full viewport\n    // In a real implementation, this would clip to element bounds\n    return this.test.screenshot();\n  }\n\n  private async captureRegion(clip: { x: number; y: number; width: number; height: number }): Promise<string> {\n    // For simplicity, return full viewport\n    // In a real implementation, this would clip to specified region\n    void clip;\n    return this.test.screenshot();\n  }\n\n  private async getImageDimensions(base64Data: string): Promise<{ width: number; height: number }> {\n    const result = await this.test.evaluate(`\n      (() => {\n        return new Promise((resolve) => {\n          const img = new Image();\n          img.onload = () => resolve({ width: img.width, height: img.height });\n          img.onerror = () => resolve({ width: 0, height: 0 });\n          img.src = 'data:image/png;base64,${base64Data}';\n        });\n      })()\n    `) as { width: number; height: number };\n\n    return result;\n  }\n\n  private resolvePath(filePath: string, options: ScreenshotOptions): string {\n    let resolvedPath = filePath;\n\n    // Add timestamp if requested\n    if (options.timestamp) {\n      const ext = path.extname(filePath);\n      const base = filePath.slice(0, -ext.length);\n      resolvedPath = `${base}-${Date.now()}${ext}`;\n    }\n\n    // Add prefix if requested\n    if (options.prefix) {\n      const dir = path.dirname(resolvedPath);\n      const name = path.basename(resolvedPath);\n      resolvedPath = path.join(dir, `${options.prefix}-${name}`);\n    }\n\n    // Resolve relative to output dir\n    if (!path.isAbsolute(resolvedPath)) {\n      resolvedPath = path.join(this.options.outputDir, resolvedPath);\n    }\n\n    return resolvedPath;\n  }\n\n  private ensureDir(dir: string): void {\n    if (!fs.existsSync(dir)) {\n      fs.mkdirSync(dir, { recursive: true });\n    }\n  }\n\n  private addToHistory(entry: ScreenshotHistoryEntry): void {\n    this.history.push(entry);\n    \n    // Trim history if needed\n    while (this.history.length > this.options.maxHistorySize) {\n      this.history.shift();\n    }\n  }\n}\n\nexport default ScreenRecorder;\n"]}